				
05-08-24
Controller 222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222
resources\views\backEnd\timesheet\timesheetdownload.blade.php


                      @if (Request::is('adminsearchtimesheet') || Request::is('mytimesheetlist/*') || Request::is('searchingtimesheet'))
                          <table id="examplee" class="table display table-bordered table-striped table-hover">
                              <thead>
                                  <tr>
                                      <th style="display: none;">id</th>
                                      <th>Employee Name</th>
                                      {{-- @if (Request::is('adminsearchtimesheet')) --}}
                                      <th>Employee Code</th>
                                      {{-- @endif --}}
                                      <th>Date</th>
                                      <th>Day</th>
                                      <th>Client Name</th>
                                      <th>Client Code</th>
                                      <th>Assignment Name</th>
                                      <th>Assignment Id</th>
                                      <th>Work Item</th>
                                      <th>Location</th>
                                      <th>Partner</th>
                                      <th>Partner Code</th>
                                      <th>Hour</th>
                                  </tr>
                              </thead>
                              <tbody>
                                  @foreach ($timesheetData as $timesheetDatas)
                                      <tr>
                                          {{-- @if (Request::is('adminsearchtimesheet')) --}}
                                          @php

                                              $permotioncheck = DB::table('teamrolehistory')
                                                  ->where('teammember_id', $timesheetDatas->createdby)
                                                  ->first();
                                              //shshid client
                                              $datadate = $timesheetDatas->assignmentcreateddate
                                                  ? Carbon\Carbon::createFromFormat(
                                                      'Y-m-d H:i:s',
                                                      $timesheetDatas->assignmentcreateddate,
                                                  )
                                                  : null;

                                              $permotiondate = null;
                                              if ($permotioncheck) {
                                                  $permotiondate = Carbon\Carbon::createFromFormat(
                                                      'Y-m-d H:i:s',
                                                      $permotioncheck->created_at,
                                                  );
                                              }
                                          @endphp
                                          {{-- @endif --}}
                                          <td style="display: none;">{{ $timesheetDatas->id }}</td>
                                          <td> {{ $timesheetDatas->team_member ?? '' }} </td>
                                          {{-- @if (Request::is('adminsearchtimesheet')) --}}
                                          {{-- <td> {{ $timesheetDatas->staffcode ?? '' }} </td> --}}
                                          @if ($permotioncheck && $datadate && $datadate->greaterThan($permotiondate))
                                              <td>{{ $permotioncheck->newstaff_code }}</td>
                                          @else
                                              <td>{{ $timesheetDatas->staffcode }}</td>
                                          @endif
                                          {{-- @endif --}}
                                          <td> <span style="display: none;">
                                                  {{ date('Y-m-d', strtotime($timesheetDatas->date)) }}</span>{{ date('d-m-Y', strtotime($timesheetDatas->date)) }}
                                          </td>
                                          <td>
                                              @if ($timesheetDatas->date != null)
                                                  {{ date('l', strtotime($timesheetDatas->date)) }}
                                              @endif
                                          </td>
                                          <td>{{ $timesheetDatas->client_name ?? '' }}
                                          </td>
                                          <td>{{ $timesheetDatas->client_code ?? '' }}
                                          </td>
                                          <td>
                                              {{ $timesheetDatas->assignment_name ?? '' }}
                                              @if ($timesheetDatas->assignmentname != null)
                                                  ({{ $timesheetDatas->assignmentname ?? '' }})
                                              @endif
                                          </td>
                                          <td>
                                              {{ $timesheetDatas->assignmentgenerate_id ?? '' }}
                                          </td>
                                          <td> {{ $timesheetDatas->workitem ?? '' }}</td>
                                          <td>{{ $timesheetDatas->location ?? '' }} </td>
                                          <td> {{ $timesheetDatas->patnername ?? '' }}
                                          </td>
                                          <td>
                                              @if ($permotioncheck && $datadate && $datadate->greaterThan($permotiondate))
                                                  {{ $timesheetDatas->newstaff_code ?? '' }}
                                              @else
                                                  {{ $timesheetDatas->patnerstaffcode ?? '' }}
                                              @endif
                                          </td>
                                          <td>{{ $timesheetDatas->hour ?? '' }}</td>
                                      </tr>
                                  @endforeach
                              </tbody>
                          </table>
                      @endif

								




06-08-24  working now 						
Controller 222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222
resources\views\backEnd\report\assignmentreport.blade.php


<script>
    $(document).ready(function() {
        $('#examplee').DataTable({
            "pageLength": 50,
            dom: 'Bfrtip',

            @if (Auth::user()->role_id == 11 || Auth::user()->role_id == 13 || Auth::user()->role_id == 14)
                "order": [
                    [2, "asc"]
                ],
            @else
                "order": [
                    [1, "asc"]
                ],
            @endif

            columnDefs: [{
                @if (Auth::user()->role_id == 11 || Auth::user()->role_id == 13 || Auth::user()->role_id == 14)
                    targets: [0, 1, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16],
                @else
                    targets: [0, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15],
                @endif
                orderable: false
            }],
            buttons: [

                {
                    extend: 'copyHtml5',
                    exportOptions: {
                        columns: [0, ':visible']
                    }
                },
                {
                    extend: 'excelHtml5',
                    filename: 'Open Assignment Report List',
                    exportOptions: {
                        columns: ':visible'
                    },
                    customize: function(xlsx) {
                        var sheet = xlsx.xl.worksheets['sheet1.xml'];
                        //   remove extra spaces
                        $('c', sheet).each(function() {
                            var originalText = $(this).find('is t').text();
                            var cleanedText = originalText.replace(/\s+/g, ' ').trim();
                            $(this).find('is t').text(cleanedText);
                        });
                    }
                },
                {
                    extend: 'pdfHtml5',
                    exportOptions: {
                        columns: [0, 1, 2, 5]
                    }
                },
                'colvis'
            ]
        });
    });
</script>



<script>
    $(document).ready(function() {
        $('#exampleee').DataTable({
            "pageLength": 50,
            dom: 'Bfrtip',
            // "order": [
            //     [2, "asc"]
            // ],
            @if (Auth::user()->role_id == 13 || Auth::user()->role_id == 14)
                "order": [
                    [2, "asc"]
                ],
            @else
                "order": [
                    [1, "asc"]
                ],
            @endif
            columnDefs: [{
                // targets: [0, 1, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16],
                @if (Auth::user()->role_id == 13 || Auth::user()->role_id == 14)
                    targets: [0, 1, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16],
                @else
                    targets: [0, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15],
                @endif
                orderable: false
            }],

            buttons: [

                {
                    extend: 'copyHtml5',
                    exportOptions: {
                        columns: [0, ':visible']
                    }
                },
                {
                    extend: 'excelHtml5',
                    filename: 'Close Assignment Report List',
                    exportOptions: {
                        columns: ':visible'
                    },
                    customize: function(xlsx) {
                        var sheet = xlsx.xl.worksheets['sheet1.xml'];
                        //   remove extra spaces
                        $('c', sheet).each(function() {
                            var originalText = $(this).find('is t').text();
                            var cleanedText = originalText.replace(/\s+/g, ' ').trim();
                            $(this).find('is t').text(cleanedText);
                        });
                    }
                },
                {
                    extend: 'pdfHtml5',
                    exportOptions: {
                        columns: [0, 1, 2, 5]
                    }
                },
                'colvis'
            ]
        });
    });
</script>



Controller 222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222
resources\views\backEnd\report\assignmentreport.blade.php

                                <table id="examplee" class="display nowrap">
                                    <thead>
                                        <tr>
                                            <th style="display: none;">id</th>
                                            @if (auth()->user()->role_id == 13 || Auth::user()->role_id == 11 || Auth::user()->role_id == 14)
                                                <th>Edit</th>
                                            @endif
                                            <th>Assignment Id</th>
                                            <th>Assignment</th>
                                            <th>Client</th>
                                            <th>Client Code</th>
                                            <th>Period Start</th>
                                            <th>Period End</th>
                                            <th>Deadline</th>
                                            <th>Assigned Status</th>
                                            <th>Assigned Partner</th>
                                            <th>Assignedpartner Code</th>
                                            <th>Other Partner</th>
                                            <th>Otherpartner Code</th>
                                            <th>Team Leader </th>
                                            <th>Teammember</th>
                                            <th>Total Hour</th>
                                        </tr>
                                    </thead>

                                    <tbody>
                                        @foreach ($assignmentmappingData as $assignmentmappingDatas)
                                            <tr>
                                                @php
                                                    if (auth()->user()->role_id == 11) {
                                                        $teamhourteams = DB::table('assignmentteammappings')
                                                            ->where('assignmentmapping_id', $assignmentmappingDatas->id)
                                                            ->select(DB::raw('SUM(teamhour) as teamhourteam'))
                                                            ->first();

                                                        $partnerhour =
                                                            $assignmentmappingDatas->leadpartnerhour +
                                                            $assignmentmappingDatas->otherpartnerhour;

                                                        $totalhour = $partnerhour + $teamhourteams->teamhourteam;
                                                        // dd($totalhour);
                                                    }
                                                @endphp
                                                <td style="display: none;">{{ $assignmentmappingDatas->id }}</td>
                                                @if (auth()->user()->role_id == 13 || Auth::user()->role_id == 11 || Auth::user()->role_id == 14)
                                                    <td>
                                                        <a href="{{ url('/assignmentlist/' . $assignmentmappingDatas->assignmentgenerate_id) }}"
                                                            class="btn btn-info-soft btn-sm"><i class="far fa-edit"></i></a>
                                                    </td>
                                                @endif
                                                <td> <a
                                                        href="{{ url('/viewassignment/' . $assignmentmappingDatas->assignmentgenerate_id) }}">{{ $assignmentmappingDatas->assignmentgenerate_id }}</a>
                                                </td>
                                                <td>
                                                    {{ $assignmentmappingDatas->assignment_name }} @if ($assignmentmappingDatas->assignmentname != null)
                                                        ({{ $assignmentmappingDatas->assignmentname }})
                                                    @endif
                                                </td>
                                                <td> {{ $assignmentmappingDatas->client_name }}
                                                </td>
                                                <td> {{ $assignmentmappingDatas->client_code }}
                                                </td>
                                                <td>
                                                    @if ($assignmentmappingDatas->periodstart != null)
                                                        {{ date('d-m-Y', strtotime($assignmentmappingDatas->periodstart)) }}
                                                    @endif
                                                </td>

                                                <td>
                                                    @if ($assignmentmappingDatas->periodend != null)
                                                        {{ date('d-m-Y', strtotime($assignmentmappingDatas->periodend)) }}
                                                    @endif
                                                </td>
                                                <td>
                                                    @if ($assignmentmappingDatas->duedate != null)
                                                        {{ date('d-m-Y', strtotime($assignmentmappingDatas->duedate)) }}
                                                    @endif
                                                </td>
                                                <td>
                                                    @if ($assignmentmappingDatas->status == 1)
                                                        <span class="badge badge-primary">OPEN</span>
                                                    @elseif($assignmentmappingDatas->status == 0)
                                                        <span class="badge badge-danger">CLOSED</span>
                                                    @endif

                                                </td>

                                                {{-- <td>
                                                    {{ App\Models\Teammember::select('team_member')->where('id', $assignmentmappingDatas->leadpartner)->first()->team_member ?? '' }}
                                                    (
                                                    {{ App\Models\Teammember::select('team_member', 'staffcode')->where('id', $assignmentmappingDatas->leadpartner)->first()->staffcode ?? '' }})
                                                </td>
                                                <td>
                                                    {{ App\Models\Teammember::select('team_member')->where('id', $assignmentmappingDatas->otherpartner)->first()->team_member ?? '' }}
                                                    ({{ App\Models\Teammember::select('team_member', 'staffcode')->where('id', $assignmentmappingDatas->otherpartner)->first()->staffcode ?? '' }})
                                                </td> --}}

                                                @php
                                                    // $leadpartner = App\Models\Teammember::select(
                                                    //     'team_member',
                                                    //     'staffcode',
                                                    // )
                                                    //     ->where('id', $assignmentmappingDatas->leadpartner)
                                                    //     ->first();

                                                    // $otherPartner = App\Models\Teammember::select(
                                                    //     'team_member',
                                                    //     'staffcode',
                                                    // )
                                                    //     ->where('id', $assignmentmappingDatas->otherpartner)
                                                    //     ->first();

                                                    $leadpartner = DB::table('teammembers')
                                                        ->leftJoin(
                                                            'teamrolehistory',
                                                            'teamrolehistory.teammember_id',
                                                            '=',
                                                            'teammembers.id',
                                                        )
                                                        ->where('teammembers.id', $assignmentmappingDatas->leadpartner)
                                                        ->select(
                                                            'teammembers.team_member',
                                                            'teammembers.staffcode',
                                                            'teamrolehistory.newstaff_code',
                                                        )
                                                        ->first();

                                                    $otherPartner = DB::table('teammembers')
                                                        ->leftJoin(
                                                            'teamrolehistory',
                                                            'teamrolehistory.teammember_id',
                                                            '=',
                                                            'teammembers.id',
                                                        )
                                                        ->where('teammembers.id', $assignmentmappingDatas->otherpartner)
                                                        ->select(
                                                            'teammembers.team_member',
                                                            'teammembers.staffcode',
                                                            'teamrolehistory.newstaff_code',
                                                        )
                                                        ->first();

                                                @endphp
                                                <td>
                                                    {{ $leadpartner->team_member ?? '' }}
                                                </td>
                                                <td>
                                                    @if ($leadpartner && $leadpartner->team_member)
                                                        {{ $leadpartner->newstaff_code ?? ($leadpartner->staffcode ?? '') }}
                                                    @endif
                                                </td>

                                                <td>
                                                    {{ $otherPartner->team_member ?? '' }}
                                                </td>
                                                <td>
                                                    @if ($otherPartner && $otherPartner->team_member)
                                                        {{ $otherPartner->newstaff_code ?? ($otherPartner->staffcode ?? '') }}
                                                    @endif
                                                </td>

                                                <td>
                                                    @foreach (DB::table('assignmentmappings')->leftjoin('assignmentteammappings', 'assignmentteammappings.assignmentmapping_id', 'assignmentmappings.id')->leftjoin('teammembers', 'teammembers.id', 'assignmentteammappings.teammember_id')->where('assignmentmappings.id', $assignmentmappingDatas->id)->where('assignmentteammappings.type', 0)->get() as $sub)
                                                        {{ $sub->team_member }} ,
                                                    @endforeach
                                                </td>
                                                <td>
                                                    @foreach (DB::table('assignmentmappings')->leftjoin('assignmentteammappings', 'assignmentteammappings.assignmentmapping_id', 'assignmentmappings.id')->leftjoin('teammembers', 'teammembers.id', 'assignmentteammappings.teammember_id')->where('assignmentmappings.id', $assignmentmappingDatas->id)->where('assignmentteammappings.type', 2)->get() as $sub)
                                                        {{ $sub->team_member }} ,
                                                    @endforeach
                                                </td>

                                                @if (auth()->user()->role_id == 11)
                                                    <td> {{ $totalhour ?? '0' }}</td>
                                                @elseif (auth()->user()->role_id == 13)
                                                    <td>{{ $assignmentmappingDatas->leadpartnerhour ?? ($assignmentmappingDatas->otherpartnerhour ?? 0) }}
                                                    </td>
                                                @else
                                                    <td>{{ $assignmentmappingDatas->teamhour ?? '0' }} </td>
                                                @endif
                                            </tr>
                                        @endforeach
                                    </tbody>
                                </table>






Controller 222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222
resources\views\backEnd\report\assignmentreport.blade.php

                            <table id="exampleee" class="display nowrap">
                                <thead>
                                    <tr>
                                        <th style="display: none;">id</th>
                                        @if (auth()->user()->role_id != 15 && Auth::user()->role_id != 11)
                                            <th>Edit</th>
                                        @endif
                                        <th>Assignment Id</th>
                                        <th>Assignment</th>
                                        <th>Client</th>
                                        <th>Client Code</th>
                                        <th>Period Start</th>
                                        <th>Period End</th>
                                        <th>Deadline</th>
                                        <th>Assigned Status</th>
                                        <th>Assigned Partner</th>
                                        <th>Assignedpartner Code</th>
                                        <th>Other Partner</th>
                                        <th>Otherpartner Code</th>
                                        <th>Team Leader </th>
                                        <th>Teammember</th>
                                        <th>Total Hour</th>

                                    </tr>
                                </thead>
                                <tbody>
                                    @foreach ($assignmentmappingcloseData as $assignmentmappingcloseDatas)
                                        <tr>
                                            @php
                                                if (auth()->user()->role_id == 11) {
                                                    $teamhourteamsclosed = DB::table('assignmentteammappings')
                                                        ->where(
                                                            'assignmentmapping_id',
                                                            $assignmentmappingcloseDatas->id,
                                                        )
                                                        ->select(DB::raw('SUM(teamhour) as teamhourteam'))
                                                        ->first();

                                                    $partnerhourclosed =
                                                        $assignmentmappingcloseDatas->leadpartnerhour +
                                                        $assignmentmappingcloseDatas->otherpartnerhour;

                                                    $totalhourclosed =
                                                        $partnerhourclosed + $teamhourteamsclosed->teamhourteam;
                                                }
                                            @endphp



                                            <td style="display: none;">{{ $assignmentmappingcloseDatas->id }}</td>

                                            @if (auth()->user()->role_id != 15 && Auth::user()->role_id != 11)
                                                <td>
                                                    <a href="{{ url('/assignmentlist/' . $assignmentmappingcloseDatas->assignmentgenerate_id) }}"
                                                        class="btn btn-info-soft btn-sm"><i class="far fa-edit"></i></a>
                                                </td>
                                            @endif
                                            <td> <a
                                                    href="{{ url('/viewassignment/' . $assignmentmappingcloseDatas->assignmentgenerate_id) }}">{{ $assignmentmappingcloseDatas->assignmentgenerate_id }}</a>
                                            </td>
                                            <td>
                                                {{ $assignmentmappingcloseDatas->assignment_name }} @if ($assignmentmappingcloseDatas->assignmentname != null)
                                                    ({{ $assignmentmappingcloseDatas->assignmentname }})
                                                @endif
                                            </td>
                                            <td> {{ $assignmentmappingcloseDatas->client_name }}</td>
                                            <td> {{ $assignmentmappingcloseDatas->client_code }}</td>

                                            <td>
                                                @if ($assignmentmappingcloseDatas->periodstart != null)
                                                    {{ date('d-m-Y', strtotime($assignmentmappingcloseDatas->periodstart)) }}
                                                @endif
                                            </td>

                                            <td>
                                                @if ($assignmentmappingcloseDatas->periodend != null)
                                                    {{ date('d-m-Y', strtotime($assignmentmappingcloseDatas->periodend)) }}
                                                @endif
                                            </td>
                                            <td>
                                                @if ($assignmentmappingcloseDatas->duedate != null)
                                                    {{ date('d-m-Y', strtotime($assignmentmappingcloseDatas->duedate)) }}
                                                @endif
                                            </td>
                                            <td>
                                                @if ($assignmentmappingcloseDatas->status == 1)
                                                    <span class="badge badge-primary">OPEN</span>
                                                @elseif($assignmentmappingcloseDatas->status == 0)
                                                    <span class="badge badge-danger">CLOSED</span>
                                                @endif

                                            </td>
                                            {{-- <td>{{ App\Models\Teammember::select('team_member')->where('id', $assignmentmappingcloseDatas->leadpartner)->first()->team_member ?? '' }}
                                            </td>
                                            <td>{{ App\Models\Teammember::select('team_member')->where('id', $assignmentmappingcloseDatas->otherpartner)->first()->team_member ?? '' }}
                                            </td> --}}
                                            @php
                                                $leadpartnercloseed = App\Models\Teammember::select(
                                                    'team_member',
                                                    'staffcode',
                                                )
                                                    ->where('id', $assignmentmappingcloseDatas->leadpartner)
                                                    ->first();

                                                $otherPartnerclosed = App\Models\Teammember::select(
                                                    'team_member',
                                                    'staffcode',
                                                )
                                                    ->where('id', $assignmentmappingcloseDatas->otherpartner)
                                                    ->first();
                                            @endphp
                                            <td>
                                                {{ $leadpartnercloseed->team_member ?? '' }}
                                            </td>
                                            <td>
                                                @if ($leadpartnercloseed && $leadpartnercloseed->team_member)
                                                    {{ $leadpartnercloseed->staffcode ?? '' }}
                                                @endif
                                            </td>
                                            <td>
                                                {{ $otherPartnerclosed->team_member ?? '' }}
                                            </td>
                                            <td>
                                                @if ($otherPartnerclosed && $otherPartnerclosed->team_member)
                                                    {{ $otherPartnerclosed->staffcode ?? '' }}
                                                @endif
                                            </td>

                                            <td>
                                                @foreach (DB::table('assignmentmappings')->leftjoin('assignmentteammappings', 'assignmentteammappings.assignmentmapping_id', 'assignmentmappings.id')->leftjoin('teammembers', 'teammembers.id', 'assignmentteammappings.teammember_id')->where('assignmentmappings.id', $assignmentmappingcloseDatas->id)->where('assignmentteammappings.type', 0)->get() as $sub)
                                                    {{ $sub->team_member }} ,
                                                @endforeach
                                            </td>
                                            <td>
                                                @foreach (DB::table('assignmentmappings')->leftjoin('assignmentteammappings', 'assignmentteammappings.assignmentmapping_id', 'assignmentmappings.id')->leftjoin('teammembers', 'teammembers.id', 'assignmentteammappings.teammember_id')->where('assignmentmappings.id', $assignmentmappingcloseDatas->id)->where('assignmentteammappings.type', 2)->get() as $sub)
                                                    {{ $sub->team_member }} ,
                                                @endforeach
                                            </td>

                                            @if (auth()->user()->role_id == 11)
                                                <td> {{ $totalhourclosed ?? '0' }}</td>
                                            @elseif (auth()->user()->role_id == 13)
                                                <td>{{ $assignmentmappingcloseDatas->leadpartnerhour ?? ($assignmentmappingcloseDatas->otherpartnerhour ?? 0) }}
                                                </td>
                                            @else
                                                <td>{{ $assignmentmappingcloseDatas->teamhour ?? '0' }} </td>
                                            @endif
                                        </tr>
                                    @endforeach
                                </tbody>
                            </table>
							
							


Controller 222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222
resources\views\backEnd\timesheetrequest\index.blade.php

                                     <table id="examplee" class="display nowrap">
                        <thead>
                            <tr>
                                <th style="display: none;">id</th>
                                <th>Status</th>
                                <th>Date</th>
                                <th>Time</th>
                                <th>Created By</th>
                                <th>Staff Code</th>
                                <th>Approver</th>
                                <th>Approver Code</th>
                                <th>Reason</th>
                                <th>Attachment</th>
                                <th>Reason for Reject</th>
                            </tr>
                        </thead>
                        <tbody>
                            @foreach ($timesheetrequestsDatas as $timesheetrequestsData)
                                <tr>
                                    @php

                                        $permotioncheck = null;
                                        // $datadate = Carbon\Carbon::createFromFormat(
                                        //     'Y-m-d H:i:s',
                                        //     $timesheetrequestsData->created_at,
                                        // );

                                        $datadate = $timesheetrequestsData->created_at
                                            ? Carbon\Carbon::createFromFormat(
                                                'Y-m-d H:i:s',
                                                $timesheetrequestsData->created_at,
                                            )
                                            : null;

                                        $permotiondate = null;

                                        if (auth()->user()->role_id == 11 || auth()->user()->role_id == 13) {
                                            $permotioncheck = DB::table('teamrolehistory')
                                                ->where('teammember_id', $timesheetrequestsData->createdby)
                                                ->first();

                                            if ($permotioncheck) {
                                                $permotiondate = Carbon\Carbon::createFromFormat(
                                                    'Y-m-d H:i:s',
                                                    $permotioncheck->created_at,
                                                );
                                            }
                                        }

                                        $partnerpormotioncheck = DB::table('teamrolehistory')
                                            ->where('teammember_id', $timesheetrequestsData->partner)
                                            ->first();

                                        $partnerpormotiondateformate = $partnerpormotioncheck
                                            ? Carbon\Carbon::createFromFormat(
                                                'Y-m-d H:i:s',
                                                $partnerpormotioncheck->created_at,
                                            )
                                            : null;
                                    @endphp
                                    <td style="display: none;">{{ $timesheetrequestsData->id }}</td>
                                    <td>
                                        @if ($timesheetrequestsData->status == 0)
                                            <span class="badge badge-pill badge-warning">Created</span>
                                        @elseif($timesheetrequestsData->status == 1)
                                            <span class="badge badge-pill badge-success">Approved</span>
                                        @else
                                            <span class="badge badge-pill badge-danger">Rejected</span>
                                        @endif
                                    </td>
                                    {{-- <td>{{ date('d-m-Y', strtotime($timesheetrequestsData->created_at)) }}</td> --}}
                                    <td>{{ date('d-M-Y', strtotime($timesheetrequestsData->created_at)) }}</td>
                                    <td>{{ date('h:m:s', strtotime($timesheetrequestsData->created_at)) }}</td>
                                    <td><a href="{{ url('timesheetrequest/view', $timesheetrequestsData->id) }}">
                                            {{ $timesheetrequestsData->createdbyauth }}</a></td>

                                    <td>
                                        @if (auth()->user()->role_id == 11 || auth()->user()->role_id == 13)
                                            @if ($permotioncheck && $datadate && $datadate->greaterThan($permotiondate))
                                                {{ $permotioncheck->newstaff_code }}
                                            @else
                                                {{ $timesheetrequestsData->staffcodeid }}
                                            @endif
                                        @else
                                            {{ $timesheetrequestsData->newstaff_code ?? $timesheetrequestsData->staffcodeid }}
                                        @endif
                                    </td>
                                    <td>{{ $timesheetrequestsData->team_member }}
                                    </td>
                                    <td>
                                        @if ($partnerpormotioncheck && $datadate && $datadate->greaterThan($partnerpormotiondateformate))
                                            {{ $partnerpormotioncheck->newstaff_code }}
                                        @else
                                            {{ $timesheetrequestsData->staffcode }}
                                        @endif
                                    </td>

                                    <td class="textfixed">
                                        {{ $timesheetrequestsData->reason }}</td>
                                    <td>
                                        @if ($timesheetrequestsData && $timesheetrequestsData->attachment)
                                            <a
                                                href="{{ url('backEnd/image/confirmationfile/' . $timesheetrequestsData->attachment) }}">
                                                {{ $timesheetrequestsData->attachment ?? 'NA' }}
                                            </a>
                                        @else
                                            {{ 'NA' }}
                                        @endif
                                    </td>
                                    <td>{{ $timesheetrequestsData->remark ?? 'NA' }}</td>

                                </tr>
                            @endforeach
                        </tbody>
                    </table>




Controller 222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222
resources\views\backEnd\timesheetrequest\index.blade.php


<script>
    $(document).ready(function() {
        $('#examplee').DataTable({
            dom: 'Bfrtip',
            "order": [
                [0, "desc"]
            ],

            columnDefs: [{
                targets: [0, 1, 3, 4, 5, 6, 7, 8, 9, 10],
                orderable: false
            }],

            buttons: [{
                    extend: 'copyHtml5',
                    exportOptions: {
                        columns: [0, ':visible']
                    }
                },
                {
                    extend: 'excelHtml5',
                    filename: 'Timesheet Request List',
                    // exportOptions: {
                    //     columns: ':visible'
                    // }
                    exportOptions: {
                        columns: ':visible',
                        format: {
                            body: function(data, row, column, node) {
                                if (column === 0) {
                                    var cleanedText = $(data).text().trim();
                                    return cleanedText;
                                }
                                if (column === 1) {
                                    var dateParts = data.split('-');
                                    var monthNumbers = {
                                        'Jan': '01',
                                        'Feb': '02',
                                        'Mar': '03',
                                        'Apr': '04',
                                        'May': '05',
                                        'Jun': '06',
                                        'Jul': '07',
                                        'Aug': '08',
                                        'Sep': '09',
                                        'Oct': '10',
                                        'Nov': '11',
                                        'Dec': '12'
                                    };
                                    var day = dateParts[0];
                                    var month = monthNumbers[dateParts[1]];
                                    var year = dateParts[2];
                                    return day + '-' + month + '-' + year;
                                }
                                if (column === 3) {
                                    var cleanedText = $(data).text().trim();
                                    return cleanedText;
                                }
                                return data; // Return other data unchanged
                            }
                        }
                    }
                },
                {
                    extend: 'pdfHtml5',
                    filename: 'Timesheet Request List',
                    exportOptions: {
                        columns: [0, 1, 2, 5]
                    }
                },
                'colvis'
            ]
        });
    });
</script>






							
Controller 222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222
resources\views\backEnd\applyleave\index.blade.php

  <script>
      $(document).ready(function() {
          $('#examplee').DataTable({
              "pageLength": 10,
              "dom": 'Bfrtip',
              "order": [
                  [0, "desc"]
              ],

              columnDefs: [{
                  targets: [1, 2, 3, 4, 5, 6, 7, 8, 9, 10],
                  orderable: false
              }],

              buttons: [{
                  extend: 'excelHtml5',
                  exportOptions: {
                      columns: ':visible'
                  },
                  text: 'Export to Excel',
                  className: 'btn-excel',
              }, ]
          });

          $('#example1').DataTable({
              "pageLength": 10,
              "dom": 'Bfrtip',
              "order": [
                  [0, "desc"]
              ],

              columnDefs: [{
                  targets: [1, 2, 3, 4, 5, 7],
                  orderable: false
              }],

              buttons: [{
                  extend: 'excelHtml5',
                  exportOptions: {
                      columns: ':visible'
                  },
                  text: 'Export to Excel',
                  className: 'btn-excel',
              }, ]
          });

          $('.btn-excel').hide();
      });
  </script>
  
  
  

Controller 222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222
resources\views\backEnd\applyleave\index.blade.php


                                  <table id="examplee" class="table display table-bordered table-striped table-hover">
                                      <thead>
                                          <tr>
                                              <th class="textfixed">Date of Request</th>
                                              <th>Employee</th>
                                              <th class="textfixed">Staff Code</th>
                                              <th class="textfixed">Leave Type</th>
                                              <th>Approver</th>
                                              <th class="textfixed">Approver Code</th>
                                              <th class="textfixed">Reason for Leave</th>
                                              <th>Leave Period</th>
                                              <th>Days</th>
                                              <th>Status</th>
                                              <th>Action</th>
                                          </tr>
                                      </thead>
                                      <tbody>

                                          @foreach ($myapplyleaveDatas as $applyleaveDatas)
                                              <tr>
                                                  <td>{{ date('d-M-Y', strtotime($applyleaveDatas->created_at)) ?? '' }}
                                                  </td>
                                                  <td class="textfixed"> <a
                                                          href="{{ route('applyleave.show', $applyleaveDatas->id) }}">
                                                          {{ $applyleaveDatas->team_member ?? '' }}</a></td>
                                                  <td>{{ $applyleaveDatas->newstaff_code ?? $applyleaveDatas->staffcode }}
                                                  </td>
                                                  <td class="textfixed">

                                                      {{ $applyleaveDatas->name ?? '' }}<br>
                                                      @if ($applyleaveDatas->type == '0')
                                                          <b>Type :</b> <span>Birthday</span><br>
                                                          <span><b>Birthday Date :
                                                              </b>{{ date(
                                                                  'F d,Y',
                                                                  strtotime(
                                                                      App\Models\Teammember::select('dateofbirth')->where('id', $applyleaveDatas->createdby)->first()->dateofbirth,
                                                                  ),
                                                              ) ?? '' }}</span>
                                                      @elseif($applyleaveDatas->type == '1')
                                                          <span>Religious Festival</span>
                                                      @endif
                                                      @if ($applyleaveDatas->examtype == '0')
                                                          <b>Exam Type :</b> <span>PCC</span>
                                                      @elseif($applyleaveDatas->examtype == '1')
                                                          <b>Exam Type :</b> <span>CA Final</span>
                                                      @elseif($applyleaveDatas->examtype == '2')
                                                          <b>Exam Type :</b> <span>B.Com</span>
                                                      @endif
                                                      @if ($applyleaveDatas->examtype == '3')
                                                          <b>Other :</b>
                                                          <span>{{ $applyleaveDatas->otherexam ?? '' }}</span>
                                                      @endif
                                                  </td>
                                                  <td>{{ App\Models\Teammember::select('team_member')->where('id', $applyleaveDatas->approver)->first()->team_member ?? '' }}

                                                  </td>
                                                  <td>
                                                      {{ App\Models\Teammember::select('team_member', 'staffcode')->where('id', $applyleaveDatas->approver)->first()->staffcode ?? '' }}
                                                  </td>

                                                  <td>{{ $applyleaveDatas->reasonleave ?? '' }} </td>

                                                  <td class="textfixed">
                                                      {{ date('d-M-Y', strtotime($applyleaveDatas->from)) ?? '' }} -
                                                      {{ date('d-M-Y', strtotime($applyleaveDatas->to)) ?? '' }}</td>
                                                  @php
                                                      $to = Carbon\Carbon::createFromFormat(
                                                          'Y-m-d',
                                                          $applyleaveDatas->to ?? '',
                                                      );
                                                      $from = Carbon\Carbon::createFromFormat(
                                                          'Y-m-d',
                                                          $applyleaveDatas->from,
                                                      );
                                                      $diff_in_days = $to->diffInDays($from) + 1;
                                                      $holidaycount = DB::table('holidays')
                                                          ->where('startdate', '>=', $applyleaveDatas->from)
                                                          ->where('enddate', '<=', $applyleaveDatas->to)
                                                          ->count();
                                                  @endphp
                                                  <td>{{ $diff_in_days - $holidaycount ?? '' }}</td>


                                                  <td>
                                                      @if ($applyleaveDatas->status == 0)
                                                          <span class="badge badge-pill badge-warning">Created</span>
                                                      @elseif($applyleaveDatas->status == 1)
                                                          <span class="badge badge-success">Approved</span>
                                                      @elseif($applyleaveDatas->status == 2)
                                                          <span class="badge badge-danger">Rejected</span>
                                                      @endif
                                                  </td>
                                                  <td>

                                                      @php
                                                          $currentDate = now()->format('Y-m-d');
                                                          $lastdate = $applyleaveDatas->to;
                                                      @endphp
                                                      @if ($lastdate >= $currentDate && $applyleaveDatas->status == 1)
                                                          <button class="btn btn-danger" data-toggle="modal"
                                                              style="height: 16px; width: auto; border-radius: 7px; display: flex; align-items: center; justify-content: center;font-size: 11px;"
                                                              data-target="#requestModal{{ $applyleaveDatas->id }}">Request</button>
                                                      @endif
                                                  </td>

                                              </tr>

                                              @if ($applyleaveDatas->leavetype == 11 || $applyleaveDatas->leavetype == 9)
                                                  <div class="modal fade" id="requestModal{{ $applyleaveDatas->id }}"
                                                      tabindex="-1" role="dialog" aria-labelledby="requestModalLabel"
                                                      aria-hidden="true">
                                                      <div class="modal-dialog" role="document">
                                                          <form method="post" action="{{ route('applyleaverequest') }}"
                                                              enctype="multipart/form-data">
                                                              @csrf
                                                              <div class="modal-content">
                                                                  <div class="modal-header">

                                                                      <h5 class="modal-title" id="requestModalLabel">Enter
                                                                          Request Details</h5>
                                                                      <button type="button" class="close"
                                                                          data-dismiss="modal" aria-label="Close">
                                                                          <span aria-hidden="true">&times;</span>
                                                                      </button>
                                                                  </div>
                                                                  <div class="modal-body">
                                                                      @if ($errors->any())
                                                                          <div class="">
                                                                              <ul>
                                                                                  @foreach ($errors->all() as $error)
                                                                                      <li class="text-danger">
                                                                                          {{ $error }}</li>
                                                                                  @endforeach
                                                                              </ul>
                                                                          </div>
                                                                      @endif

                                                                      <input type="hidden" name="applyleaveid"
                                                                          value="{{ $applyleaveDatas->id }}"
                                                                          class="form-control" placeholder="">
                                                                      <input type="hidden" name="createdby"
                                                                          value="{{ $applyleaveDatas->createdby }}"
                                                                          class="form-control" placeholder="">
                                                                      <input type="hidden" name="approver"
                                                                          value="{{ $applyleaveDatas->approver }}"
                                                                          class="form-control" placeholder="">
                                                                      <input type="hidden" name="status"
                                                                          value="{{ $applyleaveDatas->status }}"
                                                                          class="form-control" placeholder="">
                                                                      <input type="hidden" name="leavetype"
                                                                          value="{{ $applyleaveDatas->leavetype }}"
                                                                          class="form-control" placeholder="">
                                                                      <input type="hidden" name="from"
                                                                          value="{{ $applyleaveDatas->from }}"
                                                                          class="form-control" placeholder=""
                                                                          id="startdateleave">
                                                                      <input type="hidden" name="to"
                                                                          value="{{ $applyleaveDatas->to }}"
                                                                          class="form-control" placeholder=""
                                                                          id="enddateleave">

                                                                      <!-- Input fields for request details here -->
                                                                      <label for="">Reason:*</label>

                                                                      <input type="text" name="reason"
                                                                          class="form-control" placeholder="Enter Reason"
                                                                          required>
                                                                      <label for="">Select Date:*</label>
                                                                      <input type="date" name="date"
                                                                          class="form-control yearValidate" maxlength="10"
                                                                          required>
                                                                      {{-- validation for year --}}

                                                                      <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>

                                                                      <script>
                                                                          $(document).ready(function() {
                                                                              $('.yearValidate').on('change', function() {
                                                                                  var leaveDate = $('.yearValidate');
                                                                                  //   alert(leaveDate);
                                                                                  var leaveDateValue = $('.yearValidate').val();
                                                                                  //   console.log(leaveDateValue);
                                                                                  var leaveDateGet = new Date(leaveDateValue);
                                                                                  var leaveyear = leaveDateGet.getFullYear();
                                                                                  // console.log(startyear);
                                                                                  var leaveyearLength = leaveyear.toString().length;
                                                                                  if (leaveyearLength > 4) {
                                                                                      alert('Enter four digits for the year');
                                                                                      leaveDate.val('');
                                                                                  }
                                                                              });
                                                                          });
                                                                      </script>

                                                                  </div>
                                                                  <div class="modal-footer">
                                                                      <button type="button" class="btn btn-secondary"
                                                                          data-dismiss="modal">Close</button>
                                                                      <button type="submit"
                                                                          class="btn btn-primary">Submit</button>
                                                                  </div>
                                                              </div>
                                                          </form>
                                                      </div>
                                                  </div>
                                              @endif
                                          @endforeach
                                      </tbody>
                                  </table>






Controller 222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222
resources\views\backEnd\applyleave\index.blade.php

  <script>
      $(document).ready(function() {
          //   $('#examplee').DataTable({
          //       "pageLength": 10,
          //       "dom": 'Bfrtip',
          //       "order": [
          //           [0, "desc"]
          //       ],

          //       columnDefs: [{
          //           targets: [1, 2, 3, 4, 5, 6, 7, 8, 9, 10],
          //           orderable: false
          //       }],

          //       buttons: [{
          //           extend: 'excelHtml5',
          //           exportOptions: {
          //               columns: ':visible'
          //           },
          //           text: 'Export to Excel',
          //           className: 'btn-excel',
          //       }, ]
          //   });

          $('#examplee').DataTable({
              "pageLength": 10,
              "dom": 'Bfrtip',
              "order": [
                  [0, "desc"]
              ],

              columnDefs: [{
                  targets: [1, 2, 3, 4, 5, 6, 7, 8, 9, 10],
                  orderable: false
              }],

              buttons: [{
                  extend: 'excelHtml5',
                  exportOptions: {
                      columns: ':visible',
                      format: {
                          body: function(data, row, column, node) {
                              // it should be column number 2
                              if (column === 0) {
                                  // If the data is a date, extract the date without HTML tags
                                  var cleanedText = $(data).text().trim();
                                  var dateParts = cleanedText.split(
                                      '-');
                                  // Assuming the date format is yyyy-mm-dd
                                  if (dateParts.length === 3) {
                                      return dateParts[2] + '-' + dateParts[1] + '-' +
                                          dateParts[0];
                                  }
                              }
                              if (column === 1) {
                                  var cleanedText = $(data).text().trim();
                                  return cleanedText;
                              }
                              if (column === 9) {
                                  var cleanedText = $(data).text().trim();
                                  return cleanedText;
                              }
                              return data;
                          }
                      }
                  },
                  text: 'Export to Excel',
                  className: 'btn-excel',
              }, ]
          });

          $('#example1').DataTable({
              "pageLength": 10,
              "dom": 'Bfrtip',
              "order": [
                  [0, "desc"]
              ],

              columnDefs: [{
                  targets: [1, 2, 3, 4, 5, 7],
                  orderable: false
              }],

              buttons: [{
                  extend: 'excelHtml5',
                  exportOptions: {
                      columns: ':visible'
                  },
                  text: 'Export to Excel',
                  className: 'btn-excel',
              }, ]
          });

          $('.btn-excel').hide();
      });
  </script>




Controller 222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222
resources\views\backEnd\applyleave\index.blade.php


                                  <table id="examplee" class="table display table-bordered table-striped table-hover">
                                      <thead>
                                          <tr>
                                              <th class="textfixed">Date of Request</th>
                                              <th>Employee</th>
                                              <th class="textfixed">Staff Code</th>
                                              <th class="textfixed">Leave Type</th>
                                              <th>Approver</th>
                                              <th class="textfixed">Approver Code</th>
                                              <th class="textfixed">Reason for Leave</th>
                                              <th>Leave Period</th>
                                              <th>Days</th>
                                              <th>Status</th>
                                              <th>Action</th>
                                          </tr>
                                      </thead>
                                      <tbody>

                                          @foreach ($myapplyleaveDatas as $applyleaveDatas)
                                              <tr>
                                                  {{-- <td>{{ date('d-m-Y', strtotime($applyleaveDatas->created_at)) ?? '' }}
                                                  </td> --}}
                                                  <td>
                                                      <span style="display: none;">
                                                          {{ date('Y-m-d', strtotime($applyleaveDatas->created_at)) }}
                                                      </span>
                                                      {{ date('d-m-Y', strtotime($applyleaveDatas->created_at)) }}
                                                  </td>
                                                  <td class="textfixed"> <a
                                                          href="{{ route('applyleave.show', $applyleaveDatas->id) }}">
                                                          {{ $applyleaveDatas->team_member ?? '' }}</a></td>
                                                  <td>{{ $applyleaveDatas->newstaff_code ?? $applyleaveDatas->staffcode }}
                                                  </td>
                                                  <td class="textfixed">
                                                      {{ $applyleaveDatas->name ?? '' }}
                                                      @if ($applyleaveDatas->type == '0')
                                                          <b>Type :</b> <span>Birthday</span>
                                                          <span><b>Birthday Date :
                                                              </b>{{ date(
                                                                  'F d,Y',
                                                                  strtotime(
                                                                      App\Models\Teammember::select('dateofbirth')->where('id', $applyleaveDatas->createdby)->first()->dateofbirth,
                                                                  ),
                                                              ) ?? '' }}</span>
                                                      @elseif($applyleaveDatas->type == '1')
                                                          <span>Religious Festival</span>
                                                      @endif
                                                      @if ($applyleaveDatas->examtype == '0')
                                                          <b>Exam Type :</b> <span>PCC</span>
                                                      @elseif($applyleaveDatas->examtype == '1')
                                                          <b>Exam Type :</b> <span>CA Final</span>
                                                      @elseif($applyleaveDatas->examtype == '2')
                                                          <b>Exam Type :</b> <span>B.Com</span>
                                                      @endif
                                                      @if ($applyleaveDatas->examtype == '3')
                                                          <b>Other :</b>
                                                          <span>{{ $applyleaveDatas->otherexam ?? '' }}</span>
                                                      @endif
                                                  </td>
                                                  <td>{{ App\Models\Teammember::select('team_member')->where('id', $applyleaveDatas->approver)->first()->team_member ?? '' }}

                                                  </td>
                                                  <td>
                                                      {{ App\Models\Teammember::select('team_member', 'staffcode')->where('id', $applyleaveDatas->approver)->first()->staffcode ?? '' }}
                                                  </td>

                                                  <td>{{ $applyleaveDatas->reasonleave ?? '' }} </td>

                                                  <td class="textfixed">
                                                      {{ date('d-m-Y', strtotime($applyleaveDatas->from)) ?? '' }} -
                                                      {{ date('d-m-Y', strtotime($applyleaveDatas->to)) ?? '' }}</td>
                                                  @php
                                                      $to = Carbon\Carbon::createFromFormat(
                                                          'Y-m-d',
                                                          $applyleaveDatas->to ?? '',
                                                      );
                                                      $from = Carbon\Carbon::createFromFormat(
                                                          'Y-m-d',
                                                          $applyleaveDatas->from,
                                                      );
                                                      $diff_in_days = $to->diffInDays($from) + 1;
                                                      $holidaycount = DB::table('holidays')
                                                          ->where('startdate', '>=', $applyleaveDatas->from)
                                                          ->where('enddate', '<=', $applyleaveDatas->to)
                                                          ->count();
                                                  @endphp
                                                  <td>{{ $diff_in_days - $holidaycount ?? '' }}</td>


                                                  <td>
                                                      @if ($applyleaveDatas->status == 0)
                                                          <span class="badge badge-pill badge-warning">Created</span>
                                                      @elseif($applyleaveDatas->status == 1)
                                                          <span class="badge badge-success">Approved</span>
                                                      @elseif($applyleaveDatas->status == 2)
                                                          <span class="badge badge-danger">Rejected</span>
                                                      @endif
                                                  </td>
                                                  <td>

                                                      @php
                                                          $currentDate = now()->format('Y-m-d');
                                                          $lastdate = $applyleaveDatas->to;
                                                      @endphp
                                                      @if ($lastdate >= $currentDate && $applyleaveDatas->status == 1)
                                                          <button class="btn btn-danger" data-toggle="modal"
                                                              style="height: 16px; width: auto; border-radius: 7px; display: flex; align-items: center; justify-content: center;font-size: 11px;"
                                                              data-target="#requestModal{{ $applyleaveDatas->id }}">Request</button>
                                                      @endif
                                                  </td>

                                              </tr>

                                              @if ($applyleaveDatas->leavetype == 11 || $applyleaveDatas->leavetype == 9)
                                                  <div class="modal fade" id="requestModal{{ $applyleaveDatas->id }}"
                                                      tabindex="-1" role="dialog" aria-labelledby="requestModalLabel"
                                                      aria-hidden="true">
                                                      <div class="modal-dialog" role="document">
                                                          <form method="post" action="{{ route('applyleaverequest') }}"
                                                              enctype="multipart/form-data">
                                                              @csrf
                                                              <div class="modal-content">
                                                                  <div class="modal-header">

                                                                      <h5 class="modal-title" id="requestModalLabel">Enter
                                                                          Request Details</h5>
                                                                      <button type="button" class="close"
                                                                          data-dismiss="modal" aria-label="Close">
                                                                          <span aria-hidden="true">&times;</span>
                                                                      </button>
                                                                  </div>
                                                                  <div class="modal-body">
                                                                      @if ($errors->any())
                                                                          <div class="">
                                                                              <ul>
                                                                                  @foreach ($errors->all() as $error)
                                                                                      <li class="text-danger">
                                                                                          {{ $error }}</li>
                                                                                  @endforeach
                                                                              </ul>
                                                                          </div>
                                                                      @endif

                                                                      <input type="hidden" name="applyleaveid"
                                                                          value="{{ $applyleaveDatas->id }}"
                                                                          class="form-control" placeholder="">
                                                                      <input type="hidden" name="createdby"
                                                                          value="{{ $applyleaveDatas->createdby }}"
                                                                          class="form-control" placeholder="">
                                                                      <input type="hidden" name="approver"
                                                                          value="{{ $applyleaveDatas->approver }}"
                                                                          class="form-control" placeholder="">
                                                                      <input type="hidden" name="status"
                                                                          value="{{ $applyleaveDatas->status }}"
                                                                          class="form-control" placeholder="">
                                                                      <input type="hidden" name="leavetype"
                                                                          value="{{ $applyleaveDatas->leavetype }}"
                                                                          class="form-control" placeholder="">
                                                                      <input type="hidden" name="from"
                                                                          value="{{ $applyleaveDatas->from }}"
                                                                          class="form-control" placeholder=""
                                                                          id="startdateleave">
                                                                      <input type="hidden" name="to"
                                                                          value="{{ $applyleaveDatas->to }}"
                                                                          class="form-control" placeholder=""
                                                                          id="enddateleave">

                                                                      <!-- Input fields for request details here -->
                                                                      <label for="">Reason:*</label>

                                                                      <input type="text" name="reason"
                                                                          class="form-control" placeholder="Enter Reason"
                                                                          required>
                                                                      <label for="">Select Date:*</label>
                                                                      <input type="date" name="date"
                                                                          class="form-control yearValidate" maxlength="10"
                                                                          required>
                                                                      {{-- validation for year --}}

                                                                      <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>

                                                                      <script>
                                                                          $(document).ready(function() {
                                                                              $('.yearValidate').on('change', function() {
                                                                                  var leaveDate = $('.yearValidate');
                                                                                  //   alert(leaveDate);
                                                                                  var leaveDateValue = $('.yearValidate').val();
                                                                                  //   console.log(leaveDateValue);
                                                                                  var leaveDateGet = new Date(leaveDateValue);
                                                                                  var leaveyear = leaveDateGet.getFullYear();
                                                                                  // console.log(startyear);
                                                                                  var leaveyearLength = leaveyear.toString().length;
                                                                                  if (leaveyearLength > 4) {
                                                                                      alert('Enter four digits for the year');
                                                                                      leaveDate.val('');
                                                                                  }
                                                                              });
                                                                          });
                                                                      </script>

                                                                  </div>
                                                                  <div class="modal-footer">
                                                                      <button type="button" class="btn btn-secondary"
                                                                          data-dismiss="modal">Close</button>
                                                                      <button type="submit"
                                                                          class="btn btn-primary">Submit</button>
                                                                  </div>
                                                              </div>
                                                          </form>
                                                      </div>
                                                  </div>
                                              @endif
                                          @endforeach
                                      </tbody>
                                  </table>




Controller 222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222
resources\views\backEnd\timesheetrequest\index.blade.php	

<script>
    $(document).ready(function() {
        $('#examplee').DataTable({
            dom: 'Bfrtip',
            "order": [
                [0, "desc"]
            ],

            columnDefs: [{
                targets: [0, 1, 3, 4, 5, 6, 7, 8, 9, 10],
                orderable: false
            }],

            buttons: [{
                    extend: 'copyHtml5',
                    exportOptions: {
                        columns: [0, ':visible']
                    }
                },
                {
                    extend: 'excelHtml5',
                    filename: 'Timesheet Request List',
                    exportOptions: {
                        columns: ':visible'
                    }
                },
                {
                    extend: 'pdfHtml5',
                    filename: 'Timesheet Request List',
                    exportOptions: {
                        columns: [0, 1, 2, 5]
                    }
                },
                'colvis'
            ]
        });
    });
</script>						







							
Controller 222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222
resources\views\backEnd\timesheetrequest\index.blade.php

                            @foreach ($timesheetrequestsDatas as $timesheetrequestsData)
                                <tr>
                                    @php

                                        $permotioncheck = null;
                                        // $datadate = Carbon\Carbon::createFromFormat(
                                        //     'Y-m-d H:i:s',
                                        //     $timesheetrequestsData->created_at,
                                        // );

                                        $datadate = $timesheetrequestsData->created_at
                                            ? Carbon\Carbon::createFromFormat(
                                                'Y-m-d H:i:s',
                                                $timesheetrequestsData->created_at,
                                            )
                                            : null;

                                        $permotiondate = null;

                                        if (auth()->user()->role_id == 11 || auth()->user()->role_id == 13) {
                                            $permotioncheck = DB::table('teamrolehistory')
                                                ->where('teammember_id', $timesheetrequestsData->createdby)
                                                ->first();

                                            if ($permotioncheck) {
                                                $permotiondate = Carbon\Carbon::createFromFormat(
                                                    'Y-m-d H:i:s',
                                                    $permotioncheck->created_at,
                                                );
                                            }
                                        }

                                        $partnerpormotioncheck = DB::table('teamrolehistory')
                                            ->where('teammember_id', $timesheetrequestsData->partner)
                                            ->first();

                                        $partnerpormotiondateformate = $partnerpormotioncheck
                                            ? Carbon\Carbon::createFromFormat(
                                                'Y-m-d H:i:s',
                                                $partnerpormotioncheck->created_at,
                                            )
                                            : null;
                                    @endphp
                                    <td style="display: none;">{{ $timesheetrequestsData->id }}</td>
                                    <td>
                                        @if ($timesheetrequestsData->status == 0)
                                            <span class="badge badge-pill badge-warning">Created</span>
                                        @elseif($timesheetrequestsData->status == 1)
                                            <span class="badge badge-pill badge-success">Approved</span>
                                        @else
                                            <span class="badge badge-pill badge-danger">Rejected</span>
                                        @endif
                                    </td>
                                    {{-- <td>{{ date('d-m-Y', strtotime($timesheetrequestsData->created_at)) }}</td> --}}
                                    <td>{{ date('d-m-Y', strtotime($timesheetrequestsData->created_at)) }}</td>
                                    <td>{{ date('h:m:s', strtotime($timesheetrequestsData->created_at)) }}</td>
                                    <td><a href="{{ url('timesheetrequest/view', $timesheetrequestsData->id) }}">
                                            {{ $timesheetrequestsData->createdbyauth }}</a></td>

                                    <td>
                                        @if (auth()->user()->role_id == 11 || auth()->user()->role_id == 13)
                                            @if ($permotioncheck && $datadate && $datadate->greaterThan($permotiondate))
                                                {{ $permotioncheck->newstaff_code }}
                                            @else
                                                {{ $timesheetrequestsData->staffcodeid }}
                                            @endif
                                        @else
                                            {{ $timesheetrequestsData->newstaff_code ?? $timesheetrequestsData->staffcodeid }}
                                        @endif
                                    </td>
                                    <td>{{ $timesheetrequestsData->team_member }}
                                    </td>
                                    <td>
                                        @if ($partnerpormotioncheck && $datadate && $datadate->greaterThan($partnerpormotiondateformate))
                                            {{ $partnerpormotioncheck->newstaff_code }}
                                        @else
                                            {{ $timesheetrequestsData->staffcode }}
                                        @endif
                                    </td>

                                    <td class="textfixed">
                                        {{ $timesheetrequestsData->reason }}</td>
                                    <td>
                                        @if ($timesheetrequestsData && $timesheetrequestsData->attachment)
                                            <a
                                                href="{{ url('backEnd/image/confirmationfile/' . $timesheetrequestsData->attachment) }}">
                                                {{ $timesheetrequestsData->attachment ?? 'NA' }}
                                            </a>
                                        @else
                                            {{ 'NA' }}
                                        @endif
                                    </td>
                                    <td>{{ $timesheetrequestsData->remark ?? 'NA' }}</td>

                                </tr>
                            @endforeach
							
							



Controller 222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222
resources\views\backEnd\notification\index.blade.php

                            @foreach ($notificationDatas as $notificationData)
                                <tr>
                                    <td style="display: none;">{{ $notificationData->id }}</td>
                                    <td>
                                        <a href="{{ url('/notification/' . $notificationData->id) }}"
                                            style="color: {{ $notificationData->readstatus == 1 ? 'Black' : 'red' }}">
                                            {{ $notificationData->title }}
                                        </a>
                                    </td>
                                    <td>{{ date('d-m-Y', strtotime($notificationData->created_at)) }}</td>
                                    @if (Auth::user()->role_id == 18 || Auth::user()->role_id == 11)
                                        <td>
                                            @if ($notificationData->targettype == 1)
                                                <span>Individual</span>
                                            @elseif($notificationData->targettype == 2)
                                                <span>All Member</span>
                                            @else
                                                <span>Partner</span>
                                            @endif
                                        </td>
                                        <!--  <td>
                                                                     
                                                                            <form action="{{ route('notification.destroy', $notificationData->id) }}" method="POST">
                                                                        <input type="hidden" name="_method" value="DELETE">
                                                                        <input type="hidden" name="_token" value="{{ csrf_token() }}">
                                                                        <button  onclick="return confirm('Are you sure you want to delete this item?');" class="btn ripple btn-danger text-white btn-icon"><i class="fa fa-trash"></i></button>
                                                                    </form>
                                                                        </td>-->
                                    @endif

                                </tr>
                            @endforeach
							




Controller 222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222
resources\views\backEnd\holiday\index.blade.php
	
                            @foreach ($holidayDatas as $holidayDatas)
                                <tr>
                                    <td style="display: none;">{{ $holidayDatas->id }}</td>
                                    <td>
                                        @if (Auth::user()->role_id == 18 || Auth::user()->role_id == 11)
                                            <a href="{{ route('holiday.edit', $holidayDatas->id) }}">
                                                {{ $holidayDatas->holidayname }}</a>
                                        @else
                                            {{ $holidayDatas->holidayname }}
                                        @endif
                                    </td>
                                    {{-- <td>{{ date('d-m-Y', strtotime($holidayDatas->startdate)) }}</td> --}}
                                    <td>
                                        <span style="display: none;">
                                            {{ date('Y-m-d', strtotime($holidayDatas->startdate)) }}
                                        </span>
                                        {{ date('d-m-Y', strtotime($holidayDatas->startdate)) }}
                                    </td>

                                    @if (Auth::user()->role_id == 18)
                                        <td> <a href="{{ url('holiday/delete', $holidayDatas->id) }}"
                                                class="btn btn-info-soft btn-sm"><i class="fa fa-trash"></i></a>
                                        </td>
                                    @endif

                                </tr>
                            @endforeach
							



Controller 222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222
resources\views\backEnd\notification\index.blade.php

                            @foreach ($notificationDatas as $notificationData)
                                <tr>
                                    <td style="display: none;">{{ $notificationData->id }}</td>
                                    <td>
                                        <a href="{{ url('/notification/' . $notificationData->id) }}"
                                            style="color: {{ $notificationData->readstatus == 1 ? 'Black' : 'red' }}">
                                            {{ $notificationData->title }}
                                        </a>
                                    </td>
                                    {{-- <td>{{ date('d-m-Y', strtotime($notificationData->created_at)) }}</td> --}}
                                    <td>
                                        <span style="display: none;">
                                            {{ date('Y-m-d', strtotime($notificationData->created_at)) }}
                                        </span>
                                        {{ date('d-m-Y', strtotime($notificationData->created_at)) }}
                                    </td>
                                    @if (Auth::user()->role_id == 18 || Auth::user()->role_id == 11)
                                        <td>
                                            @if ($notificationData->targettype == 1)
                                                <span>Individual</span>
                                            @elseif($notificationData->targettype == 2)
                                                <span>All Member</span>
                                            @else
                                                <span>Partner</span>
                                            @endif
                                        </td>
                                        <!--  <td>
                                                                                         
                                                                                                <form action="{{ route('notification.destroy', $notificationData->id) }}" method="POST">
                                                                                            <input type="hidden" name="_method" value="DELETE">
                                                                                            <input type="hidden" name="_token" value="{{ csrf_token() }}">
                                                                                            <button  onclick="return confirm('Are you sure you want to delete this item?');" class="btn ripple btn-danger text-white btn-icon"><i class="fa fa-trash"></i></button>
                                                                                        </form>
                                                                                            </td>-->
                                    @endif

                                </tr>
                            @endforeach
							



Controller 222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222
resources\views\backEnd\teammember\allindex.blade.php
	
                    <table id="examplee" class="table display table-bordered table-striped table-hover">
                        <thead>
                            <tr>
                                <th>Team Member Name</th>
                                <th>Team Code</th>
                                <th>Team Role</th>
                                <th>Mobile No</th>
                                <th>Email</th>
                            </tr>
                        </thead>
                        <tbody>
                            @foreach ($teammemberDatas as $teammemberData)
                                <tr>
                                    <td>
                                        {{ $teammemberData->team_member }}
                                    </td>
                                    <td>
                                        {{ $teammemberData->newstaff_code ?? ($teammemberData->staffcode ?? '') }}
                                    </td>
                                    <td>{{ $teammemberData->role->rolename ?? '' }}</td>

                                    <td>{{ $teammemberData->mobile_no }}</td>

                                    <td><a
                                            href="mailto:{{ $teammemberData->emailid }}">{{ $teammemberData->emailid ?? '' }}</a>
                                    </td>
                                </tr>
                            @endforeach
                        </tbody>
                    </table>	







							
Controller 222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222
resources\views\backEnd\teammember\allindex.blade.php

<script>
    $(document).ready(function() {
        $('#examplee').DataTable({
            @if (Auth::user()->role_id == 11 || Auth::user()->role_id == 13)
                // 'l' for the length menu
                dom: 'lBfrtip',

                columnDefs: [{
                    targets: [1, 2, 3, 4],
                    orderable: false
                }],
                buttons: [{
                        extend: 'excelHtml5',
                        filename: 'Active Team Report',
                        filename: 'Team List',
                    },
                    'colvis'
                ]
            @else
                columnDefs: [{
                    targets: [1, 2, 3, 4],
                    orderable: false
                }],
                buttons: []
            @endif
        });
    });
</script>


Controller 222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222
resources\views\backEnd\timesheet\index.blade.php


 <table id="examplee" class="display nowrap">
                            <thead>

                                <tr>
                                    <th style="display: none;">id</th>
                                    <!--	@if (
                                        (now()->isSaturday() && now()->hour >= 18) ||
                                            now()->isSunday() ||
                                            now()->isMonday() ||
                                            (now()->isTuesday() && now()->hour <= 18))
    <th><button type="submit"
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            onclick="return confirm('Are you sure you want to submit this item?');"
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                             formaction="timesheetsubmits" class="btn btn-danger-soft btn-sm">Submit</button>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                             <input type="checkbox" id="chkAll">
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           <i class="os-icon os-icon-trash"></i></th>
    @endif -->
                                    <th>Status</th>
                                    <th>Date</th>
                                    <th>Day</th>
                                    <th>Client Name</th>
                                    <th>Client Code</th>
                                    <th>Assignment Name</th>
                                    <th>Assignment Id</th>
                                    <th>Work Item</th>
                                    <th>Location</th>
                                    <th>Partner</th>
                                    <th>Partner Code</th>
                                    <th>Hour</th>
                                    <th>Total Hour</th>
                                    <th>Action</th>

                                </tr>
                            </thead>
                            <tbody>
                                @foreach ($timesheetData as $timesheetDatas)
                                    <tr>
                                        @php

                                            $timeid = DB::table('timesheetusers')
                                                ->where('timesheetusers.id', $timesheetDatas->id)
                                                ->first();

                                            // $client_id = DB::table('timesheetusers')
                                            //     ->leftjoin('clients', 'clients.id', 'timesheetusers.client_id')
                                            //     ->leftjoin(
                                            //         'assignmentbudgetings',
                                            //         'assignmentbudgetings.assignment_id',
                                            //         'timesheetusers.assignment_id',
                                            //     )
                                            //     ->leftjoin(
                                            //         'assignments',
                                            //         'assignments.id',
                                            //         'timesheetusers.assignment_id',
                                            //     )
                                            //     ->leftjoin('teammembers', 'teammembers.id', 'timesheetusers.partner')
                                            //     ->leftJoin('teamrolehistory', function ($join) {
                                            //         $join
                                            //             ->on('teamrolehistory.teammember_id', '=', 'teammembers.id')
                                            //             ->on(
                                            //                 'teamrolehistory.created_at',
                                            //                 '<',
                                            //                 'timesheetusers.created_at',
                                            //             );
                                            //     })
                                            //     ->where('timesheetusers.id', $timesheetDatas->id)
                                            //     ->select(
                                            //         'clients.client_name',
                                            //         'clients.client_code',
                                            //         'timesheetusers.hour',
                                            //         'timesheetusers.location',
                                            //         'timesheetusers.status',
                                            //         'assignments.assignment_name',
                                            //         'billable_status',
                                            //         'workitem',
                                            //         'teammembers.team_member',
                                            //         'teammembers.staffcode',
                                            //         'teamrolehistory.newstaff_code',
                                            //         'assignmentbudgetings.assignmentname',
                                            //         'assignmentbudgetings.assignmentgenerate_id',
                                            //     )
                                            //     ->first();

                                            $client_id = DB::table('timesheetusers')
                                                ->leftjoin('clients', 'clients.id', 'timesheetusers.client_id')
                                                ->leftjoin(
                                                    'assignmentbudgetings',
                                                    'assignmentbudgetings.assignment_id',
                                                    'timesheetusers.assignment_id',
                                                )
                                                ->leftjoin(
                                                    'assignments',
                                                    'assignments.id',
                                                    'timesheetusers.assignment_id',
                                                )
                                                ->leftjoin('teammembers', 'teammembers.id', 'timesheetusers.partner')
                                                ->where('timesheetusers.id', $timesheetDatas->id)
                                                ->select(
                                                    'clients.client_name',
                                                    'clients.client_code',
                                                    'timesheetusers.hour',
                                                    'timesheetusers.location',
                                                    'timesheetusers.status',
                                                    'assignments.assignment_name',
                                                    'billable_status',
                                                    'workitem',
                                                    'teammembers.team_member',
                                                    'teammembers.staffcode',
                                                    'assignmentbudgetings.assignmentname',
                                                )
                                                ->first();

                                            $permotioncheck = null;
                                            $datadate = $timesheetDatas->assignmentcreated
                                                ? Carbon\Carbon::createFromFormat(
                                                    'Y-m-d H:i:s',
                                                    $timesheetDatas->assignmentcreated,
                                                )
                                                : null;
                                            $permotiondate = null;

                                            if (
                                                auth()->user()->role_id == 13 ||
                                                auth()->user()->role_id == 11 ||
                                                auth()->user()->role_id == 14
                                            ) {
                                                $permotioncheck = DB::table('teamrolehistory')
                                                    ->where('teammember_id', auth()->user()->teammember_id)
                                                    ->first();

                                                if ($permotioncheck) {
                                                    $permotiondate = Carbon\Carbon::createFromFormat(
                                                        'Y-m-d H:i:s',
                                                        $permotioncheck->created_at,
                                                    );
                                                }
                                            }

                                            $total = DB::table('timesheetusers')

                                                ->where('timesheetusers.timesheetid', $timesheetDatas->timesheetid)
                                                ->sum('hour');
                                            //	dd($total);
                                            $dates = date('l', strtotime($timesheetDatas->date));

                                        @endphp
                                        <td style="display: none;">{{ $timesheetDatas->id }}</td>
                                        <td>
                                            @if ($client_id->status == 0)
                                                <span class="badge badge-pill badge-warning">saved</span>
                                            @else
                                                <span class="badge badge-pill badge-danger">submit</span>
                                            @endif
                                        </td>

                                        @php

                                            $date = $timesheetDatas->date;

                                            $leaves = DB::table('applyleaves')
                                                ->where('applyleaves.createdby', auth()->user()->teammember_id)
                                                ->where('status', '!=', 2)
                                                ->select('applyleaves.from', 'applyleaves.to')
                                                ->get();

                                            $leavesWithinRange = $leaves->filter(function ($leave) use ($date) {
                                                return $leave->from <= $date && $leave->to >= $date;
                                            });

                                            //dd($leavesWithinRange);

                                        @endphp

                                        <td> <span style="display: none;">
                                                {{ date('Y-m-d', strtotime($timesheetDatas->date)) }}</span>{{ date('d-m-Y', strtotime($timesheetDatas->date)) }}
                                        </td>

                                        <td>
                                            @if ($timesheetDatas->date != null)
                                                {{ $dates ?? '' }}
                                            @endif
                                        </td>


                                        <td>
                                            {{ $client_id->client_name ?? '' }}
                                            @if (count((array) $client_id->client_name) > 1)
                                                ,
                                            @endif
                                        </td>
                                        <td>
                                            {{ $client_id->client_code ?? '' }}
                                            @if (count((array) $client_id->client_code) > 1)
                                                ,
                                            @endif
                                        </td>

                                        <td>
                                            {{ $client_id->assignment_name ?? '' }}
                                            @if ($timesheetDatas->assignmentname != null)
                                                ({{ $timesheetDatas->assignmentname ?? '' }})
                                            @endif
                                            @if (count((array) $client_id->assignment_name) > 1)
                                                ,
                                            @endif
                                        </td>
                                        <td>
                                            {{ $timesheetDatas->assignmentgenerate_id ?? '' }}
                                        </td>
                                        <td>
                                            {{ $client_id->workitem ?? '' }}
                                            @if (count((array) $client_id->workitem) > 1)
                                                ,
                                            @endif
                                        </td>

                                        <td>
                                            {{ $client_id->location ?? '' }}
                                            @if (count((array) $client_id->location) > 1)
                                                ,
                                            @endif
                                        </td>

                                        {{-- <td>
                                        {{ $client_id->team_member ?? '' }} (
                                        {{ $client_id->newstaff_code ?? ($client_id->staffcode ?? '') }})
                                        @if (count((array) $client_id->team_member) > 1)
                                            ,
                                        @endif
                                    </td> --}}





                                        <td>
                                            {{ $client_id->team_member ?? '' }}
                                            @if (count((array) $client_id->team_member) > 1)
                                                ,
                                            @endif
                                        </td>

                                        <td>
                                            @if ($permotioncheck && $datadate && $datadate->greaterThan($permotiondate))
                                                {{ $permotioncheck->newstaff_code }}
                                            @else
                                                {{ $client_id->staffcode ?? '' }}
                                            @endif
                                            @if (count((array) $client_id->team_member) > 1)
                                                ,
                                            @endif
                                        </td>
                                        <td>
                                            {{ $client_id->hour ?? '' }}
                                            @if (count((array) $client_id->hour) > 1)
                                                ,
                                            @endif
                                        </td>
                                        <td>{{ $total }}</td>
                                        <td>
                                            @if ($client_id->status == 0)
                                                @if ($leavesWithinRange->isEmpty())
                                                    <a href="{{ url('/timesheet/destroy/' . $timesheetDatas->timesheetid) }}"
                                                        onclick="return confirm('Are you sure you want to delete this item?');"
                                                        class="btn btn-danger-soft btn-sm"><i
                                                            class="far fa-trash-alt"></i></a>
                                                @endif
                                            @else
                                                delete blocked
                                            @endif
                                        </td>
                                    </tr>
                                @endforeach
                            </tbody>
                        </table>





Controller 222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222
resources\views\backEnd\timesheet\index.blade.php


<script>
    $(document).ready(function() {
        $('#examplee').DataTable({
            "pageLength": 14,
            dom: 'Bfrtip',
            "order": [
                // [2, "desc"]
            ],

            columnDefs: [{
                targets: [0, 1, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14],
                orderable: false
            }],

            buttons: [{
                    extend: 'excelHtml5',
                    filename: 'Timesheet Save',
                    // remove extra date from column
                    exportOptions: {
                        columns: ':visible',
                        format: {
                            body: function(data, row, column, node) {
                                if (column === 1) {
                                    var cleanedText = $(data).text().trim();
                                    var dateParts = cleanedText.split(
                                        '-');
                                    // Assuming the date format is yyyy-mm-dd
                                    if (dateParts.length === 3) {
                                        return dateParts[2] + '-' + dateParts[1] + '-' +
                                            dateParts[0];
                                    }
                                }
                                if (column === 0 || column === 10 || column === 13) {
                                    var cleanedText = $(data).text().trim();
                                    return cleanedText;
                                }
                                return data;
                            }
                        }
                    },

                    //  Remove extra space 
                    customize: function(xlsx) {
                        var sheet = xlsx.xl.worksheets['sheet1.xml'];
                        // remove extra spaces
                        $('c', sheet).each(function() {
                            var originalText = $(this).find('is t').text();
                            var cleanedText = originalText.replace(/\s+/g, ' ')
                                .trim();
                            $(this).find('is t').text(cleanedText);
                        });
                    }
                },
                'colvis'
            ]
        });
    });
</script>





Controller 222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222
resources\views\backEnd\timesheet\index.blade.php

  <table id="examplee" class="display nowrap">
                            <thead>

                                <tr>
                                    <th style="display: none;">id</th>
                                    <!--	@if (
                                        (now()->isSaturday() && now()->hour >= 18) ||
                                            now()->isSunday() ||
                                            now()->isMonday() ||
                                            (now()->isTuesday() && now()->hour <= 18))
    <th><button type="submit"
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                onclick="return confirm('Are you sure you want to submit this item?');"
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                 formaction="timesheetsubmits" class="btn btn-danger-soft btn-sm">Submit</button>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                 <input type="checkbox" id="chkAll">
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               <i class="os-icon os-icon-trash"></i></th>
    @endif -->
                                    <th>Status</th>
                                    <th>Date</th>
                                    <th>Day</th>
                                    <th>Client Name</th>
                                    <th>Client Code</th>
                                    <th>Assignment Name</th>
                                    <th>Assignment Id</th>
                                    <th>Work Item</th>
                                    <th>Location</th>
                                    <th>Partner</th>
                                    <th>Partner Code</th>
                                    <th>Hour</th>
                                    <th>Total Hour</th>
                                    <th>Action</th>

                                </tr>
                            </thead>
                            <tbody>
                                @foreach ($timesheetData as $timesheetDatas)
                                    <tr>
                                        @php

                                            $timeid = DB::table('timesheetusers')
                                                ->where('timesheetusers.id', $timesheetDatas->id)
                                                ->first();

                                            // $client_id = DB::table('timesheetusers')
                                            //     ->leftjoin('clients', 'clients.id', 'timesheetusers.client_id')
                                            //     ->leftjoin(
                                            //         'assignmentbudgetings',
                                            //         'assignmentbudgetings.assignment_id',
                                            //         'timesheetusers.assignment_id',
                                            //     )
                                            //     ->leftjoin(
                                            //         'assignments',
                                            //         'assignments.id',
                                            //         'timesheetusers.assignment_id',
                                            //     )
                                            //     ->leftjoin('teammembers', 'teammembers.id', 'timesheetusers.partner')
                                            //     ->leftJoin('teamrolehistory', function ($join) {
                                            //         $join
                                            //             ->on('teamrolehistory.teammember_id', '=', 'teammembers.id')
                                            //             ->on(
                                            //                 'teamrolehistory.created_at',
                                            //                 '<',
                                            //                 'timesheetusers.created_at',
                                            //             );
                                            //     })
                                            //     ->where('timesheetusers.id', $timesheetDatas->id)
                                            //     ->select(
                                            //         'clients.client_name',
                                            //         'clients.client_code',
                                            //         'timesheetusers.hour',
                                            //         'timesheetusers.location',
                                            //         'timesheetusers.status',
                                            //         'assignments.assignment_name',
                                            //         'billable_status',
                                            //         'workitem',
                                            //         'teammembers.team_member',
                                            //         'teammembers.staffcode',
                                            //         'teamrolehistory.newstaff_code',
                                            //         'assignmentbudgetings.assignmentname',
                                            //         'assignmentbudgetings.assignmentgenerate_id',
                                            //     )
                                            //     ->first();

                                            $client_id = DB::table('timesheetusers')
                                                ->leftjoin('clients', 'clients.id', 'timesheetusers.client_id')
                                                ->leftjoin(
                                                    'assignmentbudgetings',
                                                    'assignmentbudgetings.assignment_id',
                                                    'timesheetusers.assignment_id',
                                                )
                                                ->leftjoin(
                                                    'assignments',
                                                    'assignments.id',
                                                    'timesheetusers.assignment_id',
                                                )
                                                ->leftjoin('teammembers', 'teammembers.id', 'timesheetusers.partner')
                                                ->where('timesheetusers.id', $timesheetDatas->id)
                                                ->select(
                                                    'clients.client_name',
                                                    'clients.client_code',
                                                    'timesheetusers.hour',
                                                    'timesheetusers.location',
                                                    'timesheetusers.status',
                                                    'assignments.assignment_name',
                                                    'billable_status',
                                                    'workitem',
                                                    'teammembers.team_member',
                                                    'teammembers.staffcode',
                                                    'assignmentbudgetings.assignmentname',
                                                )
                                                ->first();

                                            $permotioncheck = null;
                                            $datadate = $timesheetDatas->assignmentcreated
                                                ? Carbon\Carbon::createFromFormat(
                                                    'Y-m-d H:i:s',
                                                    $timesheetDatas->assignmentcreated,
                                                )
                                                : null;
                                            $permotiondate = null;

                                            if (
                                                auth()->user()->role_id == 13 ||
                                                auth()->user()->role_id == 11 ||
                                                auth()->user()->role_id == 14
                                            ) {
                                                $permotioncheck = DB::table('teamrolehistory')
                                                    ->where('teammember_id', auth()->user()->teammember_id)
                                                    ->first();

                                                if ($permotioncheck) {
                                                    $permotiondate = Carbon\Carbon::createFromFormat(
                                                        'Y-m-d H:i:s',
                                                        $permotioncheck->created_at,
                                                    );
                                                }
                                            }

                                            $total = DB::table('timesheetusers')

                                                ->where('timesheetusers.timesheetid', $timesheetDatas->timesheetid)
                                                ->sum('hour');
                                            //	dd($total);
                                            $dates = date('l', strtotime($timesheetDatas->date));

                                        @endphp
                                        <td style="display: none;">{{ $timesheetDatas->id }}</td>
                                        <td>
                                            @if ($client_id->status == 0)
                                                <span class="badge badge-pill badge-warning">saved</span>
                                            @else
                                                <span class="badge badge-pill badge-danger">submit</span>
                                            @endif
                                        </td>

                                        @php

                                            $date = $timesheetDatas->date;

                                            $leaves = DB::table('applyleaves')
                                                ->where('applyleaves.createdby', auth()->user()->teammember_id)
                                                ->where('status', '!=', 2)
                                                ->select('applyleaves.from', 'applyleaves.to')
                                                ->get();

                                            $leavesWithinRange = $leaves->filter(function ($leave) use ($date) {
                                                return $leave->from <= $date && $leave->to >= $date;
                                            });

                                            //dd($leavesWithinRange);

                                        @endphp

                                        <td> <span style="display: none;">
                                                {{ date('Y-m-d', strtotime($timesheetDatas->date)) }}</span>{{ date('d-m-Y', strtotime($timesheetDatas->date)) }}
                                        </td>

                                        <td>
                                            @if ($timesheetDatas->date != null)
                                                {{ $dates ?? '' }}
                                            @endif
                                        </td>


                                        <td>
                                            {{ $client_id->client_name ?? '' }}
                                            @if (count((array) $client_id->client_name) > 1)
                                                ,
                                            @endif
                                        </td>
                                        <td>
                                            {{ $client_id->client_code ?? '' }}
                                            @if (count((array) $client_id->client_code) > 1)
                                                ,
                                            @endif
                                        </td>

                                        <td>
                                            {{ $client_id->assignment_name ?? '' }}
                                            @if ($timesheetDatas->assignmentname != null)
                                                ({{ $timesheetDatas->assignmentname ?? '' }})
                                            @endif
                                            @if (count((array) $client_id->assignment_name) > 1)
                                                ,
                                            @endif
                                        </td>
                                        <td>
                                            {{ $timesheetDatas->assignmentgenerate_id ?? '' }}
                                        </td>
                                        <td>
                                            {{ $client_id->workitem ?? '' }}
                                            @if (count((array) $client_id->workitem) > 1)
                                                ,
                                            @endif
                                        </td>

                                        <td>
                                            {{ $client_id->location ?? '' }}
                                            @if (count((array) $client_id->location) > 1)
                                                ,
                                            @endif
                                        </td>

                                        {{-- <td>
                                        {{ $client_id->team_member ?? '' }} (
                                        {{ $client_id->newstaff_code ?? ($client_id->staffcode ?? '') }})
                                        @if (count((array) $client_id->team_member) > 1)
                                            ,
                                        @endif
                                    </td> --}}





                                        <td>
                                            {{ $client_id->team_member ?? '' }}
                                            @if (count((array) $client_id->team_member) > 1)
                                                ,
                                            @endif
                                        </td>

                                        <td>
                                            @if ($permotioncheck && $datadate && $datadate->greaterThan($permotiondate))
                                                {{ $permotioncheck->newstaff_code }}
                                            @else
                                                {{ $client_id->staffcode ?? '' }}
                                            @endif
                                            @if (count((array) $client_id->team_member) > 1)
                                                ,
                                            @endif
                                        </td>
                                        <td>
                                            {{ $client_id->hour ?? '' }}
                                            @if (count((array) $client_id->hour) > 1)
                                                ,
                                            @endif
                                        </td>
                                        <td>{{ $total }}</td>
                                        <td>
                                            @if ($client_id->status == 0)
                                                @if ($leavesWithinRange->isEmpty())
                                                    <a href="{{ url('/timesheet/destroy/' . $timesheetDatas->timesheetid) }}"
                                                        onclick="return confirm('Are you sure you want to delete this item?');"
                                                        class="btn btn-danger-soft btn-sm"><i
                                                            class="far fa-trash-alt"></i></a>
                                                @endif
                                            @else
                                                delete blocked
                                            @endif
                                        </td>
                                    </tr>
                                @endforeach
                            </tbody>
                        </table>
			
			
						


Controller 222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222
resources\views\backEnd\timesheetrequest\teamtimesheetrequest.blade.php

<script>
    $(document).ready(function() {
        $('#myTimesheetTable').DataTable({
            dom: 'Bfrtip',
            "order": [
                // [0, "desc"]
            ],
            columnDefs: [{
                targets: [0, 2, 3, 4, 5, 6, 7, 8, 9],
                orderable: false
            }],

            buttons: [{
                    extend: 'excelHtml5',
                    filename: 'My timesheet Request',
                    //   remove extra date from column
                    exportOptions: {
                        columns: ':visible',
                        format: {
                            body: function(data, row, column, node) {
                                if (column === 1) {
                                    var cleanedText = $(data).text().trim();
                                    var dateParts = cleanedText.split(
                                        '-');
                                    // Assuming the date format is yyyy-mm-dd
                                    if (dateParts.length === 3) {
                                        return dateParts[2] + '-' + dateParts[1] + '-' +
                                            dateParts[0];
                                    }
                                }
                                if (column === 0 || column === 3) {
                                    var cleanedText = $(data).text().trim();
                                    return cleanedText;
                                }
                                return data;
                            }
                        }
                    },
                },
                'colvis'
            ]
        });

        $('#teamTimesheetTable').DataTable({
            dom: 'Bfrtip',
            "order": [
                // [0, "desc"]
            ],
            columnDefs: [{
                targets: [0, 2, 3, 4, 5, 6, 7, 8, 9],
                orderable: false
            }],
            buttons: [{
                    extend: 'excelHtml5',
                    filename: 'Team timesheet Request',

                    //   remove extra date from column
                    exportOptions: {
                        columns: ':visible',
                        format: {
                            body: function(data, row, column, node) {
                                if (column === 1) {
                                    var cleanedText = $(data).text().trim();
                                    var dateParts = cleanedText.split(
                                        '-');
                                    // Assuming the date format is yyyy-mm-dd
                                    if (dateParts.length === 3) {
                                        return dateParts[2] + '-' + dateParts[1] + '-' +
                                            dateParts[0];
                                    }
                                }
                                if (column === 0 || column === 3) {
                                    var cleanedText = $(data).text().trim();
                                    return cleanedText;
                                }
                                return data;
                            }
                        }
                    },

                },
                'colvis'
            ]
        });
    });
</script>								




Controller 222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222
resources\views\backEnd\timesheetrequest\teamtimesheetrequest.blade.php

                                <table id="myTimesheetTable" class="table display table-bordered table-striped table-hover">
                                    <thead>
                                        <tr>
                                            <th>Status</th>
                                            <th>Date</th>
                                            <th>Time</th>
                                            <th>Created By</th>
                                            <th class="textfixed">Staff Code</th>
                                            <th>Approver</th>
                                            <th class="textfixed">Approver Code</th>
                                            <th>Reason</th>
                                            <th>Attachment</th>
                                            <th class="textfixed">Reason for Reject</th>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        @foreach ($mytimesheetrequest as $timesheetrequestsData)
                                            <tr>
                                                @php
                                                    $permotioncheck = DB::table('teamrolehistory')
                                                        ->where('teammember_id', auth()->user()->teammember_id)
                                                        ->first();

                                                    $datadate = $timesheetrequestsData->created_at
                                                        ? Carbon\Carbon::createFromFormat(
                                                            'Y-m-d H:i:s',
                                                            $timesheetrequestsData->created_at,
                                                        )
                                                        : null;

                                                    $permotiondate = null;
                                                    if ($permotioncheck) {
                                                        $permotiondate = Carbon\Carbon::createFromFormat(
                                                            'Y-m-d H:i:s',
                                                            $permotioncheck->created_at,
                                                        );
                                                    }
                                                @endphp
                                                <td>
                                                    @if ($timesheetrequestsData->status == 0)
                                                        <span class="badge badge-pill badge-warning">Created</span>
                                                    @elseif($timesheetrequestsData->status == 1)
                                                        <span class="badge badge-pill badge-success">Approved</span>
                                                    @else
                                                        <span class="badge badge-pill badge-danger">Rejected</span>
                                                    @endif
                                                </td>
                                                <td class="textfixed"> <span style="display: none;">
                                                        {{ date('Y-m-d', strtotime($timesheetrequestsData->created_at)) }}</span>{{ date('d-m-Y', strtotime($timesheetrequestsData->created_at)) }}
                                                </td>
                                                <td class="textfixed">
                                                    {{ date('g:i A', strtotime($timesheetrequestsData->created_at)) }}
                                                </td>
                                                <td class="textfixed"><a
                                                        href="{{ url('timesheetrequest/view', $timesheetrequestsData->id) }}">
                                                        {{ $timesheetrequestsData->createdbyauth }}</a></td>
                                                {{-- <td>{{ $timesheetrequestsData->staffcodeid }}</td> --}}
                                                @if ($permotiondate && $datadate && $datadate->greaterThan($permotiondate))
                                                    <td>{{ $permotioncheck->newstaff_code }}</td>
                                                @else
                                                    <td>{{ $timesheetrequestsData->staffcodeid }}</td>
                                                @endif
                                                <td>{{ $timesheetrequestsData->team_member }}
                                                </td>
                                                <td>
                                                    {{ $timesheetrequestsData->staffcode }}
                                                </td>
                                                <td class="textfixed">{{ $timesheetrequestsData->reason }}</td>
                                                <td class="textfixed">
                                                    @if ($timesheetrequestsData && $timesheetrequestsData->attachment)
                                                        <a href="{{ url('backEnd/image/confirmationfile/' . $timesheetrequestsData->attachment) }}"
                                                            target="_blank">
                                                            {{ $timesheetrequestsData->attachment ?? 'NA' }}
                                                        </a>
                                                    @else
                                                        {{ 'NA' }}
                                                    @endif
                                                </td>
                                                <td class="textfixed">{{ $timesheetrequestsData->remark ?? 'NA' }}</td>
                                            </tr>
                                        @endforeach
                                    </tbody>
                                </table>






Controller 222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222
resources\views\backEnd\timesheetrequest\teamtimesheetrequest.blade.php

                            <table id="teamTimesheetTable" class="table display table-bordered table-striped table-hover">
                                <thead>
                                    <tr>
                                        <th>Status</th>
                                        <th>Date</th>
                                        <th>Time</th>
                                        <th>Created By</th>
                                        <th class="textfixed">Staff Code</th>
                                        <th>Approver</th>
                                        <th class="textfixed">Approver Code</th>
                                        <th>Reason</th>
                                        <th>Attachment</th>
                                        <th class="textfixed">Reason for Reject</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    @foreach ($teamtimesheetrequest as $timesheetrequestsData)
                                        <tr>
                                            <td>
                                                @if ($timesheetrequestsData->status == 0)
                                                    <span class="badge badge-pill badge-warning">Created</span>
                                                @elseif($timesheetrequestsData->status == 1)
                                                    <span class="badge badge-pill badge-success">Approved</span>
                                                @else
                                                    <span class="badge badge-pill badge-danger">Rejected</span>
                                                @endif
                                            </td>
                                            <td class="textfixed"> <span style="display: none;">
                                                    {{ date('Y-m-d', strtotime($timesheetrequestsData->created_at)) }}</span>{{ date('d-m-Y', strtotime($timesheetrequestsData->created_at)) }}
                                            </td>
                                            <td class="textfixed">
                                                {{ date('g:i A', strtotime($timesheetrequestsData->created_at)) }}</td>
                                            <td class="textfixed"><a
                                                    href="{{ url('timesheetrequest/view', $timesheetrequestsData->id) }}">
                                                    {{ $timesheetrequestsData->createdbyauth }}</a></td>
                                            <td>{{ $timesheetrequestsData->staffcodeid }}</td>
                                            <td class="textfixed">{{ $timesheetrequestsData->team_member }}

                                            </td>
                                            <td>
                                                {{ $timesheetrequestsData->staffcode }}
                                            </td>
                                            <td class="textfixed">{{ $timesheetrequestsData->reason }}</td>
                                            <td class="textfixed">
                                                @if ($timesheetrequestsData && $timesheetrequestsData->attachment)
                                                    <a href="{{ url('backEnd/image/confirmationfile/' . $timesheetrequestsData->attachment) }}"
                                                        target="_blank">
                                                        {{ $timesheetrequestsData->attachment ?? 'NA' }}
                                                    </a>
                                                @else
                                                    {{ 'NA' }}
                                                @endif
                                            </td>
                                            <td class="textfixed">{{ $timesheetrequestsData->remark ?? 'NA' }}</td>
                                        </tr>
                                    @endforeach
                                </tbody>
                            </table>





Controller 222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222
resources\views\backEnd\timesheet\timesheetdownload.blade.php


  <script>
      $(document).ready(function() {
                  $('#examplee').DataTable({
                          dom: 'Bfrtip',
                          "order": [],
                          searching: false,
                          @if (Auth::user()->role_id == 11 ||
                                  Request::is('adminsearchtimesheet') ||
                                  (Auth::user()->role_id == 13 && Request::is('admintimesheetlist')))
                              columnDefs: [{
                                  targets: [1, 2, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13],
                                  orderable: false
                              }],
                          @else
                              columnDefs: [{
                                  targets: [1, 2, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13],
                                  orderable: false
                              }],
                          @endif
                          buttons: [{
                                  extend: 'excelHtml5',
                                  filename: 'Timesheet_Download',

                                  //   remove extra date from column
                                  exportOptions: {
                                      columns: ':visible',
                                      format: {
                                          body: function(data, row, column, node) {
                                              // it should be column number 2
                                              @if (Auth::user()->role_id == 11 ||
                                                      Request::is('adminsearchtimesheet') ||
                                                      (Auth::user()->role_id == 13 && Request::is('admintimesheetlist')))
                                                  if (column === 2) {
                                                  @else
                                                      if (column === 2) {
                                                      @endif
                                                      // If the data is a date, extract the date without HTML tags
                                                      var cleanedText = $(data).text().trim();
                                                      var dateParts = cleanedText.split(
                                                          '-');
                                                      // Assuming the date format is yyyy-mm-dd
                                                      if (dateParts.length === 3) {
                                                          return dateParts[2] + '-' + dateParts[1] + '-' +
                                                              dateParts[0];
                                                      }
                                                  }
                                                  return data;
                                              }
                                          }
                                      },

                                      //   set width in excell
                                      customize: function(xlsx) {
                                          var sheet = xlsx.xl.worksheets['sheet1.xml'];

                                          // set column width
                                          $('col', sheet).eq(0).attr('width', 15);
                                          $('col', sheet).eq(1).attr('width', 15);
                                          $('col', sheet).eq(3).attr('width', 30);
                                          $('col', sheet).eq(4).attr('width', 30);
                                          $('col', sheet).eq(5).attr('width', 30);
                                          $('col', sheet).eq(6).attr('width', 30);
                                          $('col', sheet).eq(7).attr('width', 30);

                                          // remove extra spaces
                                          $('c', sheet).each(function() {
                                              var originalText = $(this).find('is t').text();
                                              var cleanedText = originalText.replace(/\s+/g, ' ')
                                                  .trim();
                                              $(this).find('is t').text(cleanedText);
                                          });
                                      }
                                  },
                                  'colvis'
                              ]
                          });
                  });
  </script>




Controller 222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222
resources\views\backEnd\timesheet\timesheetdownload.blade.php


                      @if (Request::is('adminsearchtimesheet') || Request::is('mytimesheetlist/*') || Request::is('searchingtimesheet'))
                          <table id="examplee" class="table display table-bordered table-striped table-hover">
                              <thead>
                                  <tr>
                                      <th style="display: none;">id</th>
                                      <th class="textfixed">Employee Name</th>
                                      {{-- @if (Request::is('adminsearchtimesheet')) --}}
                                      <th class="textfixed">Employee Code</th>
                                      {{-- @endif --}}
                                      <th>Date</th>
                                      <th>Day</th>
                                      <th>Client Name</th>
                                      <th class="textfixed">Client Code</th>
                                      <th>Assignment Name</th>
                                      <th class="textfixed">Assignment Id</th>
                                      <th>Work Item</th>
                                      <th>Location</th>
                                      <th>Partner</th>
                                      <th class="textfixed">Partner Code</th>
                                      <th>Hour</th>
                                  </tr>
                              </thead>
                              <tbody>
                                  @foreach ($timesheetData as $timesheetDatas)
                                      <tr>
                                          {{-- @if (Request::is('adminsearchtimesheet')) --}}
                                          @php

                                              $permotioncheck = DB::table('teamrolehistory')
                                                  ->where('teammember_id', $timesheetDatas->createdby)
                                                  ->first();
                                              //shshid client
                                              $datadate = $timesheetDatas->assignmentcreateddate
                                                  ? Carbon\Carbon::createFromFormat(
                                                      'Y-m-d H:i:s',
                                                      $timesheetDatas->assignmentcreateddate,
                                                  )
                                                  : null;

                                              $permotiondate = null;
                                              if ($permotioncheck) {
                                                  $permotiondate = Carbon\Carbon::createFromFormat(
                                                      'Y-m-d H:i:s',
                                                      $permotioncheck->created_at,
                                                  );
                                              }
                                          @endphp
                                          {{-- @endif --}}
                                          <td style="display: none;">{{ $timesheetDatas->id }}</td>
                                          <td> {{ $timesheetDatas->team_member ?? '' }} </td>
                                          {{-- @if (Request::is('adminsearchtimesheet')) --}}
                                          {{-- <td> {{ $timesheetDatas->staffcode ?? '' }} </td> --}}
                                          @if ($permotioncheck && $datadate && $datadate->greaterThan($permotiondate))
                                              <td>{{ $permotioncheck->newstaff_code }}</td>
                                          @else
                                              <td>{{ $timesheetDatas->staffcode }}</td>
                                          @endif
                                          {{-- @endif --}}
                                          <td class="textfixed"> <span style="display: none;">
                                                  {{ date('Y-m-d', strtotime($timesheetDatas->date)) }}</span>{{ date('d-m-Y', strtotime($timesheetDatas->date)) }}
                                          </td>
                                          <td class="textfixed">
                                              @if ($timesheetDatas->date != null)
                                                  {{ date('l', strtotime($timesheetDatas->date)) }}
                                              @endif
                                          </td>
                                          <td class="textfixed">{{ $timesheetDatas->client_name ?? '' }}
                                          </td>
                                          <td>{{ $timesheetDatas->client_code ?? '' }}
                                          </td>
                                          <td class="textfixed">
                                              {{ $timesheetDatas->assignment_name ?? '' }}
                                              @if ($timesheetDatas->assignmentname != null)
                                                  ({{ $timesheetDatas->assignmentname ?? '' }})
                                              @endif
                                          </td>
                                          <td>
                                              {{ $timesheetDatas->assignmentgenerate_id ?? '' }}
                                          </td>
                                          <td class="textfixed"> {{ $timesheetDatas->workitem ?? '' }}</td>
                                          <td class="textfixed">{{ $timesheetDatas->location ?? '' }} </td>
                                          <td class="textfixed"> {{ $timesheetDatas->patnername ?? '' }}
                                          </td>
                                          <td>
                                              @if ($permotioncheck && $datadate && $datadate->greaterThan($permotiondate))
                                                  {{ $timesheetDatas->newstaff_code ?? '' }}
                                              @else
                                                  {{ $timesheetDatas->patnerstaffcode ?? '' }}
                                              @endif
                                          </td>
                                          <td>{{ $timesheetDatas->hour ?? '' }}</td>
                                      </tr>
                                  @endforeach
                              </tbody>
                          </table>
                      @endif





Controller 222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222
resources\views\backEnd\report\assignmentreport.blade.php	

                  <div class="tab-content" id="pills-tabContent">
                      <div class="tab-pane fade show active" id="pills-home" role="tabpanel"
                          aria-labelledby="pills-home-tab">
                          <div class="table-responsive">
                              <table id="examplee" class="table display table-bordered table-striped table-hover">
                                  <thead>
                                      <tr>
                                          <th class="textfixed">Date of Request</th>
                                          <th>Employee</th>
                                          <th class="textfixed">Staff Code</th>
                                          <th>Leave Type</th>
                                          <th>Approver</th>
                                          <th class="textfixed">Approver Code</th>
                                          <th class="textfixed">Reason for Leave</th>
                                          <th>Leave Period</th>
                                          <th>Days</th>
                                          <th>Status</th>
                                          @foreach ($myapplyleaveDatas as $applyleaveDatas)
                                              @if ($applyleaveDatas->leavetype == 11 && $applyleaveDatas->status == 1 && $loop->first)
                                                  <th>Action</th>
                                              @endif
                                          @endforeach
                                      </tr>
                                  </thead>
                                  <tbody>

                                      @foreach ($myapplyleaveDatas as $applyleaveDatas)
                                          <tr>
                                              <td>{{ date('d-m-Y', strtotime($applyleaveDatas->created_at)) ?? '' }}
                                              </td>
                                              <td class="textfixed"> <a
                                                      href="{{ route('applyleave.show', $applyleaveDatas->id) }}">
                                                      {{ $applyleaveDatas->team_member ?? '' }}</a></td>
                                              {{-- <td>{{ $applyleaveDatas->staffcode ?? '' }}</td> --}}
                                              <td>{{ $applyleaveDatas->newstaff_code ?? $applyleaveDatas->staffcode }}
                                              </td>
                                              <td class="textfixed">

                                                  {{ $applyleaveDatas->name ?? '' }}<br>
                                                  @if ($applyleaveDatas->type == '0')
                                                      <b>Type :</b> <span>Birthday</span><br>
                                                      <span><b>Birthday Date :
                                                          </b>{{ date(
                                                              'F d,Y',
                                                              strtotime(
                                                                  App\Models\Teammember::select('dateofbirth')->where('id', $applyleaveDatas->createdby)->first()->dateofbirth,
                                                              ),
                                                          ) ?? '' }}</span>
                                                  @elseif($applyleaveDatas->type == '1')
                                                      <span>Religious Festival</span>
                                                  @endif
                                                  @if ($applyleaveDatas->examtype == '0')
                                                      <b>Exam Type :</b> <span>PCC</span>
                                                  @elseif($applyleaveDatas->examtype == '1')
                                                      <b>Exam Type :</b> <span>CA Final</span>
                                                  @elseif($applyleaveDatas->examtype == '2')
                                                      <b>Exam Type :</b> <span>B.Com</span>
                                                  @endif
                                                  @if ($applyleaveDatas->examtype == '3')
                                                      <b>Other :</b>
                                                      <span>{{ $applyleaveDatas->otherexam ?? '' }}</span>
                                                  @endif
                                              </td>
                                              <td class="textfixed">
                                                  {{ App\Models\Teammember::select('team_member')->where('id', $applyleaveDatas->approver)->first()->team_member ?? '' }}

                                              </td>
                                              <td>
                                                  {{ App\Models\Teammember::select('team_member', 'staffcode')->where('id', $applyleaveDatas->approver)->first()->staffcode ?? '' }}
                                              </td>

                                              <td class="textfixed">{{ $applyleaveDatas->reasonleave ?? '' }} </td>

                                              <td class="textfixed">
                                                  {{ date('d-m-Y', strtotime($applyleaveDatas->from)) ?? '' }} -
                                                  {{ date('d-m-Y', strtotime($applyleaveDatas->to)) ?? '' }}</td>
                                              @php
                                                  $to = Carbon\Carbon::createFromFormat(
                                                      'Y-m-d',
                                                      $applyleaveDatas->to ?? '',
                                                  );
                                                  $from = Carbon\Carbon::createFromFormat(
                                                      'Y-m-d',
                                                      $applyleaveDatas->from,
                                                  );
                                                  $diff_in_days = $to->diffInDays($from) + 1;
                                                  $holidaycount = DB::table('holidays')
                                                      ->where('startdate', '>=', $applyleaveDatas->from)
                                                      ->where('enddate', '<=', $applyleaveDatas->to)
                                                      ->count();
                                              @endphp
                                              <td>{{ $diff_in_days - $holidaycount ?? '' }}</td>


                                              <td>
                                                  @if ($applyleaveDatas->status == 0)
                                                      <span class="badge badge-pill badge-warning">Created</span>
                                                  @elseif($applyleaveDatas->status == 1)
                                                      <span class="badge badge-success">Approved</span>
                                                  @elseif($applyleaveDatas->status == 2)
                                                      <span class="badge badge-danger">Rejected</span>
                                                  @endif
                                              </td>
                                              <td>
                                                  @if ($applyleaveDatas->leavetype == 11 && $applyleaveDatas->status == 1 && $loop->first)
                                                      <button class="btn btn-danger" data-toggle="modal"
                                                          style="height: 16px; width: auto; border-radius: 7px; display: flex; align-items: center; justify-content: center;font-size: 11px;"
                                                          data-target="#requestModal{{ $applyleaveDatas->id }}">Request</button>
                                                  @endif
                                              </td>

                                          </tr>
                                          {{-- leaverequest form --}}
                                          @if ($applyleaveDatas->leavetype == 11)
                                              <div class="modal fade" id="requestModal{{ $applyleaveDatas->id }}"
                                                  tabindex="-1" role="dialog" aria-labelledby="requestModalLabel"
                                                  aria-hidden="true">
                                                  <div class="modal-dialog" role="document">
                                                      <form method="post" action="{{ route('applyleaverequest') }}"
                                                          enctype="multipart/form-data">
                                                          @csrf
                                                          <div class="modal-content">
                                                              <div class="modal-header">
                                                                  {{-- @php
                                                                  dd($applyleaveDatas);
                                                              @endphp --}}
                                                                  <h5 class="modal-title" id="requestModalLabel">Enter
                                                                      Request Details</h5>
                                                                  <button type="button" class="close" data-dismiss="modal"
                                                                      aria-label="Close">
                                                                      <span aria-hidden="true">&times;</span>
                                                                  </button>
                                                              </div>
                                                              <div class="modal-body">
                                                                  @if ($errors->any())
                                                                      <div class="">
                                                                          <ul>
                                                                              @foreach ($errors->all() as $error)
                                                                                  <li class="text-danger">
                                                                                      {{ $error }}</li>
                                                                              @endforeach
                                                                          </ul>
                                                                      </div>
                                                                  @endif
                                                                  {{-- <form method="post"
                                                                  action="{{ url('/applyleaverequest') }}"
                                                                  enctype="multipart/form-data"> --}}

                                                                  <input type="hidden" name="applyleaveid"
                                                                      value="{{ $applyleaveDatas->id }}"
                                                                      class="form-control" placeholder="">
                                                                  <input type="hidden" name="createdby"
                                                                      value="{{ $applyleaveDatas->createdby }}"
                                                                      class="form-control" placeholder="">
                                                                  <input type="hidden" name="approver"
                                                                      value="{{ $applyleaveDatas->approver }}"
                                                                      class="form-control" placeholder="">
                                                                  <input type="hidden" name="status"
                                                                      value="{{ $applyleaveDatas->status }}"
                                                                      class="form-control" placeholder="">

                                                                  <!-- Input fields for request details here -->
                                                                  <label for="">Reason:*</label>

                                                                  <input type="text" name="reason"
                                                                      class="form-control" placeholder="Enter Reason"
                                                                      required>
                                                                  <label for="">Select Date:*</label>
                                                                  <input type="date" name="date"
                                                                      class="form-control yearValidate" maxlength="10"
                                                                      required>
                                                                  {{-- validation for year --}}
                                                                  <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
                                                                  <script>
                                                                      $(document).ready(function() {
                                                                          $('.yearValidate').on('change', function() {
                                                                              var leaveDate = $('.yearValidate');
                                                                              var leaveDateValue = $('.yearValidate').val();
                                                                              console.log(leaveDateValue);
                                                                              var leaveDateGet = new Date(leaveDateValue);
                                                                              var leaveyear = leaveDateGet.getFullYear();
                                                                              // console.log(startyear);
                                                                              var leaveyearLength = leaveyear.toString().length;
                                                                              if (leaveyearLength > 4) {
                                                                                  alert('Enter four digits for the year');
                                                                                  leaveDate.val('');
                                                                              }
                                                                          });
                                                                      });
                                                                  </script>
                                                              </div>
                                                              <div class="modal-footer">
                                                                  <button type="button" class="btn btn-secondary"
                                                                      data-dismiss="modal">Close</button>
                                                                  <button type="submit"
                                                                      class="btn btn-primary">Submit</button>
                                                              </div>
                                                          </div>
                                                      </form>
                                                  </div>
                                              </div>
                                          @endif
                                      @endforeach
                                  </tbody>
                              </table>

                          </div>
                      </div>
                      <div class="tab-pane fade" id="pills-user" role="tabpanel" aria-labelledby="pills-user-tab">

                          <div class="table-responsive">

                              <table id="example1" class="table display table-bordered table-striped table-hover">
                                  <thead>
                                      <tr>
                                          <th>Employee</th>
                                          <th class="textfixed">Staff Code</th>
                                          <th>Leave Type</th>
                                          <th>Approver</th>
                                          <th class="textfixed">Approver Code</th>
                                          <th class="textfixed">Reason for Leave</th>
                                          <th> Leave Period</th>
                                          <th>Days</th>
                                          <th class="textfixed">Date of Request</th>
                                          <th>Status</th>
                                          <th>Approved</th>
                                          <th>Reject</th>
                                      </tr>
                                  </thead>
                                  <tbody>
                                      @foreach ($teamapplyleaveDatas as $applyleaveDatas)
                                          <tr>
                                              <td class="textfixed"> <a
                                                      href="{{ route('applyleave.show', $applyleaveDatas->id) }}">
                                                      {{ $applyleaveDatas->team_member ?? '' }}</a></td>
                                              <td>{{ $applyleaveDatas->staffcode ?? '' }}</td>
                                              <td class="textfixed">

                                                  {{ $applyleaveDatas->name ?? '' }}<br>
                                                  @if ($applyleaveDatas->type == '0')
                                                      <b>Type :</b> <span>Birthday</span><br>
                                                      <span><b>Birthday Date :
                                                          </b>{{ date(
                                                              'd-m-Y',
                                                              strtotime(
                                                                  App\Models\Teammember::select('dateofbirth')->where('id', $applyleaveDatas->createdby)->first()->dateofbirth,
                                                              ),
                                                          ) ?? '' }}</span>
                                                  @elseif($applyleaveDatas->type == '1')
                                                      <span>Religious Festival</span>
                                                  @endif
                                                  @if ($applyleaveDatas->examtype == '0')
                                                      <b>Exam Type :</b> <span>PCC</span>
                                                  @elseif($applyleaveDatas->examtype == '1')
                                                      <b>Exam Type :</b> <span>CA Final</span>
                                                  @elseif($applyleaveDatas->examtype == '2')
                                                      <b>Exam Type :</b> <span>B.Com</span>
                                                  @endif
                                                  @if ($applyleaveDatas->examtype == '3')
                                                      <b>Other :</b> <span>{{ $applyleaveDatas->otherexam ?? '' }}</span>
                                                  @endif
                                              </td>
                                              {{-- <td>{{ App\Models\Teammember::select('team_member')->where('id', $applyleaveDatas->approver)->first()->team_member ?? '' }}
                                            ({{ App\Models\Teammember::select('team_member', 'staffcode')->where('id', $applyleaveDatas->approver)->first()->staffcode ?? '' }})
                                        </td> --}}
                                              @php
                                                  $approvelpartner = DB::table('teammembers')
                                                      ->leftJoin(
                                                          'teamrolehistory',
                                                          'teamrolehistory.teammember_id',
                                                          '=',
                                                          'teammembers.id',
                                                      )
                                                      ->where('teammembers.id', $applyleaveDatas->approver)
                                                      ->select(
                                                          'teammembers.team_member',
                                                          'teammembers.staffcode',
                                                          'teamrolehistory.newstaff_code',
                                                          'teamrolehistory.created_at',
                                                      )
                                                      ->first();

                                                  $datadate = $applyleaveDatas->created_at
                                                      ? Carbon\Carbon::createFromFormat(
                                                          'Y-m-d H:i:s',
                                                          $applyleaveDatas->created_at,
                                                      )
                                                      : null;

                                                  $permotiondate = null;
                                                  if ($approvelpartner->created_at) {
                                                      $permotiondate = Carbon\Carbon::createFromFormat(
                                                          'Y-m-d H:i:s',
                                                          $approvelpartner->created_at,
                                                      );
                                                  }
                                              @endphp

                                              <td class="textfixed">
                                                  {{ $approvelpartner->team_member ?? '' }}

                                              </td>
                                              <td>
                                                  @if ($permotiondate && $datadate && $datadate->greaterThan($permotiondate))
                                                      {{ $approvelpartner->newstaff_code }}
                                                  @else
                                                      {{ $approvelpartner->staffcode }}
                                                  @endif
                                              </td>


                                              <td class="textfixed">{{ $applyleaveDatas->reasonleave ?? '' }} </td>

                                              <td class="textfixed">
                                                  {{ date('d-m-Y', strtotime($applyleaveDatas->from)) ?? '' }} to
                                                  {{ date('d-m-Y', strtotime($applyleaveDatas->to)) ?? '' }}
                                              </td>
                                              @php
                                                  $to = Carbon\Carbon::createFromFormat(
                                                      'Y-m-d',
                                                      $applyleaveDatas->to ?? '',
                                                  );
                                                  $from = Carbon\Carbon::createFromFormat(
                                                      'Y-m-d',
                                                      $applyleaveDatas->from,
                                                  );
                                                  $diff_in_days = $to->diffInDays($from) + 1;
                                                  $holidaycount = DB::table('holidays')
                                                      ->where('startdate', '>=', $applyleaveDatas->from)
                                                      ->where('enddate', '<=', $applyleaveDatas->to)
                                                      ->count();
                                              @endphp
                                              <td>{{ $diff_in_days - $holidaycount ?? '' }}</td>
                                              <td> {{ date('d-m-Y', strtotime($applyleaveDatas->created_at)) ?? '' }}</td>
                                              <td>
                                                  @if ($applyleaveDatas->status == 0)
                                                      <span class="badge badge-pill badge-warning">Created</span>
                                                  @elseif($applyleaveDatas->status == 1)
                                                      <span class="badge badge-success">Approved</span>
                                                  @elseif($applyleaveDatas->status == 2)
                                                      <span class="badge badge-danger">Rejected</span>
                                                  @endif
                                              </td>
                                              <td>
                                                  @if ($applyleaveDatas->status == 0)
                                                      <form method="post"
                                                          action="{{ route('applyleave.update', $applyleaveDatas->id) }}"
                                                          enctype="multipart/form-data" style="text-align: center;">
                                                          @method('PATCH')
                                                          @csrf
                                                          <input type="text" hidden id="example-date-input"
                                                              name="status" value="1" class="form-control"
                                                              placeholder="Enter Location">
                                                          <button type="submit" class="btn btn-success"
                                                              style="border-radius: 7px; font-size: 10px; padding: 5px;">
                                                              Approve</button>
                                                      </form>
                                                  @endif
                                              </td>
                                              <td style="text-align: center;">
                                                  @if ($applyleaveDatas->status == 0)
                                                      <button data-toggle="modal"
                                                          data-target="#exampleModal12{{ $loop->index }}"
                                                          class="btn btn-danger"
                                                          style="border-radius: 7px; font-size: 10px; padding: 5px; margin-bottom: 16px;">
                                                          Reject</button>
                                                  @endif
                                              </td>

                                              <!-- model box / pop up box  -->
                                              <div class="modal fade" id="exampleModal12{{ $loop->index }}"
                                                  tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel4"
                                                  aria-hidden="true">
                                                  <div class="modal-dialog" role="document">
                                                      <div class="modal-content">
                                                          <div class="modal-header" style="background:#37A000">
                                                              <h5 style="color: white" class="modal-title font-weight-600"
                                                                  id="exampleModalLabel1">Reason For
                                                                  Rejection</h5>
                                                              <button type="button" class="close" data-dismiss="modal"
                                                                  aria-label="Close">
                                                                  <span aria-hidden="true">&times;</span>
                                                              </button>
                                                          </div>
                                                          <form method="post"
                                                              action="{{ url('applyleave/update', $applyleaveDatas->id) }}"
                                                              enctype="multipart/form-data">
                                                              @csrf
                                                              <div class="modal-body">
                                                                  <div class="row row-sm">
                                                                      <div class="col-12">
                                                                          <div class="form-group">
                                                                              <textarea rows="6" name="remark" class="form-control" placeholder=""></textarea>
                                                                              <input hidden type="text"
                                                                                  id="example-date-input" name="status"
                                                                                  value="2" class="form-control"
                                                                                  placeholder="Enter Reason">
                                                                          </div>
                                                                      </div>
                                                                  </div>
                                                                  <button type="button" class="btn btn-danger"
                                                                      data-dismiss="modal">Close</button>
                                                                  <button type="submit" style="float: right"
                                                                      class="btn btn-success">Save </button>
                                                              </div>
                                                          </form>
                                                      </div>
                                                  </div>
                                              </div>

                                          </tr>
                                      @endforeach
                                  </tbody>
                              </table>
                          </div>

                      </div>
                  </div>






Controller 222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222
resources\views\backEnd\applyleave\index.blade.php

replace all code in this file 



Controller 222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222
resources\views\backEnd\assignmentmapping\yearwisepartnerlist.blade.php


                <div class="tab-content" id="pills-tabContent">
                    <div class="tab-pane fade show active" id="pills-home" role="tabpanel" aria-labelledby="pills-home-tab">
                        <div class="table-responsive">
                            <table class="table display table-bordered table-striped table-hover examplee">
                                <thead>
                                    <tr>
                                        <th class="textfixed">Assignment Id</th>
                                        <th>Assignment</th>
                                        <th>Client</th>
                                        <th class="textfixed">Client Code</th>
                                        <th>Deadline</th>
                                        <th>Period End</th>
                                        <th>Assigned Partner</th>
                                        <th class="textfixed">Assignedpartner Code</th>
                                        <th>Other Partner</th>
                                        <th class="textfixed">Otherpartner Code</th>
                                        <th>Teammember</th>
                                        @if (auth()->user()->role_id != 15 && Auth::user()->role_id != 11)
                                            <th>Edit</th>
                                        @endif
                                    </tr>
                                </thead>
                                <tbody>
                                    @foreach ($assigned as $assignmentmappingDatas)
                                        <tr>

                                            <td> <a
                                                    href="{{ url('/viewassignment/' . $assignmentmappingDatas->assignmentgenerate_id) }}">{{ $assignmentmappingDatas->assignmentgenerate_id }}</a>
                                            </td>
                                            <td class="textfixed">
                                                {{ $assignmentmappingDatas->assignment_name }} @if ($assignmentmappingDatas->assignmentname != null)
                                                    ({{ $assignmentmappingDatas->assignmentname }})
                                                @endif
                                            </td>
                                            <td class="textfixed"> {{ $assignmentmappingDatas->client_name }}</td>
                                            <td> {{ $assignmentmappingDatas->client_code }}</td>
                                            <td class="textfixed">
                                                @if ($assignmentmappingDatas->duedate != null)
                                                    {{ date('d-m-Y', strtotime($assignmentmappingDatas->duedate)) }}
                                                @endif
                                            </td>
                                            <td class="textfixed">
                                                @if ($assignmentmappingDatas->periodend != null)
                                                    {{ date('d-m-Y', strtotime($assignmentmappingDatas->periodend)) }}
                                                @endif
                                            </td>
                                            {{-- <td>{{ App\Models\Teammember::select('team_member')->where('id', $assignmentmappingDatas->leadpartner)->first()->team_member ?? '' }}
                                                ({{ App\Models\Teammember::select('team_member', 'staffcode')->where('id', $assignmentmappingDatas->leadpartner)->first()->staffcode ?? '' }})
                                            </td>
                                            <td>{{ App\Models\Teammember::select('team_member')->where('id', $assignmentmappingDatas->otherpartner)->first()->team_member ?? '' }}
                                                ({{ App\Models\Teammember::select('team_member', 'staffcode')->where('id', $assignmentmappingDatas->otherpartner)->first()->staffcode ?? '' }})
                                            </td> --}}

                                            @php
                                                $leadpartner = DB::table('teammembers')
                                                    ->leftJoin(
                                                        'teamrolehistory',
                                                        'teamrolehistory.teammember_id',
                                                        '=',
                                                        'teammembers.id',
                                                    )
                                                    ->where('teammembers.id', $assignmentmappingDatas->leadpartner)
                                                    ->select(
                                                        'teammembers.team_member',
                                                        'teammembers.staffcode',
                                                        'teamrolehistory.newstaff_code',
                                                    )
                                                    ->first();

                                                $otherPartner = DB::table('teammembers')
                                                    ->leftJoin(
                                                        'teamrolehistory',
                                                        'teamrolehistory.teammember_id',
                                                        '=',
                                                        'teammembers.id',
                                                    )
                                                    ->where('teammembers.id', $assignmentmappingDatas->otherpartner)
                                                    ->select(
                                                        'teammembers.team_member',
                                                        'teammembers.staffcode',
                                                        'teamrolehistory.newstaff_code',
                                                    )
                                                    ->first();
                                            @endphp
                                            <td class="textfixed">
                                                {{ $leadpartner->team_member ?? '' }}

                                            </td>
                                            <td>

                                                @if ($leadpartner && $leadpartner->team_member)
                                                    {{ $leadpartner->newstaff_code ?? ($leadpartner->staffcode ?? '') }}
                                                @endif
                                            </td>
                                            <td class="textfixed">
                                                {{ $otherPartner->team_member ?? '' }}

                                            </td>
                                            <td>

                                                @if ($otherPartner && $otherPartner->team_member)
                                                    {{ $otherPartner->newstaff_code ?? ($otherPartner->staffcode ?? '') }}
                                                @endif
                                            </td>

                                            <td>
                                                @foreach (DB::table('assignmentmappings')->leftjoin('assignmentteammappings', 'assignmentteammappings.assignmentmapping_id', 'assignmentmappings.id')->leftjoin('teammembers', 'teammembers.id', 'assignmentteammappings.teammember_id')->where('assignmentmappings.id', $assignmentmappingDatas->id)->get() as $sub)
                                                    @if ($sub->profilepic == null)
                                                        <a class="avatar avatar-xs" data-toggle="tooltip"
                                                            title="{{ $sub->team_member }} ({{ $sub->staffcode }})">
                                                            <img src="{{ url('backEnd/image/dummy.png') }}"
                                                                class="avatar-img rounded-circle" alt="...">
                                                        @else
                                                            <a class="avatar avatar-xs" data-toggle="tooltip"
                                                                title="{{ $sub->team_member }} ({{ $sub->staffcode }})">
                                                                <img src="{{ asset('backEnd/image/teammember/profilepic/' . $sub->profilepic) }}"
                                                                    class="avatar-img rounded-circle" alt="...">
                                                    @endif
                                                @endforeach
                                            </td>
                                            @if (auth()->user()->role_id != 15 && Auth::user()->role_id != 11)
                                                <td>
                                                    <a href="{{ url('/assignmentlist/' . $assignmentmappingDatas->assignmentgenerate_id) }}"
                                                        class="btn btn-info-soft btn-sm"><i class="far fa-edit"></i></a>
                                                </td>
                                            @endif
                                        </tr>
                                    @endforeach
                                </tbody>
                            </table>
                        </div>
                    </div>

                    <div class="tab-pane fade" id="pills-user" role="tabpanel" aria-labelledby="pills-user-tab">
                        <div class="table-responsive">
                            <table class="table display table-bordered table-striped table-hover examplee">
                                <thead>
                                    <tr>
                                        <th class="textfixed">Assignment Id</th>
                                        <th>Assignment</th>
                                        <th>Client</th>
                                        <th class="textfixed">Client Code</th>
                                        <th>Deadline</th>
                                        <th>Period End</th>
                                        <th>Assigned Partner</th>
                                        <th class="textfixed">Assignedpartner Code</th>
                                        <th class="textfixed">Other Partner</th>
                                        <th>Otherpartner Code</th>
                                        <th>Teammember</th>
                                        @if (auth()->user()->role_id != 15 && Auth::user()->role_id != 11)
                                            <th>Edit</th>
                                        @endif
                                    </tr>
                                </thead>

                                <tbody>
                                    @foreach ($otherassigned as $assignmentmappingDatas)
                                        <tr>

                                            <td> <a
                                                    href="{{ url('/viewassignment/' . $assignmentmappingDatas->assignmentgenerate_id) }}">{{ $assignmentmappingDatas->assignmentgenerate_id }}</a>
                                            </td>
                                            <td class="textfixed">
                                                {{ $assignmentmappingDatas->assignment_name }} @if ($assignmentmappingDatas->assignmentname != null)
                                                    ({{ $assignmentmappingDatas->assignmentname }})
                                                @endif
                                            </td>
                                            <td class="textfixed"> {{ $assignmentmappingDatas->client_name }}</td>
                                            <td> {{ $assignmentmappingDatas->client_code }}</td>
                                            <td class="textfixed">
                                                @if ($assignmentmappingDatas->duedate != null)
                                                    {{ date('d-m-Y', strtotime($assignmentmappingDatas->duedate)) }}
                                                @endif
                                            </td>
                                            <td class="textfixed">
                                                @if ($assignmentmappingDatas->periodend != null)
                                                    {{ date('d-m-Y', strtotime($assignmentmappingDatas->periodend)) }}
                                                @endif
                                            </td>
                                            {{-- <td>{{ App\Models\Teammember::select('team_member')->where('id', $assignmentmappingDatas->leadpartner)->first()->team_member ?? '' }}
                                            ({{ App\Models\Teammember::select('team_member', 'staffcode')->where('id', $assignmentmappingDatas->leadpartner)->first()->staffcode ?? '' }})
                                        </td>
                                        <td>{{ App\Models\Teammember::select('team_member')->where('id', $assignmentmappingDatas->otherpartner)->first()->team_member ?? '' }}
                                            ({{ App\Models\Teammember::select('team_member', 'staffcode')->where('id', $assignmentmappingDatas->otherpartner)->first()->staffcode ?? '' }})
                                        </td> --}}
                                            @php
                                                $leadpartner = DB::table('teammembers')
                                                    ->leftJoin(
                                                        'teamrolehistory',
                                                        'teamrolehistory.teammember_id',
                                                        '=',
                                                        'teammembers.id',
                                                    )
                                                    ->where('teammembers.id', $assignmentmappingDatas->leadpartner)
                                                    ->select(
                                                        'teammembers.team_member',
                                                        'teammembers.staffcode',
                                                        'teamrolehistory.newstaff_code',
                                                    )
                                                    ->first();

                                                $otherPartner = DB::table('teammembers')
                                                    ->leftJoin(
                                                        'teamrolehistory',
                                                        'teamrolehistory.teammember_id',
                                                        '=',
                                                        'teammembers.id',
                                                    )
                                                    ->where('teammembers.id', $assignmentmappingDatas->otherpartner)
                                                    ->select(
                                                        'teammembers.team_member',
                                                        'teammembers.staffcode',
                                                        'teamrolehistory.newstaff_code',
                                                    )
                                                    ->first();
                                            @endphp
                                            <td class="textfixed">
                                                {{ $leadpartner->team_member ?? '' }}
                                            </td>
                                            <td>
                                                @if ($leadpartner && $leadpartner->team_member)
                                                    {{ $leadpartner->newstaff_code ?? ($leadpartner->staffcode ?? '') }}
                                                @endif
                                            </td>
                                            <td class="textfixed">
                                                {{ $otherPartner->team_member ?? '' }}
                                            </td>
                                            <td>
                                                @if ($otherPartner && $otherPartner->team_member)
                                                    {{ $otherPartner->newstaff_code ?? ($otherPartner->staffcode ?? '') }}
                                                @endif
                                            </td>
                                            <td>
                                                @foreach (DB::table('assignmentmappings')->leftjoin('assignmentteammappings', 'assignmentteammappings.assignmentmapping_id', 'assignmentmappings.id')->leftjoin('teammembers', 'teammembers.id', 'assignmentteammappings.teammember_id')->where('assignmentmappings.id', $assignmentmappingDatas->id)->get() as $sub)
                                                    @if ($sub->profilepic == null)
                                                        <a class="avatar avatar-xs" data-toggle="tooltip"
                                                            title="{{ $sub->team_member }} ({{ $sub->staffcode }})">
                                                            <img src="{{ url('backEnd/image/dummy.png') }}"
                                                                class="avatar-img rounded-circle" alt="...">
                                                        @else
                                                            <a class="avatar avatar-xs" data-toggle="tooltip"
                                                                title="{{ $sub->team_member }} ({{ $sub->staffcode }})">
                                                                <img src="{{ asset('backEnd/image/teammember/profilepic/' . $sub->profilepic) }}"
                                                                    class="avatar-img rounded-circle" alt="...">
                                                    @endif
                                                @endforeach
                                            </td>
                                            @if (auth()->user()->role_id != 15 && Auth::user()->role_id != 11)
                                                <td>
                                                    <a href="{{ url('/assignmentlist/' . $assignmentmappingDatas->assignmentgenerate_id) }}"
                                                        class="btn btn-info-soft btn-sm"><i class="far fa-edit"></i></a>
                                                </td>
                                            @endif
                                        </tr>
                                    @endforeach
                                </tbody>
                            </table>
                        </div>
                    </div>
                </div>
				
				
				


Controller 222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222
resources\views\backEnd\applyleave\examrequestlist.blade.php


                <div class="tab-content" id="pills-tabContent">
                    <div class="tab-pane fade show active" id="pills-home" role="tabpanel" aria-labelledby="pills-home-tab">
                        @if (session('message'))
                            <div class="alert alert-success">
                                {{ session('message') }}
                            </div>
                        @endif
                        <div class="table-responsive">
                            <table id="examplee" class="table display table-bordered table-striped table-hover">
                                <thead>
                                    <tr>
                                        <th style="display: none;">id</th>
                                        <th>Employee</th>
                                        <th class="textfixed">Staff Code</th>
                                        <th>Status</th>
                                        <th class="textfixed">Leave Type</th>
                                        <th class="textfixed">Date of Request</th>
                                        <th>From</th>
                                        <th>To</th>
                                        <th>Approver</th>
                                        <th class="textfixed">Approver Code</th>
                                        <th>Reason</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    @foreach ($timesheetrequestsDatas as $timesheetrequestsData)
                                        <tr>
                                            @php
                                                $permotioncheck = DB::table('teamrolehistory')
                                                    ->where('teammember_id', auth()->user()->teammember_id)
                                                    ->first();

                                                $datadate = $timesheetrequestsData->created_at
                                                    ? Carbon\Carbon::createFromFormat(
                                                        'Y-m-d H:i:s',
                                                        $timesheetrequestsData->created_at,
                                                    )
                                                    : null;

                                                $permotiondate = null;
                                                if ($permotioncheck) {
                                                    $permotiondate = Carbon\Carbon::createFromFormat(
                                                        'Y-m-d H:i:s',
                                                        $permotioncheck->created_at,
                                                    );
                                                }
                                            @endphp
                                            <td style="display: none;">{{ $timesheetrequestsData->id }}</td>
                                            {{-- <td>{{ $timesheetrequestsData->createdbyauth }}</td> --}}
                                            @if (auth()->user()->role_id == 11)
                                                <td class="textfixed">
                                                    {{-- <a href="{{ route('applyleave.show', $applyleaveDatas->id) }}"> --}}
                                                    <a href="{{ url('examleaverequest', $timesheetrequestsData->id) }}">
                                                        {{ $timesheetrequestsData->createdbyauth ?? '' }}</a>
                                                </td>
                                            @else
                                                <td class="textfixed">{{ $timesheetrequestsData->createdbyauth }}</td>
                                            @endif
                                            {{-- <td>{{ $timesheetrequestsData->teamstaffcode }}</td> --}}
                                            @if ($permotiondate && $datadate && $datadate->greaterThan($permotiondate))
                                                <td>{{ $timesheetrequestsData->newstaff_code }}</td>
                                            @else
                                                <td>{{ $timesheetrequestsData->teamstaffcode }}</td>
                                            @endif
                                            <td>
                                                @if ($timesheetrequestsData->status == 0)
                                                    <span class="badge badge-pill badge-warning">Created</span>
                                                @elseif($timesheetrequestsData->status == 1)
                                                    <span class="badge badge-pill badge-success">Approved</span>
                                                @else
                                                    <span class="badge badge-pill badge-danger">Rejected</span>
                                                @endif
                                            </td>
                                            <td class="textfixed">{{ $timesheetrequestsData->name }}</td>

                                            <td class="textfixed">
                                                <span style="display: none;">
                                                    {{ date('Y-m-d', strtotime($timesheetrequestsData->created_at)) }}
                                                </span>
                                                {{ date('d-m-Y', strtotime($timesheetrequestsData->created_at)) }}
                                            </td>
                                            <td class="textfixed">
                                                {{ date('d-m-Y', strtotime($timesheetrequestsData->from_date)) }}</td>
                                            {{-- <td>{{ date('d-M-Y', strtotime($timesheetrequestsData->to_date)) }}</td> --}}
                                            <td class="textfixed">
                                                {{ $timesheetrequestsData->to_date ? date('d-m-Y', strtotime($timesheetrequestsData->to_date)) : 'NA' }}
                                            </td>

                                            <td class="textfixed">{{ $timesheetrequestsData->team_member }}

                                            </td>
                                            <td>
                                                {{ $timesheetrequestsData->staffcode }}
                                            </td>

                                            <td class="textfixed">{{ $timesheetrequestsData->reason }}</td>
                                            {{-- <td>{{ $timesheetrequestsData->remark }}</td> --}}
                                        </tr>
                                    @endforeach
                                </tbody>
                            </table>
                        </div>
                    </div>

                    <br>
                    <div class="tab-pane fade" id="pills-user" role="tabpanel" aria-labelledby="pills-user-tab">

                        <div class="table-responsive">
                            <table id="teamexamplee" class="table display table-bordered table-striped table-hover">
                                <thead>
                                    <tr>
                                        <th style="display: none;">id</th>
                                        <th>Employee</th>
                                        <th class="textfixed">Staff Code</th>
                                        <th>Status</th>
                                        <th class="textfixed">Leave Type</th>
                                        <th class="textfixed">Date of Request</th>
                                        <th>From</th>
                                        <th>To</th>
                                        <th>Approver</th>
                                        <th class="textfixed">Approver Code</th>
                                        <th>Reason</th>
                                        @if ($hasPendingRequests)
                                            <th>Approved</th>
                                            <th>Reject</th>
                                        @endif
                                    </tr>
                                </thead>
                                <tbody>
                                    @foreach ($myteamtimesheetrequestsDatas as $timesheetrequestsDatass)
                                        <tr>
                                            <td style="display: none;">{{ $timesheetrequestsDatass->id }}</td>

                                            @if (auth()->user()->role_id == 13)
                                                <td class="textfixed">

                                                    <a href="{{ url('examleaverequest', $timesheetrequestsDatass->id) }}">
                                                        {{ $timesheetrequestsDatass->createdbyauth ?? '' }}</a>
                                                </td>
                                            @else
                                                <td class="textfixed">{{ $timesheetrequestsDatass->createdbyauth }}</td>
                                            @endif
                                            <td>{{ $timesheetrequestsDatass->teamstaffcode }} </td>
                                            <td>
                                                @if ($timesheetrequestsDatass->status == 0)
                                                    <span class="badge badge-pill badge-warning">Created</span>
                                                @elseif($timesheetrequestsDatass->status == 1)
                                                    <span class="badge badge-pill badge-success">Approved</span>
                                                @else
                                                    <span class="badge badge-pill badge-danger">Rejected</span>
                                                @endif
                                            </td>
                                            <td class="textfixed">{{ $timesheetrequestsDatass->name }}</td>

                                            <td>{{ date('d-m-Y', strtotime($timesheetrequestsDatass->created_at)) }}</td>

                                            <td class="textfixed">
                                                {{ date('d-m-Y', strtotime($timesheetrequestsDatass->from_date)) }}</td>
                                            {{-- <td class="textfixed">
                                                {{ date('d-m-Y', strtotime($timesheetrequestsDatass->to_date)) }}</td> --}}
                                            <td class="textfixed">
                                                {{ $timesheetrequestsDatass->to_date ? date('d-m-Y', strtotime($timesheetrequestsDatass->to_date)) : 'NA' }}
                                            </td>

                                            <td class="textfixed">{{ $timesheetrequestsDatass->team_member }}
                                            </td>
                                            <td>
                                                {{ $timesheetrequestsDatass->staffcode }}
                                            </td>
                                            <td class="textfixed">{{ $timesheetrequestsDatass->reason }}</td>
                                            {{-- <td>{{ $timesheetrequestsData->remark }}</td> --}}
                                            @if ($hasPendingRequests)
                                                <td>
                                                    @if ($timesheetrequestsDatass->status == 0)
                                                        <form method="post"
                                                            action="{{ route('examleaveapprove', $timesheetrequestsDatass->id) }}"
                                                            enctype="multipart/form-data" style="text-align: center;">
                                                            @method('PATCH')
                                                            @csrf
                                                            <button type="submit" class="btn btn-success"
                                                                style="border-radius: 7px; font-size: 10px; padding: 5px;">
                                                                Approve</button>
                                                            <input type="text" hidden id="example-date-input"
                                                                name="status" value="1" class="form-control">

                                                            <input type="hidden" name="leavetype"
                                                                value="{{ $timesheetrequestsDatass->leavetype }}"
                                                                class="form-control" placeholder="">
                                                        </form>
                                                    @endif
                                                </td>
                                                <td>
                                                    @if ($timesheetrequestsDatass->status == 0)
                                                        <form method="post"
                                                            action="{{ route('examleaveapprove', $timesheetrequestsDatass->id) }}"
                                                            enctype="multipart/form-data" style="text-align: center;">
                                                            @method('PATCH')
                                                            @csrf
                                                            <button
                                                                style="border-radius: 7px; font-size: 10px; padding: 5px;"
                                                                type="submit" class="btn btn-danger">
                                                                Reject</button>
                                                            <input hidden type="text" id="example-date-input"
                                                                name="status" value="2" class="form-control"
                                                                placeholder="Enter Location">
                                                        </form>
                                                    @endif
                                                </td>
                                            @endif
                                        </tr>
                                    @endforeach
                                </tbody>
                            </table>
                        </div>

                    </div>
                </div>






Controller 222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222
resources\views\backEnd\applyleave\examrequestlist.blade.php


<script src="https://code.jquery.com/jquery-3.5.1.js"></script>
<script src="https://cdn.datatables.net/1.10.25/js/jquery.dataTables.min.js"></script>
<script src="https://cdn.datatables.net/buttons/1.7.1/js/dataTables.buttons.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/jszip/3.1.3/jszip.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/pdfmake/0.1.53/pdfmake.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/pdfmake/0.1.53/vfs_fonts.js"></script>
<script src="https://cdn.datatables.net/buttons/1.7.1/js/buttons.html5.min.js"></script>
<script src="https://cdn.datatables.net/buttons/1.7.1/js/buttons.print.min.js"></script>



<script>
    $(document).ready(function() {
        $('#examplee').DataTable({
            "pageLength": 10,
            "dom": '1Bfrtip',
            "order": [
                [5, "desc"]
            ],
            columnDefs: [{
                targets: [1, 2, 3, 4, 6, 7, 8, 9, 10],
                orderable: false
            }],
            buttons: [{
                extend: 'excelHtml5',
                exportOptions: {
                    columns: ':visible'
                },
                text: 'Export to Excel',
                className: 'btn-excel',
            }, ]
        });

        $('.btn-excel').hide();
    });
</script>

<script>
    $(document).ready(function() {
        $('#teamexamplee').DataTable({
            "pageLength": 10,
            "dom": '1Bfrtip',
            "order": [
                [5, "desc"]
            ],
            columnDefs: [{
                targets: [1, 2, 3, 4, 6, 7, 8, 9, 10],
                orderable: false
            }],
            buttons: [{
                extend: 'excelHtml5',
                exportOptions: {
                    columns: ':visible'
                },
                text: 'Export to Excel',
                className: 'btn-excel',
            }, ]
        });

        $('.btn-excel').hide();
    });
</script>






Controller 222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222
resources\views\backEnd\applyleave\examrequestlist.blade.php
add this code on top page

<link href="https://cdn.datatables.net/1.10.25/css/jquery.dataTables.min.css" rel="stylesheet">
<link href="https://cdn.datatables.net/buttons/1.7.1/css/buttons.dataTables.min.css" rel="stylesheet">



Controller 222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222
resources\views\backEnd\applyleave\adminrevertleave.blade.php
	

 <script>
     $(document).ready(function() {
         $('#examplee').DataTable({
             dom: 'Bfrtip',
             "pageLength": 100,
             "order": [
                 [5, "desc"]
             ],
             columnDefs: [{
                 targets: [1, 2, 3, 4, 6, 7, 8, 9, 10],
                 orderable: false
             }],
             buttons: [

                 {
                     extend: 'copyHtml5',
                     exportOptions: {
                         columns: [0, ':visible']
                     }
                 },
                 {
                     extend: 'excelHtml5',
                     filename: 'Leave Revert List',
                     exportOptions: {
                         columns: ':visible',
                         format: {
                             body: function(data, row, column, node) {
                                 // it should be column number 2
                                 if (column === 4) {
                                     // If the data is a date, extract the date without HTML tags
                                     var cleanedText = $(data).text().trim();
                                     var dateParts = cleanedText.split(
                                         '-');
                                     // Assuming the date format is yyyy-mm-dd
                                     if (dateParts.length === 3) {
                                         return dateParts[2] + '-' + dateParts[1] + '-' +
                                             dateParts[0];
                                     }
                                 }
                                 if (column === 0 || column === 2) {
                                     var cleanedText = $(data).text().trim();
                                     return cleanedText;
                                 }
                                 return data;
                             }
                         }
                     },
                 },
                 {
                     extend: 'pdfHtml5',
                     filename: 'Leave Revert List',
                     exportOptions: {
                         columns: [0, 1, 2, 5]
                     }
                 },
                 'colvis'
             ]
         });
     });
 </script>




Controller 222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222
resources\views\backEnd\applyleave\adminrevertleave.blade.php


                     <table id="examplee" class="table display table-bordered table-striped table-hover">
                         <thead>
                             <tr>
                                 <th style="display: none;">id</th>
                                 <th class="textfixed">Employee</th>
                                 <th class="textfixed">Staff Code</th>
                                 <th>Status</th>
                                 <th class="textfixed">Leave Type</th>
                                 <th class="textfixed">Date Of Request</th>
                                 <th>From</th>
                                 <th>To</th>
                                 <th>Approver</th>
                                 <th class="textfixed">Approver Code</th>
                                 <th>Reason</th>
                                 @if ($hasPendingRequests)
                                     <th>Approved</th>
                                     <th>Reject</th>
                                 @endif
                             </tr>
                         </thead>
                         <tbody>
                             {{-- @php
                              dd($timesheetrequestsDatas);
                          @endphp --}}
                             @foreach ($timesheetrequestsDatas as $timesheetrequestsData)
                                 <tr>
                                     @php
                                         $permotioncheck = DB::table('teamrolehistory')
                                             ->where('teammember_id', $timesheetrequestsData->createdby)
                                             ->first();

                                         $datadate = $timesheetrequestsData->created_at
                                             ? Carbon\Carbon::createFromFormat(
                                                 'Y-m-d H:i:s',
                                                 $timesheetrequestsData->created_at,
                                             )
                                             : null;

                                         $permotiondate = null;
                                         if ($permotioncheck) {
                                             $permotiondate = Carbon\Carbon::createFromFormat(
                                                 'Y-m-d H:i:s',
                                                 $permotioncheck->created_at,
                                             );
                                         }

                                     @endphp
                                     <td style="display: none;">{{ $timesheetrequestsData->id }}</td>
                                     {{-- <td>{{ $timesheetrequestsData->createdbyauth }}</td> --}}
                                     @if (auth()->user()->role_id == 11)
                                         <td class="textfixed">
                                             {{-- <a href="{{ route('applyleave.show', $applyleaveDatas->id) }}"> --}}
                                             <a href="{{ url('examleaverequest', $timesheetrequestsData->id) }}">
                                                 {{ $timesheetrequestsData->createdbyauth ?? '' }}</a>
                                         </td>
                                         {{-- <td>{{ $timesheetrequestsData->teamstaffcode }}</td> --}}
                                         @if ($permotioncheck && $datadate && $datadate->greaterThan($permotiondate))
                                             <td>{{ $permotioncheck->newstaff_code }}</td>
                                         @else
                                             <td>{{ $timesheetrequestsData->teamstaffcode }}</td>
                                         @endif
                                     @else
                                         <td>{{ $timesheetrequestsData->createdbyauth }}</td>
                                         {{-- <td>{{ $timesheetrequestsData->teamstaffcode }}</td> --}}
                                     @endif
                                     <td>
                                         @if ($timesheetrequestsData->status == 0)
                                             <span class="badge badge-pill badge-warning">Created</span>
                                         @elseif($timesheetrequestsData->status == 1)
                                             <span class="badge badge-pill badge-success">Approved</span>
                                         @else
                                             <span class="badge badge-pill badge-danger">Rejected</span>
                                         @endif
                                     </td>
                                     <td class="textfixed">{{ $timesheetrequestsData->name }}</td>

                                     {{-- <td class="textfixed">
                                         {{ date('d-m-Y', strtotime($timesheetrequestsData->created_at)) }}</td> --}}

                                     <td>
                                         <span style="display: none;">
                                             {{ date('Y-m-d', strtotime($timesheetrequestsData->created_at)) }}
                                         </span>
                                         {{ date('d-m-Y', strtotime($timesheetrequestsData->created_at)) }}
                                     </td>

                                     <td class="textfixed">
                                         {{ date('d-m-Y', strtotime($timesheetrequestsData->from_date)) }}</td>
                                     <td class="textfixed">
                                         {{ $timesheetrequestsData->to_date ? date('d-m-Y', strtotime($timesheetrequestsData->to_date)) : 'NA' }}
                                     </td>
                                     <td class="textfixed">{{ $timesheetrequestsData->team_member }}

                                     </td>
                                     <td>
                                         {{ $timesheetrequestsData->staffcode }}
                                     </td>
                                     <td class="textfixed">{{ $timesheetrequestsData->reason }}</td>
                                     {{-- <td>{{ $timesheetrequestsData->remark }}</td> --}}
                                     @if ($hasPendingRequests)
                                         <td>
                                             @if ($timesheetrequestsData->status == 0)
                                                 <form method="post"
                                                     action="{{ route('examleaveapprove', $timesheetrequestsData->id) }}"
                                                     enctype="multipart/form-data" style="text-align: center;">
                                                     @method('PATCH')
                                                     @csrf
                                                     <button type="submit" class="btn btn-success"
                                                         style="border-radius: 7px; font-size: 10px; padding: 5px;">
                                                         Approve</button>
                                                     <input type="text" hidden id="example-date-input" name="status"
                                                         value="1" class="form-control">

                                                     <input type="hidden" name="leavetype"
                                                         value="{{ $timesheetrequestsData->leavetype }}"
                                                         class="form-control" placeholder="">
                                                 </form>
                                             @endif
                                         </td>
                                         <td>
                                             @if ($timesheetrequestsData->status == 0)
                                                 <form method="post"
                                                     action="{{ route('examleaveapprove', $timesheetrequestsData->id) }}"
                                                     enctype="multipart/form-data" style="text-align: center;">
                                                     @method('PATCH')
                                                     @csrf
                                                     <button style="border-radius: 7px; font-size: 10px; padding: 5px;"
                                                         type="submit" class="btn btn-danger">
                                                         Reject</button>
                                                     <input hidden type="text" id="example-date-input" name="status"
                                                         value="2" class="form-control" placeholder="Enter Location">
                                                 </form>
                                             @endif
                                         </td>
                                     @endif
                                 </tr>
                             @endforeach
                         </tbody>
                     </table>








Controller 222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222
resources\views\backEnd\timesheet\myteamindex.blade.php

  <script>
      $(document).ready(function() {
          // Define a function for handling filter changes
          function handleFilterChange() {
              var search1 = $('#category1').val();
              var search4 = $('#category4').val();
              var search7 = $('#category7').val();
              var search8 = $('#start').val();
              var search9 = $('#end').val();

              $.ajax({
                  type: 'GET',
                  url: '/filter-dataadmin',
                  data: {
                      partnersearch: search1,
                      totalhours: search4,
                      teamname: search7,
                      start: search8,
                      end: search9
                  },
                  success: function(data) {
                      $('table tbody').html(""); // Clear the table body

                      if (data.length === 0) {
                          $('table tbody').append(
                              '<tr><td colspan="5" class="text-center">No data found</td></tr>');
                      } else {
                          $.each(data, function(index, item) {
                              var url = '/weeklylist?id=' + item.id +
                                  '&teamid=' + item.teamid +
                                  '&partnerid=' + item.partnerid +
                                  '&startdate=' + item.startdate +
                                  '&enddate=' + item.enddate;

                              var formattedDate = moment(item.created_at).format(
                                  'DD-MM-YYYY');
                              var formattedTime = moment(item.created_at).format('hh:mm A');

                              @if (Auth::user()->role_id == 11)
                                  // Add the rows to the table
                                  $('table tbody').append('<tr>' +
                                      '<td class="textfixed"><a href="' + url + '">' +
                                      item.team_member +
                                      '</a></td>' +
                                      '<td>' + (item.newstaff_code ? item.newstaff_code :
                                          item.staffcode) + '</td>' +
                                      '<td>' + item.week + '</td>' +
                                      '<td class="textfixed">' + formattedDate + ' ' +
                                      formattedTime +
                                      '</td>' +
                                      '<td>' + (item.dayscount != 0 ? item.dayscount :
                                          item.totaldays) + '</td>' +
                                      '<td>' + item.totaltime + '</td>' +
                                      '</tr>');
                              @else
                                  // Add the rows to the table
                                  $('table tbody').append('<tr>' +
                                      '<td class="textfixed"><a href="' + url + '">' +
                                      item.team_member +
                                      '</a></td>' +
                                      '<td>' + (item.newstaff_code ? item.newstaff_code :
                                          item.staffcode) + '</td>' +
                                      '<td>' + item.week + '</td>' +
                                      '<td class="textfixed">' + formattedDate + ' ' +
                                      formattedTime +
                                      '</td>' +
                                      '<td>' + item.totaldays + '</td>' +
                                      '<td>' + item.totaltime + '</td>' +
                                      '</tr>');
                              @endif
                          });

                          $('.paging_simple_numbers').remove();
                          $('.dataTables_info').remove();
                      }
                  }
              });
          }

          // Handle change events for all filters
          $('#category1, #category4, #category7').change(handleFilterChange);
          $('#end').change(handleFilterChange);
      });
  </script>






Controller 222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222
resources\views\backEnd\timesheet\myteamindex.blade.php

  <script>
      $(document).ready(function() {
          $('#examplee').DataTable({
              "order": [
                  //   [2, "desc"]
              ],
              searching: false,
              columnDefs: [{
                  targets: [0, 1, 2, 4, 5],
                  orderable: false
              }],
              buttons: []
          });
      });
  </script>



Controller 222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222
resources\views\backEnd\timesheet\myteamindex.blade.php

                      <table id="examplee" class="table display table-bordered table-striped table-hover">
                          <thead>
                              <tr>
                                  <th>Team Name</th>
                                  <th class="textfixed">Staff Code</th>
                                  <th class="textfixed">Period Date ( Monday To Saturday )</th>
                                  <th>Submitted Date</th>
                                  <th class="textfixed">Total Timesheet Filled Day</th>
                                  <th class="textfixed">Total Hour</th>
                              </tr>
                          </thead>
                          <tbody>
                              @foreach ($get_date as $jobDatas)
                                  <tr>
                                      <td class="textfixed"><a
                                              href="{{ url(
                                                  '/weeklylist?' .
                                                      'id=' .
                                                      $jobDatas->id .
                                                      '&&' .
                                                      'teamid=' .
                                                      $jobDatas->teamid .
                                                      '&&' .
                                                      'partnerid=' .
                                                      $jobDatas->partnerid .
                                                      '&&' .
                                                      'startdate=' .
                                                      $jobDatas->startdate .
                                                      '&&' .
                                                      'enddate=' .
                                                      $jobDatas->enddate,
                                              ) }}">{{ $jobDatas->team_member }}</a>
                                      </td>
                                      <td> {{ $jobDatas->staffcode }}</td>
                                      <td><span
                                              style="display: none;">{{ $jobDatas->created_at }}</span>{{ $jobDatas->week }}
                                      </td>
                                      <td class="textfixed"> <span
                                              style="display: none;">{{ $jobDatas->created_at }}</span>{{ date('d-m-Y', strtotime($jobDatas->created_at)) }}
                                          {{ date('h:i A', strtotime($jobDatas->created_at)) }}</td>
                                      {{-- <td>{{ $jobDatas->totaldays }}</td> --}}
                                      @if (Auth::user()->role_id == 11)
                                          @if (isset($jobDatas->dayscount) && $jobDatas->dayscount != 0)
                                              <td>{{ $jobDatas->dayscount }}</td>
                                          @else
                                              <td>{{ $jobDatas->totaldays }}</td>
                                          @endif
                                      @else
                                          <td>{{ $jobDatas->totaldays }}</td>
                                      @endif
                                      <td>{{ $jobDatas->totaltime }}</td>
                                      {{-- <td>{{ $jobDatas->partnername }}</td> --}}
                              @endforeach
                          </tbody>
                      </table>



Blade 222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222
resources\views\backEnd\timesheet\weeklylist.blade.php

                    <table id="examplee" class="table display table-bordered table-striped table-hover">
                        <thead>
                            <tr>
                                <th style="display: none;">id</th>
                                <th>Employee Name</th>
                                <th class="textfixed">Staff Code</th>
                                <th>Date</th>
                                <th>Day</th>
                                <th>Client Name</th>
                                <th class="textfixed">Client Code</th>
                                <th>Assignment Name</th>
                                <th class="textfixed">Assignment Id</th>
                                <th>Work Item</th>
                                <th>Location</th>
                                <th>Partner</th>
                                <th class="textfixed">Partner Code</th>
                                <th>Hour</th>
                                <th>Status</th>
                                @if (Auth::user()->role_id == 11 || Auth::user()->teammember_id != $timesheetData[0]->createdby)
                                    <th>Action</th>
                                @endif
                            </tr>
                        </thead>

                        <tbody>
                            @foreach ($timesheetData as $timesheetDatas)
                                <tr>
                                    @php
                                        $permotioncheck = DB::table('teamrolehistory')
                                            ->where('teammember_id', $timesheetDatas->createdby)
                                            ->first();

                                        $datadate = $timesheetDatas->assignmentcreated
                                            ? Carbon\Carbon::createFromFormat(
                                                'Y-m-d H:i:s',
                                                $timesheetDatas->assignmentcreated,
                                            )
                                            : null;

                                        $permotiondate = null;
                                        if ($permotioncheck) {
                                            $permotiondate = Carbon\Carbon::createFromFormat(
                                                'Y-m-d H:i:s',
                                                $permotioncheck->created_at,
                                            );
                                        }

                                    @endphp

                                    <td style="display: none;">{{ $timesheetDatas->id }}</td>
                                    <td class="textfixed"> {{ $timesheetDatas->team_member ?? '' }} </td>

                                    @if ($permotiondate && $datadate && $datadate->greaterThan($permotiondate))
                                        <td>{{ $permotioncheck->newstaff_code }}</td>
                                    @else
                                        <td>{{ $timesheetDatas->staffcode }}</td>
                                    @endif
                                    <td class="textfixed"> <span style="display: none;">
                                            {{ date('Y-m-d', strtotime($timesheetDatas->date)) }}</span>{{ date('d-m-Y', strtotime($timesheetDatas->date)) }}
                                    </td>
                                    <td class="textfixed">
                                        @if ($timesheetDatas->date != null)
                                            {{ date('l', strtotime($timesheetDatas->date)) }}
                                        @endif
                                    </td>
                                    <td class="textfixed">{{ $timesheetDatas->client_name ?? '' }}
                                    </td>
                                    <td> {{ $timesheetDatas->client_code ?? '' }}
                                    </td>
                                    <td class="textfixed">
                                        {{ $timesheetDatas->assignment_name ?? '' }}
                                        @if ($timesheetDatas->assignmentname != null)
                                            ({{ $timesheetDatas->assignmentname ?? '' }})
                                        @endif
                                    </td>
                                    <td>
                                        {{ $timesheetDatas->assignmentgenerate_id ?? '' }}
                                    </td>
                                    <td class="textfixed"> {{ $timesheetDatas->workitem ?? '' }}</td>
                                    <td class="textfixed">{{ $timesheetDatas->location ?? '' }} </td>
                                    <td class="textfixed"> {{ $timesheetDatas->patnername ?? '' }}
                                    </td>
                                    <td>
                                        {{-- ({{ $timesheetDatas->newstaff_code ?? ($timesheetDatas->patnerstaffcodee ?? '') }}) --}}
                                        @if ($permotiondate && $datadate && $datadate->greaterThan($permotiondate))
                                            {{ $timesheetDatas->newstaff_code }}
                                        @else
                                            {{ $timesheetDatas->patnerstaffcodee ?? '' }}
                                        @endif
                                    </td>
                                    {{-- <td> {{ $timesheetDatas->patnername ?? '' }}
                                (
                                {{ $timesheetDatas->newstaff_code ?? ($timesheetDatas->patnerstaffcodee ?? '') }})
                            </td> --}}
                                    <td>{{ $timesheetDatas->hour ?? '' }}</td>
                                    <td>
                                        @if ($timesheetDatas->status == 0)
                                            <span class="badge badge-pill badge-warning">Saved</span>
                                        @elseif ($timesheetDatas->status == 1 || $timesheetDatas->status == 3)
                                            <span class="badge badge-pill badge-danger">Submit</span>
                                        @else
                                            <span class="badge badge-pill badge-secondary">Rejected</span>
                                        @endif
                                    </td>
                                    @if (Auth::user()->role_id == 11 || Auth::user()->teammember_id != $timesheetDatas->createdby)
                                        <td>
                                            @if ($timesheetDatas->status == 2)
                                                <a href="  {{ url('/timesheet/reject/' . $timesheetDatas->id) }}"
                                                    onclick="return confirm('Are you sure you want to Reject this timesheet?');">
                                                    <button class="btn btn-danger" data-toggle="modal"
                                                        style="height: 16px; width: auto; border-radius: 7px; display: flex; align-items: center; justify-content: center;font-size: 11px;"
                                                        data-target="#requestModal" disabled>Reject</button>
                                                </a>
                                            @else
                                                <a href="  {{ url('/timesheet/reject/' . $timesheetDatas->id) }}"
                                                    onclick="return confirm('Are you sure you want to Reject this timesheet?');">
                                                    <button class="btn btn-danger" data-toggle="modal"
                                                        style="height: 16px; width: auto; border-radius: 7px; display: flex; align-items: center; justify-content: center;font-size: 11px;"
                                                        data-target="#requestModal">Reject</button>
                                                </a>
                                            @endif
                                        </td>
                                    @endif
                                </tr>
                            @endforeach
                        </tbody>
                    </table>



Blade 222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222
resources\views\backEnd\timesheet\weeklylist.blade.php





<script src="https://code.jquery.com/jquery-3.5.1.js"></script>
<script src="https://cdn.datatables.net/1.10.25/js/jquery.dataTables.min.js"></script>
<script src="https://cdn.datatables.net/buttons/1.7.1/js/dataTables.buttons.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/jszip/3.1.3/jszip.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/pdfmake/0.1.53/pdfmake.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/pdfmake/0.1.53/vfs_fonts.js"></script>
<script src="https://cdn.datatables.net/buttons/1.7.1/js/buttons.html5.min.js"></script>
<script src="https://cdn.datatables.net/buttons/1.7.1/js/buttons.print.min.js"></script>



<script>
    $(document).ready(function() {
        $('#examplee').DataTable({
            "order": [
                [3, "desc"]
            ],
            searching: false,
            columnDefs: [{
                @if (Auth::user()->role_id == 14)
                    targets: [0, 1, 2, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14],
                @else
                    targets: [0, 1, 2, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15],
                @endif
                orderable: false
            }],
            buttons: []
        });
    });
</script>





done


Blade 222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222
resources\views\backEnd\timesheet\rejectedlistteam.blade.php


                    <table id="examplee" class="table display table-bordered table-striped table-hover">
                        <thead>

                            <tr>
                                <th style="display: none;">id</th>
                                <th>Employee Name</th>
                                <th class="textfixed">Employee Code</th>
                                <th>Date</th>
                                <th>Day</th>
                                <th>Client Name</th>
                                <th class="textfixed">Client Code</th>
                                <th>Assignment Name</th>
                                <th>Work Item</th>
                                <th>Location</th>
                                <th>Partner</th>
                                <th class="textfixed">Partner Code</th>
                                <th class="textfixed">Total Hour</th>
                                <th>Status</th>
                                @if (Auth::user()->role_id == 14 || Auth::user()->role_id == 15)
                                    <th>Action</th>
                                @endif


                            </tr>
                        </thead>
                        <tbody>

                            {{-- @php
                                dd(Auth::user());
                            @endphp --}}
                            @foreach ($timesheetData as $timesheetDatas)
                                <tr>
                                    @php
                                        $timeid = DB::table('timesheetusers')
                                            ->where('timesheetusers.timesheetid', $timesheetDatas->timesheetid)
                                            ->first();

                                        $client_id = DB::table('timesheetusers')
                                            ->leftjoin('clients', 'clients.id', 'timesheetusers.client_id')
                                            ->leftjoin('assignments', 'assignments.id', 'timesheetusers.assignment_id')
                                            ->leftjoin('teammembers', 'teammembers.id', 'timesheetusers.partner')
                                            ->where('timesheetusers.timesheetid', $timesheetDatas->timesheetid)
                                            ->select(
                                                'clients.client_name',
                                                'clients.client_code',
                                                'timesheetusers.hour',
                                                'timesheetusers.location',
                                                'timesheetusers.*',
                                                'assignments.assignment_name',
                                                'billable_status',
                                                'workitem',
                                                'teammembers.team_member',
                                                'teammembers.staffcode',
                                                'timesheetusers.timesheetid',
                                            )
                                            ->get();
                                        // dd($client_id);
                                        $total = DB::table('timesheetusers')

                                            ->where('timesheetusers.timesheetid', $timesheetDatas->timesheetid)
                                            ->sum('hour');

                                        $dates = date('l', strtotime($timesheetDatas->date));
                                    @endphp
                                    <td style="display: none;">{{ $timesheetDatas->id }}</td>

                                    <td class="textfixed">
                                        {{ $timesheetDatas->team_member ?? '' }} </td>
                                    <td>
                                        {{ $timesheetDatas->staffcode ?? '' }} </td>

                                    {{-- <td class="textfixed">{{ date('d-m-Y', strtotime($timesheetDatas->date)) }}
                                    </td> --}}

                                    <td class="textfixed">
                                        <span style="display: none;">
                                            {{ date('Y-m-d', strtotime($timesheetDatas->date)) }}
                                        </span>
                                        {{ date('d-m-Y', strtotime($timesheetDatas->date)) }}
                                    </td>

                                    <td class="textfixed">
                                        @if ($timesheetDatas->date != null)
                                            {{ $dates ?? '' }}
                                        @endif
                                    </td>
                                    <span style="font-size: 13px;">
                                        <td class="textfixed">
                                            @foreach ($client_id as $item)
                                                {{ $item->client_name ?? '' }}
                                                @if ($item->client_name != 0)
                                                    ,
                                                @endif
                                            @endforeach
                                        </td>
                                        <td>
                                            @foreach ($client_id as $item)
                                                {{ $item->client_code ?? '' }}
                                                @if ($item->client_name != 0)
                                                    ,
                                                @endif
                                            @endforeach
                                        </td>
                                        <td class="textfixed">
                                            @foreach ($client_id as $item)
                                                {{ $item->assignment_name ?? '' }}@if ($item->assignment_name != null)
                                                    ,
                                                @endif
                                            @endforeach
                                        </td>

                                        <td class="textfixed">
                                            @foreach ($client_id as $item)
                                                {{ $item->workitem ?? '' }}@if ($item->workitem != null)
                                                    ,
                                                @endif
                                            @endforeach
                                        </td>

                                        <td class="textfixed">
                                            @foreach ($client_id as $item)
                                                {{ $item->location ?? '' }}@if ($item->location != null)
                                                    ,
                                                @endif
                                            @endforeach
                                        </td>
                                        <td class="textfixed">
                                            @foreach ($client_id as $item)
                                                {{ $item->team_member ?? '' }} @if ($item->team_member != null)
                                                    ,
                                                @endif
                                            @endforeach
                                        </td>
                                        <td>
                                            @foreach ($client_id as $item)
                                                {{ $item->staffcode ?? '' }} @if ($item->staffcode != null)
                                                    ,
                                                @endif
                                            @endforeach
                                        </td>


                                        <td>{{ $total }}</td>

                                        <td>
                                            {{-- @php
                                                dd($client_id);
                                            @endphp --}}
                                            @foreach ($client_id as $item)
                                                @if ($item->status == 0)
                                                    <span class="badge badge-pill badge-warning">saved</span>
                                                @elseif ($item->status == 1)
                                                    <span class="badge badge-pill badge-danger">submit</span>
                                                @elseif ($item->status == 3)
                                                    <span class="badge badge-pill badge-info">Submitted</span>
                                                @else
                                                    <span class="badge badge-pill badge-secondary">Rejected</span>
                                                @endif
                                            @endforeach
                                        </td>

                                        @if (Auth::user()->role_id == 14 || Auth::user()->role_id == 15)
                                            <td>
                                                @foreach ($client_id as $item)
                                                    @if ($item->status == 2)
                                                        <a href="{{ url('/timesheetreject/edit/' . $item->timesheetid) }}"
                                                            class="btn btn-info-soft btn-sm"><i class="far fa-edit"></i></a>
                                                    @endif
                                                @endforeach
                                            </td>
                                        @endif

                                </tr>
                                <div class="modal fade" id="exampleModal12" tabindex="-1" role="dialog"
                                    aria-labelledby="exampleModalLabel4" aria-hidden="true">
                                    <div class="modal-dialog" role="document">
                                        <div class="modal-content">
                                            <form id="detailsForm" method="post" action="{{ url('/timesheet/submit') }}"
                                                enctype="multipart/form-data" style="margin-bottom: 0px;">
                                                @csrf
                                                <div class="modal-header" style="background:#37A000;color:white; m-5">
                                                    <h5 class="modal-title font-weight-600" id="exampleModalLabel4">Update
                                                        Timesheet</h5>
                                                    <div>
                                                        <ul>
                                                            @foreach ($errors->all() as $e)
                                                                <li style="color:red;">{{ $e }}</li>
                                                            @endforeach
                                                        </ul>
                                                    </div>
                                                    <button style="color: white" type="button" class="close"
                                                        data-dismiss="modal" aria-label="Close">
                                                        <span aria-hidden="true">&times;</span>
                                                    </button>
                                                </div>
                                                <div class="modal-body">

                                                    <div class="row row-sm">
                                                        {{-- <label for="name" class="col-sm-3 col-form-label font-weight-600">Name :</label> --}}
                                                        <div class="col-sm-12">
                                                            <input type="text" readonly id="teamname"
                                                                class="form-control" placeholder="Enter Name">
                                                            <input hidden class="form-control" id="timesheetid"
                                                                name="timesheetid" type="text">
                                                        </div>
                                                    </div>

                                                    <br>
                                                    @php

                                                        $clientlist = DB::table('clients')
                                                            ->select('clients.client_name', 'clients.id')
                                                            ->get();
                                                        $partner = DB::table('teammembers')
                                                            ->select('teammembers.team_member', 'teammembers.id')
                                                            ->get();
                                                        // dd($partner);
                                                        $assignmentlist = DB::table('assignments')
                                                            ->select('assignments.assignment_name', 'assignments.id')
                                                            ->get();
                                                    @endphp
                                                    <br>

                                                    <div class="row row-sm">
                                                        {{-- <label for="name" class="col-sm-3 col-form-label font-weight-600">Name :</label> --}}
                                                        <div class="col-sm-6">
                                                            <label for="">Select Client</label>
                                                            <select class="form-control" name="client_id" id="client_id">
                                                                <option value="">Select Client</option>
                                                                @foreach ($clientlist as $city)
                                                                    <option value="{{ $city->id }}">
                                                                        {{ $city->client_name }}</option>
                                                                @endforeach
                                                            </select>
                                                        </div>
                                                        {{-- <label for="name" class="col-sm-3 col-form-label font-weight-600">Name :</label> --}}
                                                        <div class="col-sm-6">
                                                            <label for="">Select Assignment</label>
                                                            <select class="form-control" name="assignment_id"
                                                                id="assignment_id">
                                                                <option value="">Select Assignment</option>
                                                                @foreach ($assignmentlist as $assignmentlistData)
                                                                    <option value="{{ $assignmentlistData->id }}">
                                                                        {{ $assignmentlistData->assignment_name }}</option>
                                                                @endforeach
                                                            </select>
                                                        </div>
                                                    </div>

                                                    <br>

                                                    <div class="row row-sm">
                                                        {{-- <label for="name" class="col-sm-3 col-form-label font-weight-600">Name :</label> --}}
                                                        <div class="col-sm-6">
                                                            <label for="">Select Partner</label>
                                                            <select class="form-control" name="partner" id="partner">
                                                                <option value="">Select Partner</option>
                                                                @foreach ($partner as $partnerData)
                                                                    <option value="{{ $partnerData->id }}">
                                                                        {{ $partnerData->team_member }}</option>
                                                                @endforeach
                                                            </select>
                                                        </div>
                                                        <div class="col-sm-6">
                                                            <label for="">Employee Name</label>
                                                            <input required type="text" name="workitem" id="workitem"
                                                                class="form-control" placeholder="Enter Employee Name">
                                                        </div>
                                                    </div>
                                                    <br>
                                                    <div class="row row-sm">
                                                        <div class="col-sm-6">
                                                            <label for="">Location</label>
                                                            <input required type="text" name="location" id="location"
                                                                class="form-control" placeholder="Enter Location">
                                                        </div>
                                                        <div class="col-sm-6">
                                                            <label for="">Work Item</label>
                                                            <input required type="text" name="totalhour"
                                                                id="totalhour" class="form-control"
                                                                placeholder="Enter Name">
                                                        </div>
                                                    </div>
                                                    <br>
                                                    <div class="row row-sm">
                                                        <div class="col-sm-6">
                                                            <label for="">Total Hour</label>
                                                            <input required type="text" name="location" id="location"
                                                                class="form-control" placeholder="Enter Location">
                                                        </div>
                                                    </div>
                                                    <br>

                                                    <div class="modal-footer">
                                                        <button type="button" class="btn btn-danger"
                                                            data-dismiss="modal">Close</button>
                                                        <button type="submit" class="btn btn-success">Submit</button>
                                                    </div>
                                            </form>

                                        </div>
                                    </div>
                                </div>



                                {{-- 2222222222222222222 --}}
                            @endforeach
                        </tbody>
                    </table>






Blade 222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222
resources\views\backEnd\timesheet\rejectedlistteam.blade.php

<script>
    $(document).ready(function() {
        $('#examplee').DataTable({
            "order": [
                [3, "desc"]
            ],
            //   searching: false,
            columnDefs: [{
                targets: [0, 1, 2, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13],
                orderable: false
            }],
            buttons: []
        });
    });
</script>





Blade 222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222
resources\views\backEnd\timesheet\rejectedlist.blade.php

                                        <table id="examplee" class="table display table-bordered table-striped table-hover">
                        <thead>
                            <tr>
                                <th style="display: none;">id</th>
                                <th>Employee Name</th>
                                <th class="textfixed">Staff Code</th>
                                <th>Date</th>
                                <th>Day</th>
                                <th>Client Name</th>
                                <th class="textfixed">Client Code</th>
                                <th>Assignment Name</th>
                                <th>Assignment Id</th>

                                <th>Work Item</th>
                                <th>Location</th>
                                <th>Partner</th>
                                <th class="textfixed">Partner Code</th>
                                {{-- <th>Hour</th> --}}
                                <th>Total Hour</th>
                                <th>Status</th>

                                @if (Auth::user()->role_id == 13 || Auth::user()->role_id == 14 || Auth::user()->role_id == 15)
                                    <th>Action</th>
                                @endif


                            </tr>
                        </thead>
                        <tbody>
                            @foreach ($timesheetData as $timesheetDatas)
                                <tr>

                                    @php
                                        $timeid = DB::table('timesheetusers')
                                            ->where('timesheetusers.timesheetid', $timesheetDatas->timesheetid)
                                            ->first();

                                        $client_id = DB::table('timesheetusers')
                                            ->leftjoin('clients', 'clients.id', 'timesheetusers.client_id')
                                            ->leftjoin('assignments', 'assignments.id', 'timesheetusers.assignment_id')
                                            ->leftjoin('teammembers', 'teammembers.id', 'timesheetusers.partner')
                                            ->leftJoin(
                                                'teamrolehistory',
                                                'teamrolehistory.teammember_id',
                                                '=',
                                                'teammembers.id',
                                            )
                                            ->where('timesheetusers.timesheetid', $timesheetDatas->timesheetid)
                                            ->select(
                                                'clients.client_name',
                                                'clients.client_code',
                                                'timesheetusers.hour',
                                                'timesheetusers.location',
                                                'timesheetusers.*',
                                                'assignments.assignment_name',
                                                'billable_status',
                                                'workitem',
                                                'teammembers.team_member',
                                                'teammembers.staffcode',
                                                'timesheetusers.timesheetid',
                                                'teamrolehistory.newstaff_code',
                                            )
                                            ->get();
                                        // dd($client_id);
                                        $total = DB::table('timesheetusers')

                                            ->where('timesheetusers.timesheetid', $timesheetDatas->timesheetid)
                                            ->sum('hour');

                                        $dates = date('l', strtotime($timesheetDatas->date));

                                        $assignmentcheck = DB::table('assignmentbudgetings')
                                            ->where('assignmentgenerate_id', $timesheetDatas->assignmentgenerate_id)
                                            ->first();

                                        $permotioncheck = DB::table('teamrolehistory')
                                            ->where('teammember_id', $timesheetDatas->createdby)
                                            ->first();

                                        //shshid client
                                        // $datadate = Carbon\Carbon::createFromFormat('Y-m-d', $timesheetDatas->date);
                                        $datadate = $assignmentcheck
                                            ? Carbon\Carbon::createFromFormat(
                                                'Y-m-d H:i:s',
                                                $assignmentcheck->created_at,
                                            )
                                            : null;

                                        $permotiondate = null;
                                        if ($permotioncheck) {
                                            $permotiondate = Carbon\Carbon::createFromFormat(
                                                'Y-m-d H:i:s',
                                                $permotioncheck->created_at,
                                            );
                                        }
                                    @endphp
                                    <td style="display: none;">{{ $timesheetDatas->id }}</td>

                                    <td class="textfixed">
                                        {{ $timesheetDatas->team_member ?? '' }} </td>
                                    @if ($permotioncheck && $datadate && $datadate->greaterThan($permotiondate))
                                        <td>{{ $permotioncheck->newstaff_code }}</td>
                                    @else
                                        <td>{{ $timesheetDatas->staffcode }}</td>
                                    @endif
                                    {{-- <td class="textfixed">{{ date('d-m-Y', strtotime($timesheetDatas->date)) }}
                                    </td> --}}
                                    <td class="textfixed">
                                        <span style="display: none;">
                                            {{ date('Y-m-d', strtotime($timesheetDatas->date)) }}
                                        </span>
                                        {{ date('d-m-Y', strtotime($timesheetDatas->date)) }}
                                    </td>

                                    <td class="textfixed">
                                        @if ($timesheetDatas->date != null)
                                            {{ $dates ?? '' }}
                                        @endif
                                    </td>
                                    <span style="font-size: 13px;">
                                        <td class="textfixed">
                                            @foreach ($client_id as $item)
                                                {{ $item->client_name ?? '' }}
                                                @if ($item->client_name != 0)
                                                    ,
                                                @endif
                                            @endforeach
                                        </td>
                                        <td class="textfixed">
                                            @foreach ($client_id as $item)
                                                {{ $item->client_code ?? '' }}
                                                @if ($item->client_name != 0)
                                                    ,
                                                @endif
                                            @endforeach
                                        </td>
                                        <td class="textfixed">
                                            @foreach ($client_id as $item)
                                                {{ $item->assignment_name ?? '' }}
                                                @if ($item->assignment_name != null)
                                                    ,
                                                @endif
                                            @endforeach
                                        </td>
                                        <td class="textfixed">
                                            @foreach ($client_id as $item)
                                                {{ $item->assignmentgenerate_id ?? '' }}
                                                @if ($item->assignment_name != null)
                                                    ,
                                                @endif
                                            @endforeach
                                        </td>

                                        <td class="textfixed">
                                            @foreach ($client_id as $item)
                                                {{ $item->workitem ?? '' }}@if ($item->workitem != null)
                                                    ,
                                                @endif
                                            @endforeach
                                        </td>

                                        <td class="textfixed">
                                            @foreach ($client_id as $item)
                                                {{ $item->location ?? '' }}@if ($item->location != null)
                                                    ,
                                                @endif
                                            @endforeach
                                        </td>
                                        <td class="textfixed">
                                            @foreach ($client_id as $item)
                                                {{ $item->team_member ?? '' }}
                                                @if ($item->team_member != null)
                                                    ,
                                                @endif
                                            @endforeach
                                        </td>
                                        <td class="textfixed">
                                            @foreach ($client_id as $item)
                                                @if ($permotioncheck && $datadate && $datadate->greaterThan($permotiondate))
                                                    {{ $item->newstaff_code }}
                                                @else
                                                    {{ $item->staffcode ?? '' }}
                                                @endif
                                                @if ($item->team_member != null)
                                                    ,
                                                @endif
                                            @endforeach
                                        </td>
                                        <td>{{ $total }}</td>
                                        <td class="textfixed">
                                            {{-- @php
                                            dd($client_id);
                                        @endphp --}}
                                            @foreach ($client_id as $item)
                                                @if ($item->status == 0)
                                                    <span class="badge badge-pill badge-warning">saved</span>
                                                @elseif ($item->status == 1)
                                                    <span class="badge badge-pill badge-danger">submit</span>
                                                @elseif ($item->status == 3)
                                                    <span class="badge badge-pill badge-info">Submitted</span>
                                                @else
                                                    <span class="badge badge-pill badge-secondary">Rejected</span>
                                                @endif
                                            @endforeach
                                        </td>

                                        @if (Auth::user()->role_id == 13 || Auth::user()->role_id == 14 || Auth::user()->role_id == 15)
                                            <td>
                                                @foreach ($client_id as $item)
                                                    @if ($item->status == 2)
                                                        <a href="{{ url('/timesheetreject/edit/' . $item->timesheetid) }}"
                                                            class="btn btn-info-soft btn-sm"><i class="far fa-edit"></i></a>
                                                    @endif
                                                @endforeach
                                            </td>
                                        @endif

                                </tr>
                                <div class="modal fade" id="exampleModal12" tabindex="-1" role="dialog"
                                    aria-labelledby="exampleModalLabel4" aria-hidden="true">
                                    <div class="modal-dialog" role="document">
                                        <div class="modal-content">
                                            <form id="detailsForm" method="post" action="{{ url('/timesheet/submit') }}"
                                                enctype="multipart/form-data" style="margin-bottom: 0px;">
                                                @csrf
                                                <div class="modal-header" style="background:#37A000;color:white; m-5">
                                                    <h5 class="modal-title font-weight-600" id="exampleModalLabel4">Update
                                                        Timesheet</h5>
                                                    <div>
                                                        <ul>
                                                            @foreach ($errors->all() as $e)
                                                                <li style="color:red;">{{ $e }}</li>
                                                            @endforeach
                                                        </ul>
                                                    </div>
                                                    <button style="color: white" type="button" class="close"
                                                        data-dismiss="modal" aria-label="Close">
                                                        <span aria-hidden="true">&times;</span>
                                                    </button>
                                                </div>
                                                <div class="modal-body">

                                                    <div class="row row-sm">
                                                        {{-- <label for="name" class="col-sm-3 col-form-label font-weight-600">Name :</label> --}}
                                                        <div class="col-sm-12">
                                                            <input type="text" readonly id="teamname"
                                                                class="form-control" placeholder="Enter Name">
                                                            <input hidden class="form-control" id="timesheetid"
                                                                name="timesheetid" type="text">
                                                        </div>
                                                    </div>

                                                    <br>
                                                    @php

                                                        $clientlist = DB::table('clients')
                                                            ->select('clients.client_name', 'clients.id')
                                                            ->get();
                                                        $partner = DB::table('teammembers')
                                                            ->select('teammembers.team_member', 'teammembers.id')
                                                            ->get();
                                                        // dd($partner);
                                                        $assignmentlist = DB::table('assignments')
                                                            ->select('assignments.assignment_name', 'assignments.id')
                                                            ->get();
                                                    @endphp
                                                    <br>

                                                    <div class="row row-sm">
                                                        {{-- <label for="name" class="col-sm-3 col-form-label font-weight-600">Name :</label> --}}
                                                        <div class="col-sm-6">
                                                            <label for="">Select Client</label>
                                                            <select class="form-control" name="client_id" id="client_id">
                                                                <option value="">Select Client</option>
                                                                @foreach ($clientlist as $city)
                                                                    <option value="{{ $city->id }}">
                                                                        {{ $city->client_name }}</option>
                                                                @endforeach
                                                            </select>
                                                        </div>
                                                        {{-- <label for="name" class="col-sm-3 col-form-label font-weight-600">Name :</label> --}}
                                                        <div class="col-sm-6">
                                                            <label for="">Select Assignment</label>
                                                            <select class="form-control" name="assignment_id"
                                                                id="assignment_id">
                                                                <option value="">Select Assignment</option>
                                                                @foreach ($assignmentlist as $assignmentlistData)
                                                                    <option value="{{ $assignmentlistData->id }}">
                                                                        {{ $assignmentlistData->assignment_name }}</option>
                                                                @endforeach
                                                            </select>
                                                        </div>
                                                    </div>

                                                    <br>

                                                    <div class="row row-sm">
                                                        {{-- <label for="name" class="col-sm-3 col-form-label font-weight-600">Name :</label> --}}
                                                        <div class="col-sm-6">
                                                            <label for="">Select Partner</label>
                                                            <select class="form-control" name="partner" id="partner">
                                                                <option value="">Select Partner</option>
                                                                @foreach ($partner as $partnerData)
                                                                    <option value="{{ $partnerData->id }}">
                                                                        {{ $partnerData->team_member }}</option>
                                                                @endforeach
                                                            </select>
                                                        </div>
                                                        <div class="col-sm-6">
                                                            <label for="">Employee Name</label>
                                                            <input required type="text" name="workitem" id="workitem"
                                                                class="form-control" placeholder="Enter Employee Name">
                                                        </div>
                                                    </div>
                                                    <br>
                                                    <div class="row row-sm">
                                                        <div class="col-sm-6">
                                                            <label for="">Location</label>
                                                            <input required type="text" name="location" id="location"
                                                                class="form-control" placeholder="Enter Location">
                                                        </div>
                                                        <div class="col-sm-6">
                                                            <label for="">Work Item</label>
                                                            <input required type="text" name="totalhour"
                                                                id="totalhour" class="form-control"
                                                                placeholder="Enter Name">
                                                        </div>
                                                    </div>
                                                    <br>
                                                    <div class="row row-sm">
                                                        <div class="col-sm-6">
                                                            <label for="">Total Hour</label>
                                                            <input required type="text" name="location" id="location"
                                                                class="form-control" placeholder="Enter Location">
                                                        </div>
                                                    </div>
                                                    <br>

                                                    <div class="modal-footer">
                                                        <button type="button" class="btn btn-danger"
                                                            data-dismiss="modal">Close</button>
                                                        <button type="submit" class="btn btn-success">Submit</button>
                                                    </div>
                                            </form>

                                        </div>
                                    </div>
                                </div>
                                {{-- 2222222222222222222 --}}
                            @endforeach
                        </tbody>
                    </table>




Blade 222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222
resources\views\backEnd\timesheet\rejectedlist.blade.php



<script>
    $(document).ready(function() {
        $('#examplee').DataTable({
            "order": [
                [3, "desc"]
            ],
            //   searching: false,
            columnDefs: [{

                @if (Auth::user()->role_id == 11)
                    targets: [0, 1, 2, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14],
                @else
                    targets: [0, 1, 2, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15],
                @endif
                orderable: false
            }],
            buttons: []
        });
    });
</script>





Blade 222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222
resources\views\backEnd\article\index.blade.php

                    <table id="examplee" class="table display table-bordered table-striped table-hover">
                        <thead>
                            <tr>
                                <th>Subject</th>
                                <th>Related To</th>
                                <th>File</th>
                                <th>Date</th>
                                <th>Show</th>
                                {{-- <th>Created by</th>
                                <th>Edit</th>
                                <th>Delete</th> --}}
                            </tr>
                        </thead>
                        <tbody>
                            @foreach ($articleDatas as $articleData)
                                <tr>
                                    <td>
                                        <a target="blank" href="{{ asset('backEnd/image/article/' . $articleData->file) }}">
                                            {{ $articleData->subject }}
                                        </a>
                                    </td>
                                    <td class="textfixed">{{ $articleData->name }}</td>
                                    <td class="textfixed">{{ $articleData->file }}</td>
                                    <td class="textfixed">{{ date('d-m-Y', strtotime($articleData->created_at)) }}</td>
                                    <td>
                                        <a href="{{ url('/article-view', $articleData->id) }}"
                                            class="btn btn-success-soft btn-sm">
                                            <i class="far fa-eye"></i>
                                        </a>
                                    </td>
                                    {{-- 
                                    <td>{{ $articleData->team_member }}</td>
                                    <td> <a href="{{ route('article.edit', $articleData->id) }}"
                                            class="btn btn-info-soft btn-sm"><i class="far fa-edit"></i></a></td>
                                    <a href="http://kgsomani.test/clientdocument/destroy/48"
                                        onclick="return confirm('Are you sure you want to delete this item?');"></a>
                                    <td>
                                        <form action="{{ route('article.destroy', $articleData->id) }}" method="POST">
                                            <input type="hidden" name="_method" value="DELETE">
                                            <input type="hidden" name="_token" value="{{ csrf_token() }}">
                                            <button onclick="return confirm('Are you sure you want to delete this item?');"
                                                class="btn btn-danger-soft btn-sm"><i class="far fa-trash-alt"></i></button>
                                        </form>
                                    </td> --}}

                                </tr>
                            @endforeach
                        </tbody>
                    </table>








Blade 222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222
resources\views\backEnd\notification\index.blade.php

<script>
    $(document).ready(function() {
        $('#examplee').DataTable({
            dom: 'Bfrtip',
            "order": [
                [2, "desc"]
            ],

            columnDefs: [{
                @if (Auth::user()->role_id == 11)
                    targets: [0, 1, 3],
                @else
                    targets: [0, 1],
                @endif
                orderable: false
            }],

            buttons: [{
                    extend: 'copyHtml5',
                    exportOptions: {
                        columns: [0, ':visible']
                    }
                },
                {
                    extend: 'excelHtml5',
                    filename: 'Notification',
                    exportOptions: {
                        columns: ':visible',
                        format: {
                            body: function(data, row, column, node) {
                                // it should be column number 2
                                if (column === 1) {
                                    // If the data is a date, extract the date without HTML tags
                                    var cleanedText = $(data).text().trim();
                                    var dateParts = cleanedText.split(
                                        '-');
                                    // Assuming the date format is yyyy-mm-dd
                                    if (dateParts.length === 3) {
                                        return dateParts[2] + '-' + dateParts[1] + '-' +
                                            dateParts[0];
                                    }
                                }
                                if (column === 0) {
                                    var cleanedText = $(data).text().trim();
                                    return cleanedText;
                                }
                                if (column === 2) {
                                    var cleanedText = $(data).text().trim();
                                    return cleanedText;
                                }
                                return data;
                            }
                        }
                    },
                },
                {
                    extend: 'pdfHtml5',
                    filename: 'Notification',
                    exportOptions: {
                        columns: [1, 2, 3]
                    }
                },
                'colvis'
            ]
        });
    });
</script>




Blade 222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222
resources\views\backEnd\notification\index.blade.php

                    <table id="examplee" class="display nowrap">
                        <thead>
                            <tr>
                                <th style="display: none;">id</th>
                                <th>Title</th>
                                <th>Date</th>
                                @if (Auth::user()->role_id == 18 || Auth::user()->role_id == 11)
                                    <th>Target</th>
                                @endif
                            </tr>
                        </thead>
                        <tbody>
                            @foreach ($notificationDatas as $notificationData)
                                <tr>
                                    <td style="display: none;">{{ $notificationData->id }}</td>
                                    <td>
                                        <a href="{{ url('/notification/' . $notificationData->id) }}"
                                            style="color: {{ $notificationData->readstatus == 1 ? 'Black' : 'red' }}">
                                            {{ $notificationData->title }}
                                        </a>
                                    </td>
                                    {{-- <td>{{ date('d-m-Y', strtotime($notificationData->created_at)) }}</td> --}}
                                    <td>
                                        <span style="display: none;">
                                            {{ date('Y-m-d', strtotime($notificationData->created_at)) }}
                                        </span>
                                        {{ date('d-m-Y', strtotime($notificationData->created_at)) }}
                                    </td>
                                    @if (Auth::user()->role_id == 18 || Auth::user()->role_id == 11)
                                        <td>
                                            @if ($notificationData->targettype == 1)
                                                <span>Individual</span>
                                            @elseif($notificationData->targettype == 2)
                                                <span>All Member</span>
                                            @else
                                                <span>Partner</span>
                                            @endif
                                        </td>
                                    @endif

                                </tr>
                            @endforeach
                        </tbody>
                    </table>
					


Blade 222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222
resources\views\backEnd\assignmentmapping\yearwisepartnerlist.blade.php


                            <table class="table display table-bordered table-striped table-hover examplee">
                                <thead>
                                    <tr>
                                        <th class="textfixed">Assignment Id</th>
                                        <th>Assignment</th>
                                        <th>Client</th>
                                        <th class="textfixed">Client Code</th>
                                        <th>Deadline</th>
                                        <th>Period End</th>
                                        <th>Assigned Partner</th>
                                        <th class="textfixed">Assignedpartner Code</th>
                                        <th class="textfixed">Other Partner</th>
                                        <th class="textfixed">Otherpartner Code</th>
                                        <th>Teammember</th>
                                        @if (auth()->user()->role_id != 15 && Auth::user()->role_id != 11)
                                            <th>Edit</th>
                                        @endif
                                    </tr>
                                </thead>

                                <tbody>
                                    @foreach ($otherassigned as $assignmentmappingDatas)
                                        <tr>

                                            <td> <a
                                                    href="{{ url('/viewassignment/' . $assignmentmappingDatas->assignmentgenerate_id) }}">{{ $assignmentmappingDatas->assignmentgenerate_id }}</a>
                                            </td>
                                            <td class="textfixed">
                                                {{ $assignmentmappingDatas->assignment_name }} @if ($assignmentmappingDatas->assignmentname != null)
                                                    ({{ $assignmentmappingDatas->assignmentname }})
                                                @endif
                                            </td>
                                            <td class="textfixed"> {{ $assignmentmappingDatas->client_name }}</td>
                                            <td> {{ $assignmentmappingDatas->client_code }}</td>
                                            <td class="textfixed">
                                                @if ($assignmentmappingDatas->duedate != null)
                                                    {{ date('d-m-Y', strtotime($assignmentmappingDatas->duedate)) }}
                                                @endif
                                            </td>
                                            <td class="textfixed">
                                                @if ($assignmentmappingDatas->periodend != null)
                                                    {{ date('d-m-Y', strtotime($assignmentmappingDatas->periodend)) }}
                                                @endif
                                            </td>
                                            {{-- <td>{{ App\Models\Teammember::select('team_member')->where('id', $assignmentmappingDatas->leadpartner)->first()->team_member ?? '' }}
                                            ({{ App\Models\Teammember::select('team_member', 'staffcode')->where('id', $assignmentmappingDatas->leadpartner)->first()->staffcode ?? '' }})
                                        </td>
                                        <td>{{ App\Models\Teammember::select('team_member')->where('id', $assignmentmappingDatas->otherpartner)->first()->team_member ?? '' }}
                                            ({{ App\Models\Teammember::select('team_member', 'staffcode')->where('id', $assignmentmappingDatas->otherpartner)->first()->staffcode ?? '' }})
                                        </td> --}}
                                            @php
                                                $leadpartner = DB::table('teammembers')
                                                    ->leftJoin(
                                                        'teamrolehistory',
                                                        'teamrolehistory.teammember_id',
                                                        '=',
                                                        'teammembers.id',
                                                    )
                                                    ->where('teammembers.id', $assignmentmappingDatas->leadpartner)
                                                    ->select(
                                                        'teammembers.team_member',
                                                        'teammembers.staffcode',
                                                        'teamrolehistory.newstaff_code',
                                                    )
                                                    ->first();

                                                $otherPartner = DB::table('teammembers')
                                                    ->leftJoin(
                                                        'teamrolehistory',
                                                        'teamrolehistory.teammember_id',
                                                        '=',
                                                        'teammembers.id',
                                                    )
                                                    ->where('teammembers.id', $assignmentmappingDatas->otherpartner)
                                                    ->select(
                                                        'teammembers.team_member',
                                                        'teammembers.staffcode',
                                                        'teamrolehistory.newstaff_code',
                                                    )
                                                    ->first();
                                            @endphp
                                            <td class="textfixed">
                                                {{ $leadpartner->team_member ?? '' }}
                                            </td>
                                            <td>
                                                @if ($leadpartner && $leadpartner->team_member)
                                                    {{ $leadpartner->newstaff_code ?? ($leadpartner->staffcode ?? '') }}
                                                @endif
                                            </td>
                                            <td class="textfixed">
                                                {{ $otherPartner->team_member ?? '' }}
                                            </td>
                                            <td>
                                                @if ($otherPartner && $otherPartner->team_member)
                                                    {{ $otherPartner->newstaff_code ?? ($otherPartner->staffcode ?? '') }}
                                                @endif
                                            </td>
                                            <td class="textfixed">
                                                @foreach (DB::table('assignmentmappings')->leftjoin('assignmentteammappings', 'assignmentteammappings.assignmentmapping_id', 'assignmentmappings.id')->leftjoin('teammembers', 'teammembers.id', 'assignmentteammappings.teammember_id')->where('assignmentmappings.id', $assignmentmappingDatas->id)->get() as $sub)
                                                    @if ($sub->profilepic == null)
                                                        <a class="avatar avatar-xs" data-toggle="tooltip"
                                                            title="{{ $sub->team_member }} ({{ $sub->staffcode }})">
                                                            <img src="{{ url('backEnd/image/dummy.png') }}"
                                                                class="avatar-img rounded-circle" alt="...">
                                                        @else
                                                            <a class="avatar avatar-xs" data-toggle="tooltip"
                                                                title="{{ $sub->team_member }} ({{ $sub->staffcode }})">
                                                                <img src="{{ asset('backEnd/image/teammember/profilepic/' . $sub->profilepic) }}"
                                                                    class="avatar-img rounded-circle" alt="...">
                                                    @endif
                                                @endforeach
                                            </td>
                                            @if (auth()->user()->role_id != 15 && Auth::user()->role_id != 11)
                                                <td>
                                                    <a href="{{ url('/assignmentlist/' . $assignmentmappingDatas->assignmentgenerate_id) }}"
                                                        class="btn btn-info-soft btn-sm"><i class="far fa-edit"></i></a>
                                                </td>
                                            @endif
                                        </tr>
                                    @endforeach
                                </tbody>
                            </table>
							
						
						
							
							
							
							
							
							
<script>
    $(document).ready(function() {
        $('.examplee').DataTable({
            "order": [
                //   [2, "desc"]
            ],
            //   searching: false,
            columnDefs: [{
                targets: [1, 2, 3, 4, 5, 6, 7, 8, 9, 10],
                orderable: false
            }],
            buttons: []
        });
    });
</script>





Blade 222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222
resources\views\backEnd\assignmentmapping\yearwise.blade.php


                    <table id="examplee" class="table display table-bordered table-striped table-hover">
                        <thead>
                            <tr>
                                <th class="textfixed">Assignment Id</th>
                                <th>Assignment</th>
                                <th>Client</th>
                                <th class="textfixed">Client Code</th>
                                <th>Deadline</th>
                                <th>Period Start</th>
                                <th>Period End</th>
                                <th>Assigned Partner</th>
                                <th class="textfixed">Assignedpartner Code</th>
                                <th>Other Partner</th>
                                <th class="textfixed">Otherpartner Code</th>
                                <th>Team Leader</th>
                                <th>Teammember</th>
                                @if (auth()->user()->role_id != 15)
                                    <th>Edit</th>
                                @endif
                            </tr>
                        </thead>
                        <tbody>
                            @foreach ($assignmentmappingData as $assignmentmappingDatas)
                                <tr>
                                    <td> <a
                                            href="{{ url('/viewassignment/' . $assignmentmappingDatas->assignmentgenerate_id) }}">{{ $assignmentmappingDatas->assignmentgenerate_id }}</a>
                                    </td>
                                    <td class="textfixed">
                                        {{ $assignmentmappingDatas->assignment_name }} @if ($assignmentmappingDatas->assignmentname != null)
                                            ({{ $assignmentmappingDatas->assignmentname }})
                                        @endif
                                    </td>
                                    <td class="textfixed"> {{ $assignmentmappingDatas->client_name }}</td>
                                    <td> {{ $assignmentmappingDatas->client_code }}</td>
                                    <td class="textfixed">
                                        @if ($assignmentmappingDatas->duedate != null)
                                            {{ date('d-m-Y', strtotime($assignmentmappingDatas->duedate)) }}
                                        @endif
                                    </td>
                                    <td class="textfixed">
                                        @if ($assignmentmappingDatas->periodstart != null)
                                            {{ date('d-m-Y', strtotime($assignmentmappingDatas->periodstart)) }}
                                        @endif
                                    </td>
                                    <td class="textfixed">
                                        @if ($assignmentmappingDatas->periodend != null)
                                            {{ date('d-m-Y', strtotime($assignmentmappingDatas->periodend)) }}
                                        @endif
                                    </td>
                                    {{-- <td>{{ App\Models\Teammember::select('team_member')->where('id', $assignmentmappingDatas->leadpartner)->first()->team_member ?? '' }}
                                    ({{ App\Models\Teammember::select('team_member', 'staffcode')->where('id', $assignmentmappingDatas->leadpartner)->first()->staffcode ?? '' }})
                                </td>
                                <td>{{ App\Models\Teammember::select('team_member')->where('id', $assignmentmappingDatas->otherpartner)->first()->team_member ?? '' }}
                                    ({{ App\Models\Teammember::select('team_member', 'staffcode')->where('id', $assignmentmappingDatas->otherpartner)->first()->staffcode ?? '' }})
                                </td> --}}
                                    @php

                                        $leadpartner = DB::table('teammembers')
                                            ->leftJoin(
                                                'teamrolehistory',
                                                'teamrolehistory.teammember_id',
                                                '=',
                                                'teammembers.id',
                                            )
                                            ->where('teammembers.id', $assignmentmappingDatas->leadpartner)
                                            ->select(
                                                'teammembers.team_member',
                                                'teammembers.staffcode',
                                                'teamrolehistory.newstaff_code',
                                            )
                                            ->first();

                                        $otherPartner = DB::table('teammembers')
                                            ->leftJoin(
                                                'teamrolehistory',
                                                'teamrolehistory.teammember_id',
                                                '=',
                                                'teammembers.id',
                                            )
                                            ->where('teammembers.id', $assignmentmappingDatas->otherpartner)
                                            ->select(
                                                'teammembers.team_member',
                                                'teammembers.staffcode',
                                                'teamrolehistory.newstaff_code',
                                            )
                                            ->first();

                                    @endphp

                                    <td class="textfixed">
                                        {{ $leadpartner->team_member ?? '' }}
                                    </td>
                                    <td>
                                        @if ($leadpartner && $leadpartner->team_member)
                                            {{ $leadpartner->newstaff_code ?? ($leadpartner->staffcode ?? '') }}
                                        @endif
                                    </td>

                                    {{-- <td>
                                    {{ $otherPartner->team_member ?? '' }}
                                    @if ($otherPartner && $otherPartner->team_member)
                                        (
                                        {{ $otherPartner->newstaff_code ?? ($otherPartner->staffcode ?? '') }})
                                    @endif
                                </td> --}}

                                    <td class="textfixed">
                                        @if ($otherPartner && $otherPartner->team_member != null)
                                            {{ $otherPartner->team_member ?? '' }}
                                        @else
                                            @if (auth()->user()->role_id == 11)
                                                <div class="card-head">
                                                    <a data-toggle="modal" data-target="#exampleModal1{{ $loop->index }}"
                                                        class="btn btn-info-soft btn-sm"><i class="fa fa-plus"></i></a>
                                                </div>
                                            @endif
                                        @endif
                                    </td>

                                    <td>
                                        @if ($otherPartner && $otherPartner->team_member)
                                            {{ $otherPartner->newstaff_code ?? ($otherPartner->staffcode ?? '') }}
                                        @endif
                                    </td>

                                    <td class="textfixed">
                                        @foreach (DB::table('assignmentmappings')->leftjoin('assignmentteammappings', 'assignmentteammappings.assignmentmapping_id', 'assignmentmappings.id')->leftjoin('teammembers', 'teammembers.id', 'assignmentteammappings.teammember_id')->where('assignmentmappings.id', $assignmentmappingDatas->id)->where('assignmentteammappings.type', 0)->get() as $sub)
                                            @if ($sub->profilepic == null)
                                                <a class="avatar avatar-xs" data-toggle="tooltip"
                                                    title="{{ $sub->team_member }}({{ $sub->staffcode }})">
                                                    <img src="{{ url('backEnd/image/dummy.png') }}"
                                                        class="avatar-img rounded-circle" alt="...">
                                                @else
                                                    <a class="avatar avatar-xs" data-toggle="tooltip"
                                                        title="{{ $sub->team_member }}({{ $sub->staffcode }})">
                                                        <img src="{{ asset('backEnd/image/teammember/profilepic/' . $sub->profilepic) }}"
                                                            class="avatar-img rounded-circle" alt="...">
                                            @endif
                                        @endforeach
                                    </td>

                                    <td class="textfixed">
                                        @foreach (DB::table('assignmentmappings')->leftjoin('assignmentteammappings', 'assignmentteammappings.assignmentmapping_id', 'assignmentmappings.id')->leftjoin('teammembers', 'teammembers.id', 'assignmentteammappings.teammember_id')->where('assignmentmappings.id', $assignmentmappingDatas->id)->where('assignmentteammappings.type', 2)->get() as $sub)
                                            @if ($sub->profilepic == null)
                                                <a class="avatar avatar-xs" data-toggle="tooltip"
                                                    title="{{ $sub->team_member }}({{ $sub->staffcode }})">
                                                    <img src="{{ url('backEnd/image/dummy.png') }}"
                                                        class="avatar-img rounded-circle" alt="...">
                                                @else
                                                    <a class="avatar avatar-xs" data-toggle="tooltip"
                                                        title="{{ $sub->team_member }}({{ $sub->staffcode }})">
                                                        <img src="{{ asset('backEnd/image/teammember/profilepic/' . $sub->profilepic) }}"
                                                            class="avatar-img rounded-circle" alt="...">
                                            @endif
                                        @endforeach
                                    </td>
                                    @if (auth()->user()->role_id != 15)
                                        <td>
                                            <a href="{{ url('/assignmentlist/' . $assignmentmappingDatas->assignmentgenerate_id) }}"
                                                class="btn btn-info-soft btn-sm"><i class="far fa-edit"></i></a>
                                        </td>
                                    @endif
                                </tr>
                                @if (auth()->user()->role_id == 11)
                                    <div class="modal fade" id="exampleModal1{{ $loop->index }}" tabindex="-1"
                                        role="dialog" aria-labelledby="exampleModalLabel4" aria-hidden="true">
                                        <div class="modal-dialog" role="document">
                                            <div class="modal-content">
                                                <div class="modal-header bg-success">
                                                    <h5 class="modal-title font-weight-600" id="exampleModalLabel4">Add
                                                        Other Partner</h5>
                                                    <div>
                                                        <ul>
                                                            @foreach ($errors->all() as $e)
                                                                <li style="color:red;">{{ $e }}</li>
                                                            @endforeach
                                                        </ul>
                                                    </div>
                                                    <button type="button" class="close" data-dismiss="modal"
                                                        aria-label="Close">
                                                        <span aria-hidden="true">&times;</span>
                                                    </button>
                                                </div>
                                                <form id="detailsForm" method="post"
                                                    action="{{ url('otherpatner/update') }}" enctype="multipart/form-data">
                                                    @csrf
                                                    <div class="modal-body">
                                                        <div class="details-form-field form-group row">
                                                            <div class="col-12">
                                                                <div class="form-group">
                                                                    <label class="font-weight-600">Other Partner </label>
                                                                    <select class="language form-control"
                                                                        id="exampleFormControlSelect1" name="otherpatnerid">
                                                                        <option value="">Please Select One</option>
                                                                        @foreach ($partner as $teammemberData)
                                                                            <option value="{{ $teammemberData->id }}">
                                                                                {{ $teammemberData->team_member }} (
                                                                                {{ $teammemberData->newstaff_code ?? ($teammemberData->staffcode ?? '') }})
                                                                            </option>
                                                                        @endforeach
                                                                    </select>
                                                                    <input type="hidden" name="assignmentgenerate_id"
                                                                        value="{{ $assignmentmappingDatas->assignmentgenerate_id }}"
                                                                        class=" form-control">
                                                                </div>
                                                            </div>
                                                        </div>
                                                    </div>
                                                    <div class="modal-footer">
                                                        <button type="button" class="btn btn-danger"
                                                            data-dismiss="modal">Close</button>
                                                        <button type="submit" class="btn btn-success">Save</button>
                                                    </div>
                                                </form>
                                            </div>
                                        </div>
                                    </div>
                                @endif
                            @endforeach
                        </tbody>
                    </table>
					
					
					
					
					
					
					
					<script>
    $(document).ready(function() {
        $('#examplee').DataTable({
            "order": [
                //   [2, "desc"]
            ],
            columnDefs: [{
                @if (Auth::user()->role_id == 11 || Auth::user()->role_id == 13 || Auth::user()->role_id == 14)
                    targets: [1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12],
                @else
                    targets: [1, 2, 3, 4, 5, 6, 7, 8, 9],
                @endif
                orderable: false
            }],
            buttons: []
        });
    });
</script>







Blade 222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222
resources\views\backEnd\clientlist.blade.php

                            <table id="examplee" class="table display table-bordered table-striped table-hover">
                                <thead>
                                    <tr>
                                        <th class="textfixed">Assignment Id</th>
                                        <th>Assignment</th>
                                        <th>Status</th>
                                        <th>Period Start</th>
                                        <th>Period End</th>
                                        <th>Deadline</th>
                                        <th>Assigned Partner</th>
                                        <th class="textfixed">Assignedpartner Code</th>
                                        <th>Other Partner</th>
                                        <th class="textfixed">Otherpartner Code</th>
                                        <th>Team Leader</th>
                                        <th>Teammember</th>
                                        <!--   <th>Edit</th>-->
                                    </tr>
                                </thead>
                                <tbody>

                                    @foreach ($clientassignment as $clientassignmentDatas)
                                        <tr>
                                            <td>
                                                @if (auth()->user()->role_id == 13)
                                                    @if (
                                                        $clientassignmentDatas->leadpartner == auth()->user()->teammember_id ||
                                                            $clientassignmentDatas->otherpartner == auth()->user()->teammember_id)
                                                        <a
                                                            href="{{ url('/viewassignment/' . $clientassignmentDatas->assignmentgenerate_id) }}">{{ $clientassignmentDatas->assignmentgenerate_id }}
                                                        </a>
                                                    @else
                                                        {{ $clientassignmentDatas->assignmentgenerate_id }}
                                                    @endif
                                                @else
                                                    <a
                                                        href="{{ url('/viewassignment/' . $clientassignmentDatas->assignmentgenerate_id) }}">{{ $clientassignmentDatas->assignmentgenerate_id }}
                                                    </a>
                                                @endif
                                            </td>
                                            <td class="textfixed"><span><b> Client Name :</b></span>
                                                {{ $clientassignmentDatas->client_name }}<br><span><b>Assignment
                                                        :</b></span>
                                                {{ $clientassignmentDatas->assignment_name }}
                                            </td>
                                            {{-- <td class="text-center"> --}}
                                            <td>
                                                @if ($clientassignmentDatas->status == 1)
                                                    <span class="badge badge-primary">Open</span>
                                                @elseif($clientassignmentDatas->status == 0)
                                                    <span class="badge badge-danger">Closed</span>
                                                @endif

                                            </td>
                                            <td class="textfixed">
                                                @if ($clientassignmentDatas->periodstart != null)
                                                    {{ date('d-m-Y', strtotime($clientassignmentDatas->periodstart)) }}
                                                @endif
                                            </td>
                                            <td class="textfixed">
                                                @if ($clientassignmentDatas->periodend != null)
                                                    {{ date('d-m-Y', strtotime($clientassignmentDatas->periodend)) }}
                                                @endif
                                            </td>
                                            <td class="textfixed">
                                                {{ date('d-m-Y', strtotime($clientassignmentDatas->duedate)) }}</td>
                                            {{-- <td>
                                                {{ App\Models\Teammember::select('team_member', 'staffcode')->where('id', $clientassignmentDatas->leadpartner)->first()->team_member ?? '' }}
                                                ({{ App\Models\Teammember::select('team_member', 'staffcode')->where('id', $clientassignmentDatas->leadpartner)->first()->staffcode ?? '' }})
                                            </td>
                                            <td>
                                                {{ App\Models\Teammember::select('team_member', 'staffcode')->where('id', $clientassignmentDatas->otherpartner)->first()->team_member ?? '' }}
                                                ({{ App\Models\Teammember::select('team_member', 'staffcode')->where('id', $clientassignmentDatas->otherpartner)->first()->staffcode ?? '' }})
                                            </td> --}}

                                            @php

                                                $leadpartner = DB::table('teammembers')
                                                    ->leftJoin(
                                                        'teamrolehistory',
                                                        'teamrolehistory.teammember_id',
                                                        '=',
                                                        'teammembers.id',
                                                    )
                                                    ->where('teammembers.id', $clientassignmentDatas->leadpartner)
                                                    ->select(
                                                        'teammembers.team_member',
                                                        'teammembers.staffcode',
                                                        'teamrolehistory.newstaff_code',
                                                    )
                                                    ->first();

                                                $otherPartner = DB::table('teammembers')
                                                    ->leftJoin(
                                                        'teamrolehistory',
                                                        'teamrolehistory.teammember_id',
                                                        '=',
                                                        'teammembers.id',
                                                    )
                                                    ->where('teammembers.id', $clientassignmentDatas->otherpartner)
                                                    ->select(
                                                        'teammembers.team_member',
                                                        'teammembers.staffcode',
                                                        'teamrolehistory.newstaff_code',
                                                    )
                                                    ->first();

                                            @endphp

                                            <td class="textfixed">
                                                {{ $leadpartner->team_member ?? '' }}
                                            </td>
                                            <td>

                                                @if ($leadpartner && $leadpartner->team_member)
                                                    {{ $leadpartner->newstaff_code ?? ($leadpartner->staffcode ?? '') }}
                                                @endif
                                            </td>
                                            <td class="textfixed">
                                                {{ $otherPartner->team_member ?? '' }}
                                            </td>
                                            <td>
                                                @if ($otherPartner && $otherPartner->team_member)
                                                    {{ $otherPartner->newstaff_code ?? ($otherPartner->staffcode ?? '') }}
                                                @endif
                                            </td>
                                            <td class="textfixed">
                                                @foreach (DB::table('assignmentmappings')->leftjoin('assignmentteammappings', 'assignmentteammappings.assignmentmapping_id', 'assignmentmappings.id')->leftjoin('teammembers', 'teammembers.id', 'assignmentteammappings.teammember_id')->where('assignmentmappings.id', $clientassignmentDatas->id)->where('assignmentteammappings.type', 0)->get() as $sub)
                                                    {{-- @php
                                                        dd($sub);
                                                    @endphp --}}
                                                    @if ($sub->profilepic == null)
                                                        <a class="avatar avatar-xs" data-toggle="tooltip"
                                                            title="{{ $sub->team_member }}({{ $sub->staffcode }})">
                                                            <img src="{{ url('backEnd/image/dummy.png') }}"
                                                                class="avatar-img rounded-circle" alt="...">
                                                        @else
                                                            <a class="avatar avatar-xs" data-toggle="tooltip"
                                                                title="{{ $sub->team_member }}({{ $sub->staffcode }})">
                                                                <img src="{{ asset('backEnd/image/teammember/profilepic/' . $sub->profilepic) }}"
                                                                    class="avatar-img rounded-circle" alt="...">
                                                    @endif
                                                @endforeach
                                            </td>
                                            <td class="textfixed">
                                                @foreach (DB::table('assignmentmappings')->leftjoin('assignmentteammappings', 'assignmentteammappings.assignmentmapping_id', 'assignmentmappings.id')->leftjoin('teammembers', 'teammembers.id', 'assignmentteammappings.teammember_id')->where('assignmentmappings.id', $clientassignmentDatas->id)->where('assignmentteammappings.type', 2)->get() as $sub)
                                                    @if ($sub->profilepic == null)
                                                        <a class="avatar avatar-xs" data-toggle="tooltip"
                                                            title="{{ $sub->team_member }}({{ $sub->staffcode }})">
                                                            <img src="{{ url('backEnd/image/dummy.png') }}"
                                                                class="avatar-img rounded-circle" alt="...">
                                                        @else
                                                            <a class="avatar avatar-xs" data-toggle="tooltip"
                                                                title="{{ $sub->team_member }}({{ $sub->staffcode }})">
                                                                <img src="{{ asset('backEnd/image/teammember/profilepic/' . $sub->profilepic) }}"
                                                                    class="avatar-img rounded-circle" alt="...">
                                                    @endif
                                                @endforeach
                                            </td>

                                            <!--  <td>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <a href="{{ url('/assignmentlist/' . $clientassignmentDatas->assignmentgenerate_id) }}"
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            class="btn btn-info-soft btn-sm"><i class="far fa-edit"></i></a>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    </td>-->
                                        </tr>
                                    @endforeach
                                </tbody>
                            </table>






Blade 222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222
resources\views\backEnd\clientlist.blade.php

<script>
    $(document).ready(function() {
        $('#exampleee').DataTable({
            "order": [
                [0, "desc"]
            ],

            buttons: [

                {
                    extend: 'copyHtml5',
                    exportOptions: {
                        columns: [0, ':visible']
                    }
                },
                {
                    extend: 'excelHtml5',
                    exportOptions: {
                        columns: ':visible'
                    }
                },
                {
                    extend: 'pdfHtml5',
                    exportOptions: {
                        columns: [0, 1, 2, 5]
                    }
                },
                'colvis'
            ]
        });

        $('#examplee').DataTable({
            "order": [
                //   [2, "desc"]
            ],
            //   searching: false,
            columnDefs: [{
                targets: [1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11],
                orderable: false
            }],
            buttons: []
        });

        $('#eample1').DataTable({
            "order": [
                //   [2, "desc"]
            ],
            //   searching: false,
            columnDefs: [{
                targets: [0, 1, 2, 4],
                orderable: false
            }],
            buttons: []
        });

        $('#eample2').DataTable({
            "order": [
                //   [2, "desc"]
            ],
            //   searching: false,
            columnDefs: [{
                targets: [0, 1, 2, 3, 4],
                orderable: false
            }],
            buttons: []
        });
    });
</script>




Blade 222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222
resources\views\backEnd\applyleave\adminopen.blade.php


                    <table id="examplee" class="table display table-bordered table-striped table-hover">
                        <thead>
                            <tr>
                                <th style="display: none;">id</th>
                                <th>Employee</th>
                                <th class="textfixed">Staff Code</th>
                                <th class="textfixed">Date of Request</th>
                                <th>Status</th>
                                <th class="textfixed">Leave Type</th>
                                <th>Leave Period</th>
                                <th>Days</th>
                                <th>Approver</th>
                                <th class="textfixed">Approver Code</th>
                                <th>Reason for Leave</th>
                                <th>Approved</th>
                                <th>Reject</th>
                            </tr>
                        </thead>
                        <tbody>
                            @foreach ($teamapplyleaveDatas as $applyleaveDatas)
                                <tr>
                                    @php
                                        $permotioncheck = DB::table('teamrolehistory')
                                            ->where('teammember_id', $applyleaveDatas->createdby)
                                            ->first();

                                        // $datadate = Carbon\Carbon::createFromFormat(
                                        //     'Y-m-d H:i:s',
                                        //     $applyleaveDatas->created_at,
                                        // );

                                        $datadate = $applyleaveDatas->created_at
                                            ? Carbon\Carbon::createFromFormat(
                                                'Y-m-d H:i:s',
                                                $applyleaveDatas->created_at,
                                            )
                                            : null;

                                        $permotiondate = null;
                                        if ($permotioncheck) {
                                            $permotiondate = Carbon\Carbon::createFromFormat(
                                                'Y-m-d H:i:s',
                                                $permotioncheck->created_at,
                                            );
                                        }

                                    @endphp
                                    <td style="display: none;">{{ $applyleaveDatas->id }}</td>
                                    <td class="textfixed"> <a href="{{ route('applyleave.show', $applyleaveDatas->id) }}">
                                            {{ $applyleaveDatas->team_member ?? '' }}</a>
                                    </td>
                                    {{-- <td>{{ $applyleaveDatas->staffcode ?? '' }}</td> --}}
                                    @if ($permotioncheck && $datadate && $datadate->greaterThan($permotiondate))
                                        <td>{{ $permotioncheck->newstaff_code }}</td>
                                    @else
                                        <td>{{ $applyleaveDatas->staffcode }}</td>
                                    @endif
                                    {{-- <td class="textfixed">{{ date('d-m-Y', strtotime($applyleaveDatas->created_at)) ?? '' }}
                                    </td> --}}

                                    <td>
                                        <span style="display: none;">
                                            {{ date('Y-m-d', strtotime($applyleaveDatas->created_at)) }}
                                        </span>
                                        {{ date('d-m-Y', strtotime($applyleaveDatas->created_at)) }}
                                    </td>
                                    <td class="columnSize">
                                        @if ($applyleaveDatas->status == 0)
                                            <span class="badge badge-pill badge-warning"><span
                                                    style="display: none;">A</span>Created</span>
                                        @elseif($applyleaveDatas->status == 1)
                                            <span class="badge badge-success"><span
                                                    style="display: none;">B</span>Approved</span>
                                        @elseif($applyleaveDatas->status == 2)
                                            <span class="badge badge-danger">Rejected</span>
                                        @endif
                                    </td>

                                    <td class="textfixed">

                                        {{ $applyleaveDatas->name ?? '' }}<br>
                                        @if ($applyleaveDatas->type == '0')
                                            <b>Type :</b> <span>Birthday</span><br>
                                            <span><b>Birthday Date :
                                                </b>{{ date(
                                                    'F d,Y',
                                                    strtotime(
                                                        App\Models\Teammember::select('dateofbirth')->where('id', $applyleaveDatas->createdby)->first()->dateofbirth,
                                                    ),
                                                ) ?? '' }}</span>
                                        @elseif($applyleaveDatas->type == '1')
                                            <span>Religious Festival</span>
                                        @endif
                                    </td>
                                    <td class="textfixed">{{ date('d-m-Y', strtotime($applyleaveDatas->from)) ?? '' }} to
                                        {{ date('d-m-Y', strtotime($applyleaveDatas->to)) ?? '' }}</td>
                                    @php
                                        $to = Carbon\Carbon::createFromFormat('Y-m-d', $applyleaveDatas->to ?? '');
                                        $from = Carbon\Carbon::createFromFormat('Y-m-d', $applyleaveDatas->from);
                                        $diff_in_days = $to->diffInDays($from) + 1;
                                        $holidaycount = DB::table('holidays')
                                            ->where('startdate', '>=', $applyleaveDatas->from)
                                            ->where('enddate', '<=', $applyleaveDatas->to)
                                            ->count();
                                    @endphp
                                    <td>{{ $diff_in_days - $holidaycount ?? '' }}</td>
                                    <td class="textfixed">
                                        {{ App\Models\Teammember::select('team_member')->where('id', $applyleaveDatas->approver)->first()->team_member ?? '' }}

                                    </td>
                                    <td>
                                        {{ App\Models\Teammember::select('team_member', 'staffcode')->where('id', $applyleaveDatas->approver)->first()->staffcode ?? '' }}
                                    </td>
                                    <td class="textfixed">

                                        {{ $applyleaveDatas->reasonleave ?? '' }}

                                    </td>
                                    <td style="align-content: center;">
                                        @if ($applyleaveDatas->status == 0)
                                            <form method="post"
                                                action="{{ route('applyleave.update', $applyleaveDatas->id) }}"
                                                enctype="multipart/form-data" style="text-align: center;margin: 0px;">
                                                @method('PATCH')
                                                @csrf
                                                <input type="text" hidden id="example-date-input" name="status"
                                                    value="1" class="form-control" placeholder="Enter Location">
                                                <button type="submit" class="btn btn-success"
                                                    style="border-radius: 7px; font-size: 10px; padding: 5px;">
                                                    Approve</button>
                                            </form>
                                        @endif
                                    </td>
                                    <td style="align-content: center;">
                                        @if ($applyleaveDatas->status == 0)
                                            <button data-toggle="modal" data-target="#exampleModal12{{ $loop->index }}"
                                                class="btn btn-danger"
                                                style="border-radius: 7px; font-size: 10px; padding: 5px;">
                                                Reject</button>
                                        @endif
                                    </td>

                                    <!-- model box / pop up box  -->
                                    <div class="modal fade" id="exampleModal12{{ $loop->index }}" tabindex="-1"
                                        role="dialog" aria-labelledby="exampleModalLabel4" aria-hidden="true">
                                        <div class="modal-dialog" role="document">
                                            <div class="modal-content">
                                                <div class="modal-header" style="background:#37A000">
                                                    <h5 style="color: white" class="modal-title font-weight-600"
                                                        id="exampleModalLabel1">Reason For
                                                        Rejection</h5>
                                                    <button type="button" class="close" data-dismiss="modal"
                                                        aria-label="Close">
                                                        <span aria-hidden="true">&times;</span>
                                                    </button>
                                                </div>
                                                <form method="post"
                                                    action="{{ url('applyleave/update', $applyleaveDatas->id) }}"
                                                    enctype="multipart/form-data">
                                                    @csrf
                                                    <div class="modal-body">
                                                        <div class="row row-sm">
                                                            <div class="col-12">
                                                                <div class="form-group">
                                                                    <textarea rows="6" name="remark" class="form-control" placeholder=""></textarea>
                                                                    <input hidden type="text" id="example-date-input"
                                                                        name="status" value="2" class="form-control"
                                                                        placeholder="Enter Reason">
                                                                </div>
                                                            </div>
                                                        </div>
                                                        <button type="button" class="btn btn-danger"
                                                            data-dismiss="modal">Close</button>
                                                        <button type="submit" style="float: right"
                                                            class="btn btn-success">Save </button>
                                                    </div>
                                                </form>
                                            </div>
                                        </div>
                                    </div>
                                </tr>
                            @endforeach


                        </tbody>
                    </table>
					
					
					
					
					
					<script>
    $(document).ready(function() {
        $('#examplee').DataTable({
            "order": [
                [3, "desc"]
            ],
            columnDefs: [{
                targets: [0, 1, 2, 4, 5, 6, 7, 8, 9, 10],
                orderable: false
            }],
            buttons: []
        });
    });
</script>






Blade 222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222
resources\views\backEnd\report\openandcloseassignment.blade.php


                    <table id="examplee" class="display nowrap">
                        <thead>
                            <tr>
                                <th style="display: none;">id</th>
                                <th>Assignment Id</th>
                                <th>Assignment</th>
                                <th>Client</th>
                                <th>Client Code</th>
                                <th>Period Start</th>
                                <th>Period End</th>
                                <th>Deadline</th>
                                <th>Assigned Status</th>
                                <th>Assigned Partner</th>
                                <th>Assignedpartner Code</th>
                                <th>Other Partner</th>
                                <th>Otherpartner Code</th>
                                <th>Team Leader </th>
                                <th>Teammember</th>
                                @if (auth()->user()->role_id != 15 && Auth::user()->role_id != 11)
                                    <th>Edit</th>
                                @endif
                                {{-- <th>Action</th> --}}
                            </tr>
                        </thead>
                        <tbody>
                            @foreach ($assignmentmappingData as $assignmentmappingDatas)
                                <tr>
                                    <td style="display: none;">{{ $assignmentmappingDatas->id }}</td>
                                    <td> <a
                                            href="{{ url('/viewassignment/' . $assignmentmappingDatas->assignmentgenerate_id) }}">{{ $assignmentmappingDatas->assignmentgenerate_id }}</a>
                                    </td>
                                    <td>
                                        {{ $assignmentmappingDatas->assignment_name }} @if ($assignmentmappingDatas->assignmentname != null)
                                            ({{ $assignmentmappingDatas->assignmentname }})
                                        @endif
                                    </td>
                                    <td> {{ $assignmentmappingDatas->client_name }}</td>
                                    <td> {{ $assignmentmappingDatas->client_code }}</td>

                                    <td>
                                        @if ($assignmentmappingDatas->periodstart != null)
                                            {{ date('d-m-Y', strtotime($assignmentmappingDatas->periodstart)) }}
                                        @endif
                                    </td>

                                    <td>
                                        @if ($assignmentmappingDatas->periodend != null)
                                            {{ date('d-m-Y', strtotime($assignmentmappingDatas->periodend)) }}
                                        @endif
                                    </td>
                                    <td>
                                        @if ($assignmentmappingDatas->duedate != null)
                                            {{ date('d-m-Y', strtotime($assignmentmappingDatas->duedate)) }}
                                        @endif
                                    </td>
                                    <td>
                                        @if ($assignmentmappingDatas->status == 1)
                                            <span class="badge badge-primary">OPEN</span>
                                        @elseif($assignmentmappingDatas->status == 0)
                                            <span class="badge badge-danger">CLOSED</span>
                                        @elseif($assignmentmappingDatas->status == 2)
                                            <span class="badge badge-info">Rejected</span>
                                        @endif

                                    </td>
                                    {{-- <td>{{ App\Models\Teammember::select('team_member')->where('id', $assignmentmappingDatas->leadpartner)->first()->team_member ?? '' }}
                                    </td>
                                    <td>{{ App\Models\Teammember::select('team_member')->where('id', $assignmentmappingDatas->otherpartner)->first()->team_member ?? '' }}
                                    </td> --}}
                                    @php
                                        // $leadpartner = App\Models\Teammember::select('team_member', 'staffcode')
                                        //     ->where('id', $assignmentmappingDatas->leadpartner)
                                        //     ->first();

                                        // $otherPartner = App\Models\Teammember::select('team_member', 'staffcode')
                                        //     ->where('id', $assignmentmappingDatas->otherpartner)
                                        //     ->first();

                                        $leadpartner = DB::table('teammembers')
                                            ->leftJoin(
                                                'teamrolehistory',
                                                'teamrolehistory.teammember_id',
                                                '=',
                                                'teammembers.id',
                                            )
                                            ->where('teammembers.id', $assignmentmappingDatas->leadpartner)
                                            ->select(
                                                'teammembers.team_member',
                                                'teammembers.staffcode',
                                                'teamrolehistory.newstaff_code',
                                            )
                                            ->first();

                                        $otherPartner = DB::table('teammembers')
                                            ->leftJoin(
                                                'teamrolehistory',
                                                'teamrolehistory.teammember_id',
                                                '=',
                                                'teammembers.id',
                                            )
                                            ->where('teammembers.id', $assignmentmappingDatas->otherpartner)
                                            ->select(
                                                'teammembers.team_member',
                                                'teammembers.staffcode',
                                                'teamrolehistory.newstaff_code',
                                            )
                                            ->first();

                                    @endphp
                                    <td>
                                        {{ $leadpartner->team_member ?? '' }}
                                    </td>
                                    <td>
                                        @if ($leadpartner && $leadpartner->team_member)
                                            {{ $leadpartner->newstaff_code ?? ($leadpartner->staffcode ?? '') }}
                                        @endif
                                    </td>
                                    <td>
                                        {{ $otherPartner->team_member ?? '' }}
                                    </td>

                                    <td>
                                        @if ($otherPartner && $otherPartner->team_member)
                                            {{ $otherPartner->newstaff_code ?? ($otherPartner->staffcode ?? '') }}
                                        @endif
                                    </td>
                                    <td>
                                        @foreach (DB::table('assignmentmappings')->leftjoin('assignmentteammappings', 'assignmentteammappings.assignmentmapping_id', 'assignmentmappings.id')->leftjoin('teammembers', 'teammembers.id', 'assignmentteammappings.teammember_id')->where('assignmentmappings.id', $assignmentmappingDatas->id)->where('assignmentteammappings.type', 0)->get() as $sub)
                                            {{ $sub->team_member }}
                                        @endforeach
                                    </td>
                                    <td>
                                        @foreach (DB::table('assignmentmappings')->leftjoin('assignmentteammappings', 'assignmentteammappings.assignmentmapping_id', 'assignmentmappings.id')->leftjoin('teammembers', 'teammembers.id', 'assignmentteammappings.teammember_id')->where('assignmentmappings.id', $assignmentmappingDatas->id)->where('assignmentteammappings.type', 2)->get() as $sub)
                                            {{ $sub->team_member }} ,
                                        @endforeach
                                    </td>
                                    @if (auth()->user()->role_id != 15 && Auth::user()->role_id != 11)
                                        <td>
                                            <a href="{{ url('/assignmentlist/' . $assignmentmappingDatas->assignmentgenerate_id) }}"
                                                class="btn btn-info-soft btn-sm"><i class="far fa-edit"></i></a>
                                        </td>
                                    @endif
                                    {{-- <td>
                                     
                                        <a href="  {{ url('/assignment/reject/' . $assignmentmappingDatas->assignmentgenerate_id) }}"
                                            onclick="return confirm('Are you sure you want to Reject this Assignment?');">
                                            <button class="btn btn-danger" data-toggle="modal"
                                                style="height: 16px; width: auto; border-radius: 7px; display: flex; align-items: center; justify-content: center;font-size: 11px;"
                                                data-target="#requestModal">Reject</button>
                                        </a>
                        
                                    </td> --}}
                                </tr>
                            @endforeach
                        </tbody>
                    </table>





<script>
    $(document).ready(function() {
        $('#examplee').DataTable({
            dom: 'Bfrtip',
            "order": [
                [1, "asc"]
            ],

            columnDefs: [{
                targets: [2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14],
                orderable: false
            }],
            buttons: [{
                    extend: 'copyHtml5',
                    exportOptions: {
                        columns: [0, ':visible']
                    }
                },
                {
                    extend: 'excelHtml5',
                    filename: 'Assignment Report List',
                    exportOptions: {
                        columns: ':visible'
                    },
                    customize: function(xlsx) {
                        var sheet = xlsx.xl.worksheets['sheet1.xml'];
                        //   remove extra spaces
                        $('c', sheet).each(function() {
                            var originalText = $(this).find('is t').text();
                            var cleanedText = originalText.replace(/\s+/g, ' ').trim();
                            $(this).find('is t').text(cleanedText);
                        });
                    }
                },
                {
                    extend: 'pdfHtml5',
                    filename: 'Assignment Report List',
                    // which column do you want to on pdf page
                    exportOptions: {
                        columns: [0, 1, 2, 4, 10]
                    },
                },
                // column visibility
                'colvis'
            ]
        });
    });
</script>




Blade 222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222
resources\views\backEnd\assignmentbudgeting\index.blade.php


                    <table id="examplee" class="table display table-bordered table-striped table-hover">
                        <thead>
                            <tr>
                                <th>Client</th>
                                <th class="textfixed">Client Code</th>
                                <th class="textfixed">Assignment</th>
                                <th class="textfixed">Assignment Id</th>
                                <th>Due Date</th>
                                {{--  <th>Edit</th>
                             <th>Delete</th> --}}
                            </tr>
                        </thead>
                        <tbody>
                            @foreach ($assignmentbudgetingDatas as $assignmentbudgetingData)
                                <tr>
                                    <td class="textfixed"> <a
                                            href="{{ route('assignmentbudgeting.edit', $assignmentbudgetingData->id) }}">
                                            {{ $assignmentbudgetingData->client_name }}</a></td>
                                    <td> {{ $assignmentbudgetingData->client_code }}</td>
                                    <td class="textfixed">{{ $assignmentbudgetingData->assignment_name }}
                                        @if ($assignmentbudgetingData->assignmentname != null)
                                            ({{ $assignmentbudgetingData->assignmentname }})
                                        @endif
                                    </td>
                                    <td>
                                        @if ($assignmentbudgetingData->assignmentname != null)
                                            {{ $assignmentbudgetingData->assignmentgenerate_id }}
                                        @endif
                                    </td>
                                    <td class="textfixed">{{ date('d-m-Y', strtotime($assignmentbudgetingData->duedate)) }}
                                    </td>
                                    {{--   <td>  <a href="{{route('assignmentbudgeting.edit', $assignmentbudgetingData->id)}}" class="btn btn-primary">Edit</a></td>
                            <td> <form action="{{ route('assignmentbudgeting.destroy', $assignmentbudgetingData->id) }}" method="POST">
                                <input type="hidden" name="_method" value="DELETE">
                                <input type="hidden" name="_token" value="{{ csrf_token() }}">
                                <button  onclick="return confirm('Are you sure you want to delete this item?');" class="btn btn-info">Delete</button>
                            </form></td> --}}
                                </tr>
                            @endforeach
                        </tbody>
                    </table>






<script>
    $(document).ready(function() {
        $('#examplee').DataTable({
            "order": [
                [0, "asc"]
            ],
            columnDefs: [{
                targets: [1, 2, 3, 4],
                orderable: false
            }],
            buttons: []
        });
    });
</script>




Blade 222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222
resources\views\backEnd\timesheet\hrindex.blade.php


                    <table id="examplee" class="display nowrap">
                        <thead>

                            <tr>
                                <th style="display: none;">id</th>
                                <th>Employee Name</th>
                                <th class="textfixed">Staff Code</th>
                                <th>Date</th>
                                <th>Day</th>
                                <th>Client Name</th>
                                <th class="textfixed">Client Code</th>
                                <th>Assignment Name</th>
                                <th>Work Item</th>
                                <th>Partner</th>
                                <th class="textfixed">Partner Code</th>
                                <th>Hour</th>
                                <th>Total Hour</th>
                                @if (Auth::user()->role_id == 18 || Auth::user()->role_id == 11)
                                    <th>Action</th>
                                @endif
                            </tr>

                        </thead>
                        <tbody>
                            @foreach ($timesheetData as $timesheetDatas)
                                <tr>
                                    @php
                                        $client_id = DB::table('timesheetusers')
                                            ->leftjoin('clients', 'clients.id', 'timesheetusers.client_id')
                                            ->leftjoin('assignments', 'assignments.id', 'timesheetusers.assignment_id')
                                            ->leftjoin('teammembers', 'teammembers.id', 'timesheetusers.partner')
                                            ->where('timesheetusers.timesheetid', $timesheetDatas->id)

                                            ->select(
                                                'clients.client_name',
                                                'clients.client_code',
                                                'timesheetusers.hour',
                                                'assignments.assignment_name',
                                                'billable_status',
                                                'workitem',
                                                'teammembers.id',
                                                'teammembers.team_member',
                                                'teammembers.staffcode',
                                            )
                                            ->get();

                                        //  dd($client_id);
                                        $total = DB::table('timesheetusers')

                                            ->where('timesheetusers.timesheetid', $timesheetDatas->id)
                                            ->sum('hour');

                                        $dates = date('l', strtotime($timesheetDatas->date));

                                        $permotioncheck = DB::table('teamrolehistory')
                                            ->where('teammember_id', $timesheetDatas->created_by)
                                            ->first();
                                        //shshid client
                                        $datadate = Carbon\Carbon::createFromFormat(
                                            'Y-m-d H:i:s',
                                            $timesheetDatas->created_at,
                                        );

                                        $permotiondate = null;
                                        if ($permotioncheck) {
                                            $permotiondate = Carbon\Carbon::createFromFormat(
                                                'Y-m-d H:i:s',
                                                $permotioncheck->created_at,
                                            );
                                        }
                                    @endphp
                                    <td style="display: none;">{{ $timesheetDatas->id }}</td>
                                    <td class="textfixed">{{ $timesheetDatas->team_member ?? '' }} </td>
                                    @if ($permotioncheck && $datadate->greaterThan($permotiondate))
                                        <td>{{ $permotioncheck->newstaff_code }}</td>
                                    @else
                                        <td>{{ $timesheetDatas->staffcode }}</td>
                                    @endif

                                    <td class="textfixed">{{ date('d-m-Y', strtotime($timesheetDatas->date)) }}
                                    </td>
                                    <td class="textfixed">
                                        @if ($timesheetDatas->date != null)
                                            {{ $dates ?? '' }}
                                        @endif
                                    </td>



                                    <td class="textfixed">
                                        @foreach ($client_id as $item)
                                            {{ $item->client_name ?? '' }}
                                            @if ($item->client_name != 0)
                                                ,
                                            @endif
                                        @endforeach
                                    </td>
                                    <td>
                                        @foreach ($client_id as $item)
                                            {{ $item->client_code ?? '' }}
                                            @if ($item->client_code != 0)
                                                ,
                                            @endif
                                        @endforeach
                                    </td>
                                    <td class="textfixed">
                                        @foreach ($client_id as $item)
                                            {{ $item->assignment_name ?? '' }}
                                            @if ($item->assignment_name != null)
                                                ,
                                            @endif
                                        @endforeach
                                    </td>

                                    <td class="textfixed">
                                        @foreach ($client_id as $item)
                                            {{ $item->workitem ?? '' }}@if ($item->workitem != null)
                                                ,
                                            @endif
                                        @endforeach
                                    </td>
                                    <td class="textfixed">
                                        @foreach ($client_id as $item)
                                            {{ $item->team_member ?? '' }}
                                            @if ($item->team_member != null)
                                                ,
                                            @endif
                                        @endforeach
                                    </td>
                                    <td>
                                        @foreach ($client_id as $item)
                                            @php

                                                $partnerpermotioncheck = DB::table('teamrolehistory')
                                                    ->where('teammember_id', $item->id)
                                                    ->first();
                                                //shshid client
                                                $partnerdatadate = Carbon\Carbon::createFromFormat(
                                                    'Y-m-d H:i:s',
                                                    $timesheetDatas->created_at,
                                                );

                                                $partnerpermotiondate = null;
                                                if ($partnerpermotioncheck) {
                                                    $partnerpermotiondate = Carbon\Carbon::createFromFormat(
                                                        'Y-m-d H:i:s',
                                                        $partnerpermotioncheck->created_at,
                                                    );
                                                }
                                            @endphp

                                            @if ($partnerpermotioncheck && $partnerdatadate && $partnerdatadate->greaterThan($partnerpermotiondate))
                                                {{ $partnerpermotioncheck->newstaff_code }}
                                            @else
                                                {{ $item->staffcode }}
                                            @endif
                                            @if ($item->team_member != null)
                                                ,
                                            @endif
                                        @endforeach
                                    </td>
                                    <td class="textfixed">
                                        @foreach ($client_id as $item)
                                            {{ $item->hour ?? '' }} @if ($item->hour != null)
                                                ,
                                            @endif
                                        @endforeach
                                    </td>
                                    <td>{{ $total }}</td>
                                    <td>
                                        @if (auth()->user()->role_id == 18 || auth()->user()->role_id == 11)
                                            <a href="{{ url('/timesheet/destroy/' . $timesheetDatas->id) }}"
                                                onclick="return confirm('Are you sure you want to delete this item?');"
                                                class="btn btn-danger-soft btn-sm"><i class="far fa-trash-alt"></i></a>
                                        @else
                                            <!-- <td> <a href="{{ url('/timesheet/destroy/' . $timesheetDatas->id) }}"
                                                                                                                                                                                                                                                                                                                                                                                    onclick="return confirm('Are you sure you want to delete this item?');"
                                                                                                                                                                                                                                                                                                                                                                                    class="btn btn-danger-soft btn-sm"><i class="far fa-trash-alt"></i></a></td>
                                                                                                                                                                                                                                                                                                                                                                            -->
                                        @endif
                                    </td>

                                </tr>
                            @endforeach

                        </tbody>
                    </table>
					
					
			
			
					
					
					
					
					
					
					
					
					
					
					
					
					<script>
    $(document).ready(function() {
        $('#examplee').DataTable({
            "pageLength": 30,
            dom: 'Bfrtip',
            "order": [
                [3, "desc"]
            ],

            columnDefs: [{
                targets: [1, 2, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13],
                orderable: false
            }],

            buttons: [

                {
                    extend: 'copyHtml5',
                    exportOptions: {
                        columns: [0, ':visible']
                    }
                },
                {
                    extend: 'excelHtml5',
                    filename: 'Save Timesheet List',
                    exportOptions: {
                        columns: ':visible',
                        format: {
                            body: function(data, row, column, node) {
                                // it should be column number 2
                                if (column === 2) {
                                    // If the data is a date, extract the date without HTML tags
                                    var cleanedText = $(data).text().trim();
                                    var dateParts = cleanedText.split(
                                        '-');
                                    // Assuming the date format is yyyy-mm-dd
                                    if (dateParts.length === 3) {
                                        return dateParts[2] + '-' + dateParts[1] + '-' +
                                            dateParts[0];
                                    }
                                }
                                if (column === 12) {
                                    var cleanedText = $(data).text().trim();
                                    return cleanedText;
                                }
                                return data;
                            }
                        }
                    },
                },
                {
                    extend: 'pdfHtml5',
                    filename: 'Save Timesheet List',
                    exportOptions: {
                        columns: [0, 1, 2, 5]
                    }
                },
                'colvis'
            ]
        });
    });
</script>




Blade 222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222
resources\views\backEnd\applyleave\teamapplication.blade.php


                     <table id="examplee" class="display nowrap">
                         <thead>
                             <tr>
                                 <div class="refresh-btn-container"
                                     style="position: relative; left: 305px; top: 34px; z-index: 1;">
                                     <a href="{{ url('/applyleave') }}" class="btn btn-success">Refresh</a>
                                 </div>
                             </tr>
                             <tr>
                                 <th style="display: none;">id</th>
                                 <th>Employee</th>
                                 <th class="textfixed">Staff Code</th>
                                 <th class="textfixed">Date of Request</th>
                                 <th>Status</th>
                                 <th class="textfixed">Leave Type</th>
                                 <th>Leave Period</th>
                                 <th>Days</th>
                                 <th>Approver</th>
                                 <th class="textfixed">Approver Code</th>
                                 <th>Reason for Leave</th>
                                 @if ($hasPendingRequests)
                                     <th>Approved</th>
                                     <th>Reject</th>
                                 @endif
                             </tr>
                         </thead>
                         <tbody>
                             @foreach ($teamapplyleaveDatas as $applyleaveDatas)
                                 <tr>
                                     <td style="display: none;">{{ $applyleaveDatas->id }}</td>
                                     <td class="textfixed"> <a
                                             href="{{ route('applyleave.show', $applyleaveDatas->id) }}">
                                             {{ $applyleaveDatas->team_member ?? '' }}</a>
                                     </td>
                                     {{-- <td>{{ $applyleaveDatas->staffcode }}</td> --}}
                                     <td>{{ $applyleaveDatas->newstaff_code ?? ($applyleaveDatas->staffcode ?? '') }}</td>
                                     <td class="textfixed">
                                         {{ date('d-m-Y', strtotime($applyleaveDatas->created_at)) ?? '' }}</td>
                                     <td class="columnSize">
                                         @if ($applyleaveDatas->status == 0)
                                             <span class="badge badge-pill badge-warning"><span
                                                     style="display: none;">A</span>Created</span>
                                         @elseif($applyleaveDatas->status == 1)
                                             <span class="badge badge-success"><span
                                                     style="display: none;">B</span>Approved</span>
                                         @elseif($applyleaveDatas->status == 2)
                                             <span class="badge badge-danger">Rejected</span>
                                         @endif
                                     </td>

                                     <td class="textfixed">

                                         {{ $applyleaveDatas->name ?? '' }}<br>
                                         @if ($applyleaveDatas->type == '0')
                                             <b>Type :</b> <span>Birthday</span><br>
                                             <span><b>Birthday Date :
                                                 </b>{{ date(
                                                     'F d,Y',
                                                     strtotime(
                                                         App\Models\Teammember::select('dateofbirth')->where('id', $applyleaveDatas->createdby)->first()->dateofbirth,
                                                     ),
                                                 ) ?? '' }}</span>
                                         @elseif($applyleaveDatas->type == '1')
                                             <span>Religious Festival</span>
                                         @endif
                                     </td>
                                     <td class="textfixed">{{ date('d-m-Y', strtotime($applyleaveDatas->from)) ?? '' }} -
                                         {{ date('d-m-Y', strtotime($applyleaveDatas->to)) ?? '' }}</td>
                                     @php
                                         $to = Carbon\Carbon::createFromFormat('Y-m-d', $applyleaveDatas->to ?? '');
                                         $from = Carbon\Carbon::createFromFormat('Y-m-d', $applyleaveDatas->from);
                                         $diff_in_days = $to->diffInDays($from) + 1;
                                         $holidaycount = DB::table('holidays')
                                             ->where('startdate', '>=', $applyleaveDatas->from)
                                             ->where('enddate', '<=', $applyleaveDatas->to)
                                             ->count();
                                     @endphp
                                     <td>{{ $diff_in_days - $holidaycount ?? '' }}</td>

                                     @php
                                         $approvelpartner = DB::table('teammembers')
                                             ->leftJoin(
                                                 'teamrolehistory',
                                                 'teamrolehistory.teammember_id',
                                                 '=',
                                                 'teammembers.id',
                                             )
                                             ->where('teammembers.id', $applyleaveDatas->approver)
                                             ->select(
                                                 'teammembers.team_member',
                                                 'teammembers.staffcode',
                                                 'teamrolehistory.newstaff_code',
                                                 'teamrolehistory.created_at',
                                             )
                                             ->first();

                                         $datadate = Carbon\Carbon::createFromFormat(
                                             'Y-m-d H:i:s',
                                             $applyleaveDatas->created_at,
                                         );

                                         $permotiondate = null;
                                         if ($approvelpartner->created_at) {
                                             $permotiondate = Carbon\Carbon::createFromFormat(
                                                 'Y-m-d H:i:s',
                                                 $approvelpartner->created_at,
                                             );
                                         }
                                     @endphp


                                     <td class="textfixed">
                                         {{ $approvelpartner->team_member ?? '' }}
                                     </td>
                                     <td>
                                         @if ($permotiondate && $datadate->greaterThan($permotiondate))
                                             {{ $approvelpartner->newstaff_code }}
                                         @else
                                             {{ $approvelpartner->staffcode }}
                                         @endif
                                     </td>
                                     <td class="textfixed">
                                         {{ $applyleaveDatas->reasonleave ?? '' }}
                                     </td>
                                     <td style="align-content: center;">
                                         @if ($applyleaveDatas->status == 0)
                                             <form method="post"
                                                 action="{{ route('applyleave.update', $applyleaveDatas->id) }}"
                                                 enctype="multipart/form-data" style="text-align: center;margin: 0px;">
                                                 @method('PATCH')
                                                 @csrf
                                                 <input type="text" hidden id="example-date-input" name="status"
                                                     value="1" class="form-control" placeholder="Enter Location">
                                                 <button type="submit" class="btn btn-success"
                                                     style="border-radius: 7px; font-size: 10px; padding: 5px;">
                                                     Approve</button>
                                             </form>
                                         @endif
                                     </td>
                                     <td style="align-content: center;">
                                         @if ($applyleaveDatas->status == 0)
                                             <button data-toggle="modal" data-target="#exampleModal12{{ $loop->index }}"
                                                 class="btn btn-danger"
                                                 style="border-radius: 7px; font-size: 10px; padding: 5px;">
                                                 Reject</button>
                                         @endif
                                     </td>

                                     {{-- model box --}}
                                     <div class="modal fade" id="exampleModal12{{ $loop->index }}" tabindex="-1"
                                         role="dialog" aria-labelledby="exampleModalLabel4" aria-hidden="true">
                                         <div class="modal-dialog" role="document">
                                             <div class="modal-content">
                                                 <div class="modal-header" style="background:#37A000">
                                                     <h5 style="color: white" class="modal-title font-weight-600"
                                                         id="exampleModalLabel1">Reason For
                                                         Rejection</h5>
                                                     <button type="button" class="close" data-dismiss="modal"
                                                         aria-label="Close">
                                                         <span aria-hidden="true">&times;</span>
                                                     </button>
                                                 </div>
                                                 <form method="post"
                                                     action="{{ url('applyleave/update', $applyleaveDatas->id) }}"
                                                     enctype="multipart/form-data">
                                                     @csrf
                                                     <div class="modal-body">
                                                         <div class="row row-sm">
                                                             <div class="col-12">
                                                                 <div class="form-group">
                                                                     <textarea rows="6" name="remark" class="form-control" placeholder=""></textarea>
                                                                     <input hidden type="text" id="example-date-input"
                                                                         name="status" value="2"
                                                                         class="form-control" placeholder="Enter Reason">
                                                                 </div>
                                                             </div>
                                                         </div>
                                                         <button type="button" class="btn btn-danger"
                                                             data-dismiss="modal">Close</button>
                                                         <button type="submit" style="float: right"
                                                             class="btn btn-success">Save </button>
                                                     </div>
                                                 </form>
                                             </div>
                                         </div>
                                     </div>
                                 </tr>
                             @endforeach
                         </tbody>
                     </table>






Blade 222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222
app\Http\Controllers\AssignmentbudgetingController.php

    public function index()
    {
        if (auth()->user()->role_id == 11 || auth()->user()->role_id == 12) {
            $assignmentbudgetingDatas = DB::table('assignmentbudgetings')
                ->leftjoin('clients', 'clients.id', 'assignmentbudgetings.client_id')
                ->leftjoin('assignments', 'assignments.id', 'assignmentbudgetings.assignment_id')->select('clients.client_name', 'clients.client_code', 'assignmentbudgetings.*', 'assignments.assignment_name')->get();

            return view('backEnd.assignmentbudgeting.index', compact('assignmentbudgetingDatas'));
        } else {
            $assignmentbudgetingDatas = DB::table('assignmentbudgetings')
                ->leftjoin('clients', 'clients.id', 'assignmentbudgetings.client_id')
                ->leftjoin('assignments', 'assignments.id', 'assignmentbudgetings.assignment_id')
                ->Where('assignmentbudgetings.created_by', auth()->user()->id)->orWhere('clients.leadpartner', auth()->user()->teammember_id)->select('clients.client_name', 'clients.client_code', 'assignmentbudgetings.*', 'assignments.assignment_name')->get();

            Assignmentbudgeting::where('created_by', auth()->user()->id)->get();
            return view('backEnd.assignmentbudgeting.index', compact('assignmentbudgetingDatas'));
        }
    }








Blade 222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222
resources\views\backEnd\applyleave\teamapplication.blade.php

                     <table id="examplee" class="display nowrap">
                         <thead>
                             <tr>
                                 <div class="refresh-btn-container"
                                     style="position: relative; left: 305px; top: 34px; z-index: 1;">
                                     <a href="{{ url('/applyleave') }}" class="btn btn-success">Refresh</a>
                                 </div>
                             </tr>
                             <tr>
                                 <th style="display: none;">id</th>
                                 <th>Employee</th>
                                 <th class="textfixed">Staff Code</th>
                                 <th class="textfixed">Date of Request</th>
                                 <th>Status</th>
                                 <th class="textfixed">Leave Type</th>
                                 <th>Leave Period</th>
                                 <th>Days</th>
                                 <th>Approver</th>
                                 <th class="textfixed">Approver Code</th>
                                 <th>Reason for Leave</th>
                                 @if ($hasPendingRequests)
                                     <th>Approved</th>
                                     <th>Reject</th>
                                 @endif
                             </tr>
                         </thead>
                         <tbody>
                             @foreach ($teamapplyleaveDatas as $applyleaveDatas)
                                 <tr>
                                     <td style="display: none;">{{ $applyleaveDatas->id }}</td>
                                     <td class="textfixed"> <a
                                             href="{{ route('applyleave.show', $applyleaveDatas->id) }}">
                                             {{ $applyleaveDatas->team_member ?? '' }}</a>
                                     </td>
                                     {{-- <td>{{ $applyleaveDatas->staffcode }}</td> --}}
                                     <td>{{ $applyleaveDatas->newstaff_code ?? ($applyleaveDatas->staffcode ?? '') }}</td>
                                     {{-- <td class="textfixed">
                                         {{ date('d-m-Y', strtotime($applyleaveDatas->created_at)) ?? '' }}</td> --}}

                                     <td class="textfixed">
                                         <span style="display: none;">
                                             {{ date('Y-m-d', strtotime($applyleaveDatas->created_at)) }}
                                         </span>
                                         {{ date('d-m-Y', strtotime($applyleaveDatas->created_at)) }}
                                     </td>
                                     <td class="columnSize">
                                         @if ($applyleaveDatas->status == 0)
                                             <span class="badge badge-pill badge-warning"><span
                                                     style="display: none;">A</span>Created</span>
                                         @elseif($applyleaveDatas->status == 1)
                                             <span class="badge badge-success"><span
                                                     style="display: none;">B</span>Approved</span>
                                         @elseif($applyleaveDatas->status == 2)
                                             <span class="badge badge-danger">Rejected</span>
                                         @endif
                                     </td>

                                     <td class="textfixed">

                                         {{ $applyleaveDatas->name ?? '' }}
                                         @if ($applyleaveDatas->type == '0')
                                             <b>Type :</b> <span>Birthday</span><br>
                                             <span><b>Birthday Date :
                                                 </b>{{ date(
                                                     'F d,Y',
                                                     strtotime(
                                                         App\Models\Teammember::select('dateofbirth')->where('id', $applyleaveDatas->createdby)->first()->dateofbirth,
                                                     ),
                                                 ) ?? '' }}</span>
                                         @elseif($applyleaveDatas->type == '1')
                                             <span>Religious Festival</span>
                                         @endif
                                     </td>
                                     <td class="textfixed">{{ date('d-m-Y', strtotime($applyleaveDatas->from)) ?? '' }} -
                                         {{ date('d-m-Y', strtotime($applyleaveDatas->to)) ?? '' }}</td>
                                     @php
                                         $to = Carbon\Carbon::createFromFormat('Y-m-d', $applyleaveDatas->to ?? '');
                                         $from = Carbon\Carbon::createFromFormat('Y-m-d', $applyleaveDatas->from);
                                         $diff_in_days = $to->diffInDays($from) + 1;
                                         $holidaycount = DB::table('holidays')
                                             ->where('startdate', '>=', $applyleaveDatas->from)
                                             ->where('enddate', '<=', $applyleaveDatas->to)
                                             ->count();
                                     @endphp
                                     <td>{{ $diff_in_days - $holidaycount ?? '' }}</td>

                                     @php
                                         $approvelpartner = DB::table('teammembers')
                                             ->leftJoin(
                                                 'teamrolehistory',
                                                 'teamrolehistory.teammember_id',
                                                 '=',
                                                 'teammembers.id',
                                             )
                                             ->where('teammembers.id', $applyleaveDatas->approver)
                                             ->select(
                                                 'teammembers.team_member',
                                                 'teammembers.staffcode',
                                                 'teamrolehistory.newstaff_code',
                                                 'teamrolehistory.created_at',
                                             )
                                             ->first();

                                         $datadate = Carbon\Carbon::createFromFormat(
                                             'Y-m-d H:i:s',
                                             $applyleaveDatas->created_at,
                                         );

                                         $permotiondate = null;
                                         if ($approvelpartner->created_at) {
                                             $permotiondate = Carbon\Carbon::createFromFormat(
                                                 'Y-m-d H:i:s',
                                                 $approvelpartner->created_at,
                                             );
                                         }
                                     @endphp


                                     <td class="textfixed">
                                         {{ $approvelpartner->team_member ?? '' }}
                                     </td>
                                     <td>
                                         @if ($permotiondate && $datadate->greaterThan($permotiondate))
                                             {{ $approvelpartner->newstaff_code }}
                                         @else
                                             {{ $approvelpartner->staffcode }}
                                         @endif
                                     </td>
                                     <td class="textfixed">
                                         {{ $applyleaveDatas->reasonleave ?? '' }}
                                     </td>
                                     <td style="align-content: center;">
                                         @if ($applyleaveDatas->status == 0)
                                             <form method="post"
                                                 action="{{ route('applyleave.update', $applyleaveDatas->id) }}"
                                                 enctype="multipart/form-data" style="text-align: center;margin: 0px;">
                                                 @method('PATCH')
                                                 @csrf
                                                 <input type="text" hidden id="example-date-input" name="status"
                                                     value="1" class="form-control" placeholder="Enter Location">
                                                 <button type="submit" class="btn btn-success"
                                                     style="border-radius: 7px; font-size: 10px; padding: 5px;">
                                                     Approve</button>
                                             </form>
                                         @endif
                                     </td>
                                     <td style="align-content: center;">
                                         @if ($applyleaveDatas->status == 0)
                                             <button data-toggle="modal" data-target="#exampleModal12{{ $loop->index }}"
                                                 class="btn btn-danger"
                                                 style="border-radius: 7px; font-size: 10px; padding: 5px;">
                                                 Reject</button>
                                         @endif
                                     </td>

                                     {{-- model box --}}
                                     <div class="modal fade" id="exampleModal12{{ $loop->index }}" tabindex="-1"
                                         role="dialog" aria-labelledby="exampleModalLabel4" aria-hidden="true">
                                         <div class="modal-dialog" role="document">
                                             <div class="modal-content">
                                                 <div class="modal-header" style="background:#37A000">
                                                     <h5 style="color: white" class="modal-title font-weight-600"
                                                         id="exampleModalLabel1">Reason For
                                                         Rejection</h5>
                                                     <button type="button" class="close" data-dismiss="modal"
                                                         aria-label="Close">
                                                         <span aria-hidden="true">&times;</span>
                                                     </button>
                                                 </div>
                                                 <form method="post"
                                                     action="{{ url('applyleave/update', $applyleaveDatas->id) }}"
                                                     enctype="multipart/form-data">
                                                     @csrf
                                                     <div class="modal-body">
                                                         <div class="row row-sm">
                                                             <div class="col-12">
                                                                 <div class="form-group">
                                                                     <textarea rows="6" name="remark" class="form-control" placeholder=""></textarea>
                                                                     <input hidden type="text" id="example-date-input"
                                                                         name="status" value="2"
                                                                         class="form-control" placeholder="Enter Reason">
                                                                 </div>
                                                             </div>
                                                         </div>
                                                         <button type="button" class="btn btn-danger"
                                                             data-dismiss="modal">Close</button>
                                                         <button type="submit" style="float: right"
                                                             class="btn btn-success">Save </button>
                                                     </div>
                                                 </form>
                                             </div>
                                         </div>
                                     </div>
                                 </tr>
                             @endforeach
                         </tbody>
                     </table>
                   





Blade 222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222
resources\views\backEnd\applyleave\teamapplication.blade.php


 <script>
     $(document).ready(function() {
         $('#examplee').DataTable({
             dom: 'Bfrtip',
             "pageLength": 25,
             "order": [
                 [4, "asc"]
             ],
             columnDefs: [{
                 targets: [1, 2, 5, 6, 7, 8, 9, 10, 11, 12],
                 orderable: false
             }],
             buttons: [{
                     extend: 'copyHtml5',
                     exportOptions: {
                         columns: [0, ':visible']
                     }
                 },
                 {
                     extend: 'excelHtml5',
                     filename: 'Apply Report List',
                     //  Change value Acreated to created and AApproved to Approved
                     customizeData: function(data) {
                         for (var i = 0; i < data.body.length; i++) {
                             for (var j = 0; j < data.body[i].length; j++) {
                                 if (data.body[i][j] === 'ACreated') {
                                     data.body[i][j] = 'Created';
                                 } else if (data.body[i][j] === 'BApproved') {
                                     data.body[i][j] = 'Approved';
                                 } else if (data.body[i][j] === 'Rejected') {
                                     data.body[i][j] = 'Rejected';
                                 }
                             }
                         }
                     },
                     //  exportOptions: {
                     //      columns: ':visible'
                     //  }
                     exportOptions: {
                         columns: ':visible',
                         format: {
                             body: function(data, row, column, node) {
                                 // it should be column number 2
                                 if (column === 2) {
                                     // If the data is a date, extract the date without HTML tags
                                     var cleanedText = $(data).text().trim();
                                     var dateParts = cleanedText.split(
                                         '-');
                                     // Assuming the date format is yyyy-mm-dd
                                     if (dateParts.length === 3) {
                                         return dateParts[2] + '-' + dateParts[1] + '-' +
                                             dateParts[0];
                                     }
                                 }
                                 if (column === 0 || column === 3 || column === 10 || column ===
                                     11) {
                                     var cleanedText = $(data).text().trim();
                                     return cleanedText;
                                 }
                                 return data;
                             }
                         }
                     }
                 },
                 {
                     extend: 'pdfHtml5',
                     filename: 'Apply Report List',
                     //  Change value Acreated to created and AApproved to Approved
                     customize: function(doc) {
                         // Assuming the status column is at index 3, adjust as needed
                         for (var i = 0; i < doc.content[1].table.body.length; i++) {
                             var originalValue = doc.content[1].table.body[i][3].text;
                             if (originalValue === 'ACreated') {
                                 doc.content[1].table.body[i][3].text = 'Created';
                             } else if (originalValue === 'BApproved') {
                                 doc.content[1].table.body[i][3].text = 'Approved';
                             } else if (originalValue === 'CRejected') {
                                 doc.content[1].table.body[i][3].text = 'Rejected';
                             }
                         }
                     },
                     exportOptions: {
                         columns: [0, 1, 2, 5]
                     }
                 },
                 'colvis'
             ]
         });
     });
 </script>


  done 

Blade 222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222
resources\views\backEnd\applyleave\teamapplication.blade.php


 <script>
     $(document).ready(function() {
         // Common function to render table rows
         function renderTableRows(data) {
             $('table tbody').html("");
             $('#clickExcell').show();

             if (data.length === 0) {
                 $('table tbody').append('<tr><td colspan="8" class="text-center">No data found</td></tr>');
             } else {
                 $.each(data, function(index, item) {
                     var url = '/applyleave/' + item.id;
                     var createdAt = formatDate(item.created_at);
                     var fromDate = formatDate(item.from);
                     var toDate = formatDate(item.to);
                     var holidays = Math.floor((new Date(item.to) - new Date(item.from)) / (24 * 60 *
                         60 * 1000)) + 1;

                     $('table tbody').append('<tr>' +
                         '<td><a href="' + url + '">' + item.team_member + '</a></td>' +
                         //  '<td>' + item.staffcode + '</td>' +
                         '<td>' + (item.teamnewstaffcode ? item.teamnewstaffcode : item.staffcode) +
                         '</td>' +
                         '<td>' + createdAt + '</td>' +
                         '<td>' + getStatusBadge(item.status) + '</td>' +
                         '<td>' + item.name + '</td>' +
                         '<td>' + fromDate + ' to ' + toDate + '</td>' +
                         '<td>' + holidays + '</td>' +
                         '<td>' + item.approvernames + '</td>' +
                         //  '<td>' + item.approvernames + '</td>' +
                         '<td>' + (item.newstaff_code ? item.newstaff_code : item
                             .approverstaffcode) + '</td>' +
                         '<td style="width: 7rem;text-wrap: wrap;">' + item.reasonleave + '</td>' +
                         '</tr>');
                 });
             }
         }

         // Common function to export data to Excel
         function exportToExcel(data) {
             const filteredData = data.map(item => {
                 const holidays = Math.floor((new Date(item.to) - new Date(item.from)) / (24 * 60 * 60 *
                     1000)) + 1;
                 const createdAt = formatDate(item.created_at);
                 const fromDate = formatDate(item.from);
                 const toDate = formatDate(item.to);

                 return {
                     Employee: item.team_member,
                     Staff_code: item.teamnewstaffcode ? item.teamnewstaffcode : item.staffcode,
                     Date_of_Request: createdAt,
                     status: getStatusText(item.status),
                     Leave_Type: item.name,
                     from: fromDate,
                     to: toDate,
                     Days: holidays,
                     Approver: item.approvernames,
                     Approver_Code: item.newstaff_code ? item.newstaff_code : item.approverstaffcode,
                     Reason_for_Leave: item.reasonleave
                 };
             });

             const ws = XLSX.utils.json_to_sheet(filteredData);
             const headerCellStyle = {
                 font: {
                     bold: true
                 }
             };

             ws['!cols'] = [{
                     wch: 15
                 },
                 {
                     wch: 20
                 },
                 {
                     wch: 15
                 },
                 {
                     wch: 20
                 },
                 {
                     wch: 15
                 },
                 {
                     wch: 15
                 },
                 {
                     wch: 20
                 },
                 {
                     wch: 20
                 },
                 {
                     wch: 20
                 },
                 {
                     wch: 30
                 }
             ];

             Object.keys(ws).filter(key => key.startsWith('A')).forEach(key => {
                 ws[key].s = headerCellStyle;
             });

             const wb = XLSX.utils.book_new();
             XLSX.utils.book_append_sheet(wb, ws, "FilteredData");
             const excelBuffer = XLSX.write(wb, {
                 bookType: "xlsx",
                 type: "array"
             });
             const dataBlob = new Blob([excelBuffer], {
                 type: "application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"
             });
             saveAs(dataBlob, "Apply_Report_Filter_List.xlsx");
         }

         // Common function to format date
         function formatDate(dateString) {
             return new Date(dateString).toLocaleDateString('en-GB', {
                 day: '2-digit',
                 month: '2-digit',
                 year: 'numeric'
             });
         }

         // Common function to get status text
         function getStatusText(status) {
             return status === 0 ? 'Created' : status === 1 ? 'Approved' : status === 2 ? 'Rejected' : '';
         }

         // Common function to get status badge
         function getStatusBadge(status) {
             if (status === 0) {
                 return '<span class="badge badge-pill badge-warning"><span style="display: none;">A</span>Created</span>';
             } else if (status === 1) {
                 return '<span class="badge badge-success"><span style="display: none;">B</span>Approved</span>';
             } else if (status === 2) {
                 return '<span class="badge badge-danger">Rejected</span>';
             } else {
                 return '';
             }
         }

         // Function to handle status change
         function handleStatusChange() {
             var endperiod1 = $('#endperiod1').val();
             var startperiod1 = $('#startperiod1').val();
             var employee1 = $('#employee1').val();
             var leave1 = $('#leave1').val();
             var status1 = $('#status1').val();
             var end1 = $('#end1').val();
             var start1 = $('#start1').val();
             $('#clickExcell').hide();

             $.ajax({
                 type: 'GET',
                 url: '/filtering-applyleve',
                 data: {
                     end: end1,
                     start: start1,
                     startperiod: startperiod1,
                     endperiod: endperiod1,
                     status: status1,
                     employee: employee1,
                     leave: leave1
                 },
                 success: function(data) {
                     renderTableRows(data);
                     $('.paging_simple_numbers').remove();
                     $('.dataTables_info').remove();

                     // Remove previus attachment on download button 
                     $('#clickExcell').off('click');

                     if (data.length > 0) {
                         $('#clickExcell').on('click', function() {
                             exportToExcel(data);
                         });
                     }
                     $('#clickExcell').show();
                 }
             });
         }

         // Function to handle leave type change
         function handleLeaveTypeChange() {
             var endperiod1 = $('#endperiod1').val();
             var startperiod1 = $('#startperiod1').val();
             var employee1 = $('#employee1').val();
             var leave1 = $('#leave1').val();
             var status1 = $('#status1').val();
             var end1 = $('#end1').val();
             var start1 = $('#start1').val();
             $('#clickExcell').hide();

             $.ajax({
                 type: 'GET',
                 url: '/filtering-applyleve',
                 data: {
                     end: end1,
                     start: start1,
                     startperiod: startperiod1,
                     endperiod: endperiod1,
                     status: status1,
                     employee: employee1,
                     leave: leave1
                 },
                 success: function(data) {
                     renderTableRows(data);
                     $('.paging_simple_numbers').remove();
                     $('.dataTables_info').remove();
                     // Remove previus attachment on download button 
                     $('#clickExcell').off('click');
                     if (data.length > 0) {
                         $('#clickExcell').on('click', function() {
                             exportToExcel(data);
                         });
                     }
                     $('#clickExcell').show();
                 }
             });
         }

         // Function to handle employee change
         function handleEmployeeChange() {
             var endperiod1 = $('#endperiod1').val();
             var startperiod1 = $('#startperiod1').val();
             var employee1 = $('#employee1').val();
             var leave1 = $('#leave1').val();
             var status1 = $('#status1').val();
             var end1 = $('#end1').val();
             var start1 = $('#start1').val();
             $('#clickExcell').hide();


             $.ajax({
                 type: 'GET',
                 url: '/filtering-applyleve',
                 data: {
                     end: end1,
                     start: start1,
                     startperiod: startperiod1,
                     endperiod: endperiod1,
                     status: status1,
                     employee: employee1,
                     leave: leave1
                 },
                 success: function(data) {
                     console.log(data)
                     renderTableRows(data);
                     $('.paging_simple_numbers').remove();
                     $('.dataTables_info').remove();
                     // Remove previus attachment on download button 
                     $('#clickExcell').off('click');
                     if (data.length > 0) {
                         $('#clickExcell').on('click', function() {
                             exportToExcel(data);
                         });
                     }
                     $('#clickExcell').show();
                 }
             });
         }

         // Function to handle leave period end date change
         function handleleaveperiodendChange() {
             var endperiod1 = $('#endperiod1').val();
             var startperiod1 = $('#startperiod1').val();
             var employee1 = $('#employee1').val();
             var leave1 = $('#leave1').val();
             var status1 = $('#status1').val();
             var end1 = $('#end1').val();
             var start1 = $('#start1').val();
             $('#clickExcell').hide();

             $.ajax({
                 type: 'GET',
                 url: '/filtering-applyleve',
                 data: {
                     end: end1,
                     start: start1,
                     startperiod: startperiod1,
                     endperiod: endperiod1,
                     status: status1,
                     employee: employee1,
                     leave: leave1
                 },
                 success: function(data) {
                     renderTableRows(data);
                     $('.paging_simple_numbers').remove();
                     $('.dataTables_info').remove();
                     // Remove previus attachment on download button 
                     $('#clickExcell').off('click');
                     if (data.length > 0) {
                         $('#clickExcell').on('click', function() {
                             exportToExcel(data);
                         });
                     }
                     $('#clickExcell').show();
                 }
             });
         }

         //  end Request Date end date wise
         function handleEndRequestDateChange() {
             var endperiod1 = $('#endperiod1').val();
             var startperiod1 = $('#startperiod1').val();
             var employee1 = $('#employee1').val();
             var leave1 = $('#leave1').val();
             var status1 = $('#status1').val();
             var end1 = $('#end1').val();
             var start1 = $('#start1').val();
             $('#clickExcell').hide();


             $.ajax({
                 type: 'GET',
                 url: '/filtering-applyleve',
                 data: {
                     end: end1,
                     start: start1,
                     startperiod: startperiod1,
                     endperiod: endperiod1,
                     status: status1,
                     employee: employee1,
                     leave: leave1
                 },
                 success: function(data) {
                     renderTableRows(data);
                     $('.paging_simple_numbers').remove();
                     $('.dataTables_info').remove();
                     $('#clickExcell').off('click');
                     if (data.length > 0) {
                         $('#clickExcell').on('click', function() {
                             exportToExcel(data);
                         });
                     }
                     $('#clickExcell').show();
                 }
             });
         }

         // Event handlers
         $('#employee1').change(handleEmployeeChange);
         $('#leave1').change(handleLeaveTypeChange);
         $('#status1').change(handleStatusChange);
         $('#end1').change(handleEndRequestDateChange);
         $('#endperiod1').change(handleleaveperiodendChange);
     });
 </script>





Blade 222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222
resources\views\backEnd\timesheet\assignmentlistwithhour.blade.php
3


                        <form method="get" action="{{ url('totaltimeshow/filter') }}" enctype="multipart/form-data"
                            class="form-inline">
                            @csrf
                            @php
                                // Populate filter options
                                $teamselect = $teammemberDatas->unique('teamid')->sortBy('team_member');
                                $partnerselect = $teammemberDatas
                                    ->unique('assignmentgenerate_id')
                                    ->sortBy('assignmentgenerate_id');
                                // dd($teamselect);
                            @endphp
                            <div class="row">
                                <!-- Teammember Filter -->
                                <div class="col-md-6 mb-3">
                                    <div class="form-group">
                                        <strong><label for="employee">Teammember</label></strong>
                                        {{-- <select class="form-control" id="employee" name="employee"> --}}
                                        <select class="language form-control" id="employee" name="employee">
                                            <option value="">Please Select One</option>
                                            @foreach ($teamselect as $teammemberData)
                                                @php
                                                    $permotioncheck = $roleHistories->get($teammemberData->teamid);
                                                    $displayCode =
                                                        $permotioncheck->newstaff_code ?? $teammemberData->staffcode;
                                                @endphp
                                                <option value="{{ $teammemberData->teamid }}/{{ $teammemberData->role_id }}"
                                                    {{ old('employee') == $teammemberData->teamid . '/' . $teammemberData->role_id ? 'selected' : '' }}>
                                                    {{ $teammemberData->team_member }} ({{ $displayCode }})
                                                </option>
                                            @endforeach
                                        </select>
                                    </div>
                                </div>

                                <!-- Assignment Id Filter -->
                                <div class="col-md-4 mb-3">
                                    <div class="form-group">
                                        <strong><label for="assignmentgenerateid">Assignment Id</label></strong>
                                        {{-- <select class="form-control" id="assignmentgenerateid" name="assignmentgenerateid"> --}}
                                        <select class="language form-control" id="assignmentgenerateid"
                                            name="assignmentgenerateid">
                                            <option value="">Please Select One</option>
                                            @foreach ($partnerselect as $assignmentData)
                                                <option value="{{ $assignmentData->assignmentgenerate_id }}"
                                                    {{ old('assignmentgenerateid') == $assignmentData->assignmentgenerate_id ? 'selected' : '' }}>
                                                    {{ $assignmentData->assignmentgenerate_id }}
                                                </option>
                                            @endforeach
                                        </select>
                                    </div>
                                </div>

                                <!-- Search Button -->
                                <div class="col-md-2 mb-3">
                                    <div class="form-group">
                                        <strong><label for="search">&nbsp;</label></strong>
                                        <button type="submit" class="btn btn-success btn-block">Search</button>
                                    </div>
                                </div>
                            </div>
                        </form>








Blade 222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222
resources\views\backEnd\timesheet\assignmentlistwithhour.blade.php
3


                    <table id="examplee" class="display nowrap">
                        <thead>
                            <tr>
                                <th>Teammember</th>
                                <th>Teammember Code</th>
                                <th>Assignment Id</th>
                                <th>Assignment</th>
                                <th>Total Hour</th>
                            </tr>
                        </thead>
                        <tbody>
                            @foreach ($teammemberDatas as $teammemberData)
                                @php
                                    $permotioncheck = $roleHistories->get($teammemberData->teamid);
                                    $assignmentcheck = $assignmentBudgetings->get(
                                        $teammemberData->assignmentgenerate_id,
                                    );

                                    $datadate = $assignmentcheck
                                        ? Carbon\Carbon::createFromFormat('Y-m-d H:i:s', $assignmentcheck->created_at)
                                        : null;
                                    $permotiondate = $permotioncheck
                                        ? Carbon\Carbon::createFromFormat('Y-m-d H:i:s', $permotioncheck->created_at)
                                        : null;

                                    $displayCode =
                                        $permotioncheck && $datadate && $datadate->greaterThan($permotiondate)
                                            ? $permotioncheck->newstaff_code
                                            : $teammemberData->staffcode;

                                    $totalHours =
                                        property_exists($teammemberData, 'leadpartner') &&
                                        $teammemberData->teamid == $teammemberData->leadpartner
                                            ? $teammemberData->leadpartnerhour ?? 0
                                            : (property_exists($teammemberData, 'otherpartner') &&
                                            $teammemberData->teamid == $teammemberData->otherpartner
                                                ? $teammemberData->otherpartnerhour ?? 0
                                                : $teammemberData->teamhour ?? 0);
                                @endphp
                                <tr>
                                    <td>{{ $teammemberData->title }} {{ $teammemberData->team_member }}</td>
                                    <td>{{ $displayCode }}</td>
                                    <td>{{ $teammemberData->assignmentgenerate_id }}</td>
                                    <td>{{ $teammemberData->assignmentname }}</td>
                                    <td>{{ $totalHours }}</td>
                                </tr>
                            @endforeach
                        </tbody>
                    </table>





Blade 222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222
resources\views\backEnd\timesheet\assignmentlistwithhour.blade.php
3


<script>
    $(document).ready(function() {
        $('#examplee').DataTable({
            dom: 'Bfrtip',
            "order": [
                [0, "asc"]
            ],
            columnDefs: [{
                targets: [1, 2, 3, 4],
                orderable: false
            }],
            searching: false,

            buttons: [

                {
                    extend: 'copyHtml5',
                    exportOptions: {
                        columns: [0, ':visible']
                    }
                },
                {
                    extend: 'excelHtml5',
                    filename: 'All Client List',
                    exportOptions: {
                        columns: ':visible'
                    }
                },
                {
                    extend: 'pdfHtml5',
                    exportOptions: {
                        columns: [0, 1, 2, 5]
                    }
                },
                'colvis'
            ]
        });
    });
</script>





Blade 222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222
app\Http\Controllers\TimesheetController.php
4

  // after optimize this code
  public function assignmentHourShowfilter(Request $request)
  {
    // Fetch all necessary data with a single query per table
    $teammemberDatass = DB::table('assignmentteammappings')
      ->leftjoin('assignmentmappings', 'assignmentmappings.id', 'assignmentteammappings.assignmentmapping_id')
      ->leftjoin('assignmentbudgetings', 'assignmentbudgetings.assignmentgenerate_id', 'assignmentmappings.assignmentgenerate_id')
      ->leftjoin('teammembers', 'teammembers.id', 'assignmentteammappings.teammember_id')
      ->leftjoin('titles', 'titles.id', 'teammembers.title_id')
      ->leftjoin('roles', 'roles.id', 'teammembers.role_id')
      ->whereNotIn('teammembers.team_member', ['NA', 'null', 'test staff'])
      ->select('assignmentmappings.id', 'teammembers.id as teamid', 'teammembers.team_member', 'teammembers.role_id', 'teammembers.staffcode', 'titles.title', 'assignmentmappings.assignmentgenerate_id', 'assignmentbudgetings.assignmentname', 'assignmentteammappings.teamhour')
      ->get();

    $patnerdata = DB::table('assignmentmappings')
      ->leftjoin('assignmentbudgetings', 'assignmentbudgetings.assignmentgenerate_id', 'assignmentmappings.assignmentgenerate_id')
      ->leftjoin('teammembers', function ($join) {
        $join->on('teammembers.id', 'assignmentmappings.otherpartner')
          ->orOn('teammembers.id', 'assignmentmappings.leadpartner');
      })
      ->leftjoin('titles', 'titles.id', 'teammembers.title_id')
      ->leftjoin('roles', 'roles.id', 'teammembers.role_id')
      ->whereNotIn('teammembers.team_member', ['NA', 'test staff'])
      ->select('assignmentmappings.id', 'teammembers.id as teamid', 'teammembers.team_member', 'teammembers.staffcode', 'teammembers.role_id', 'titles.title', 'assignmentmappings.assignmentgenerate_id', 'assignmentbudgetings.assignmentname', 'assignmentmappings.otherpartner', 'assignmentmappings.leadpartner', 'assignmentmappings.leadpartnerhour', 'assignmentmappings.otherpartnerhour')
      ->get();

    $allData = $teammemberDatass->merge($patnerdata);

    // Collect ids to fetch role history and assignment budgetings in bulk
    $teamIds = $allData->pluck('teamid')->unique();
    $assignmentIds = $allData->pluck('assignmentgenerate_id')->unique();

    // Fetch role history and assignment budgetings in bulk
    $roleHistories = DB::table('teamrolehistory')
      ->whereIn('teammember_id', $teamIds)
      ->get()
      ->keyBy('teammember_id');

    $assignmentBudgetings = DB::table('assignmentbudgetings')
      ->whereIn('assignmentgenerate_id', $assignmentIds)
      ->get()
      ->keyBy('assignmentgenerate_id');

    // Apply filters
    $teammemberDatas = $allData->filter(function ($item) use ($request, $roleHistories, $assignmentBudgetings) {
      $employee = $request->input('employee');
      $assignmentgenerateid = $request->input('assignmentgenerateid');

      $employeValues = $employee ? explode('/', $employee) : null;
      $teamname = $employeValues[0] ?? null;
      $role_id = $employeValues[1] ?? null;

      $matchesEmployee = $employee ? $item->teamid == $teamname && $item->role_id == $role_id : true;
      $matchesAssignment = $assignmentgenerateid ? $item->assignmentgenerate_id == $assignmentgenerateid : true;

      return $matchesEmployee && $matchesAssignment;
    });

    // Pass filtered data to the view
    $request->flash();
    return view('backEnd.timesheet.assignmentlistwithhour', compact('teammemberDatas', 'roleHistories', 'assignmentBudgetings'));
  }





Blade 222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222
app\Http\Controllers\TimesheetController.php
4


  // after optimize 
  public function assignmentHourShow()
  {
    // Fetch all necessary data with a single query per table
    $teammemberDatass = DB::table('assignmentteammappings')
      ->leftjoin('assignmentmappings', 'assignmentmappings.id', 'assignmentteammappings.assignmentmapping_id')
      ->leftjoin('assignmentbudgetings', 'assignmentbudgetings.assignmentgenerate_id', 'assignmentmappings.assignmentgenerate_id')
      ->leftjoin('teammembers', 'teammembers.id', 'assignmentteammappings.teammember_id')
      ->leftjoin('titles', 'titles.id', 'teammembers.title_id')
      ->leftjoin('roles', 'roles.id', 'teammembers.role_id')
      ->whereNotIn('teammembers.team_member', ['NA', 'null', 'test staff'])
      ->select('assignmentmappings.id', 'teammembers.id as teamid', 'teammembers.team_member', 'teammembers.role_id', 'teammembers.staffcode', 'titles.title', 'assignmentmappings.assignmentgenerate_id', 'assignmentbudgetings.assignmentname', 'assignmentteammappings.teamhour')
      ->get();

    $patnerdata = DB::table('assignmentmappings')
      ->leftjoin('assignmentbudgetings', 'assignmentbudgetings.assignmentgenerate_id', 'assignmentmappings.assignmentgenerate_id')
      ->leftjoin('teammembers', function ($join) {
        $join->on('teammembers.id', 'assignmentmappings.otherpartner')
          ->orOn('teammembers.id', 'assignmentmappings.leadpartner');
      })
      ->leftjoin('titles', 'titles.id', 'teammembers.title_id')
      ->leftjoin('roles', 'roles.id', 'teammembers.role_id')
      ->whereNotIn('teammembers.team_member', ['NA', 'test staff'])
      ->select('assignmentmappings.id', 'teammembers.id as teamid', 'teammembers.team_member', 'teammembers.staffcode', 'teammembers.role_id', 'titles.title', 'assignmentmappings.assignmentgenerate_id', 'assignmentbudgetings.assignmentname', 'assignmentmappings.otherpartner', 'assignmentmappings.leadpartner', 'assignmentmappings.leadpartnerhour', 'assignmentmappings.otherpartnerhour')
      ->get();

    $teammemberDatas = $teammemberDatass->merge($patnerdata);

    // Collect ids to fetch role history and assignment budgetings in bulk
    $teamIds = $teammemberDatas->pluck('teamid')->unique();
    $assignmentIds = $teammemberDatas->pluck('assignmentgenerate_id')->unique();

    // Fetch role history and assignment budgetings in bulk
    $roleHistories = DB::table('teamrolehistory')
      ->whereIn('teammember_id', $teamIds)
      ->get()
      ->keyBy('teammember_id');

    $assignmentBudgetings = DB::table('assignmentbudgetings')
      ->whereIn('assignmentgenerate_id', $assignmentIds)
      ->get()
      ->keyBy('assignmentgenerate_id');

    // Pass data to the view
    return view('backEnd.timesheet.assignmentlistwithhour', compact('teammemberDatas', 'roleHistories', 'assignmentBudgetings'));
  }








Blade 222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222
resources\views\backEnd\applyleave\index.blade.php


                                  <table id="examplee" class="table display table-bordered table-striped table-hover">
                                      <thead>
                                          <tr>
                                              <th class="textfixed">Date of Request</th>
                                              <th>Employee</th>
                                              <th class="textfixed">Staff Code</th>
                                              <th class="textfixed">Leave Type</th>
                                              <th>Approver</th>
                                              <th class="textfixed">Approver Code</th>
                                              <th class="textfixed">Reason for Leave</th>
                                              <th>Leave Period</th>
                                              <th>Days</th>
                                              <th>Status</th>
                                              <th>Action</th>
                                          </tr>
                                      </thead>
                                      <tbody>

                                          @foreach ($myapplyleaveDatas as $applyleaveDatas)
                                              <tr>
                                                  {{-- <td>{{ date('d-m-Y', strtotime($applyleaveDatas->created_at)) ?? '' }}
                                                  </td> --}}
                                                  <td>
                                                      <span style="display: none;">
                                                          {{ date('Y-m-d', strtotime($applyleaveDatas->created_at)) }}
                                                      </span>
                                                      {{ date('d-m-Y', strtotime($applyleaveDatas->created_at)) }}
                                                  </td>
                                                  <td class="textfixed"> <a
                                                          href="{{ route('applyleave.show', $applyleaveDatas->id) }}">
                                                          {{ $applyleaveDatas->team_member ?? '' }}</a></td>
                                                  <td>{{ $applyleaveDatas->newstaff_code ?? $applyleaveDatas->staffcode }}
                                                  </td>
                                                  <td class="textfixed">
                                                      {{ $applyleaveDatas->name ?? '' }}
                                                      @if ($applyleaveDatas->type == '0')
                                                          <b>Type :</b> <span>Birthday</span>
                                                          <span><b>Birthday Date :
                                                              </b>{{ date(
                                                                  'F d,Y',
                                                                  strtotime(
                                                                      App\Models\Teammember::select('dateofbirth')->where('id', $applyleaveDatas->createdby)->first()->dateofbirth,
                                                                  ),
                                                              ) ?? '' }}</span>
                                                      @elseif($applyleaveDatas->type == '1')
                                                          <span>Religious Festival</span>
                                                      @endif
                                                      @if ($applyleaveDatas->examtype == '0')
                                                          <b>Exam Type :</b> <span>PCC</span>
                                                      @elseif($applyleaveDatas->examtype == '1')
                                                          <b>Exam Type :</b> <span>CA Final</span>
                                                      @elseif($applyleaveDatas->examtype == '2')
                                                          <b>Exam Type :</b> <span>B.Com</span>
                                                      @endif
                                                      @if ($applyleaveDatas->examtype == '3')
                                                          <b>Other :</b>
                                                          <span>{{ $applyleaveDatas->otherexam ?? '' }}</span>
                                                      @endif
                                                  </td>
                                                  <td class="textfixed">
                                                      {{ App\Models\Teammember::select('team_member')->where('id', $applyleaveDatas->approver)->first()->team_member ?? '' }}

                                                  </td>
                                                  <td>
                                                      {{ App\Models\Teammember::select('team_member', 'staffcode')->where('id', $applyleaveDatas->approver)->first()->staffcode ?? '' }}
                                                  </td>

                                                  <td>{{ $applyleaveDatas->reasonleave ?? '' }} </td>

                                                  <td class="textfixed">
                                                      {{ date('d-m-Y', strtotime($applyleaveDatas->from)) ?? '' }} -
                                                      {{ date('d-m-Y', strtotime($applyleaveDatas->to)) ?? '' }}</td>
                                                  @php
                                                      $to = Carbon\Carbon::createFromFormat(
                                                          'Y-m-d',
                                                          $applyleaveDatas->to ?? '',
                                                      );
                                                      $from = Carbon\Carbon::createFromFormat(
                                                          'Y-m-d',
                                                          $applyleaveDatas->from,
                                                      );
                                                      $diff_in_days = $to->diffInDays($from) + 1;
                                                      $holidaycount = DB::table('holidays')
                                                          ->where('startdate', '>=', $applyleaveDatas->from)
                                                          ->where('enddate', '<=', $applyleaveDatas->to)
                                                          ->count();
                                                  @endphp
                                                  <td>{{ $diff_in_days - $holidaycount ?? '' }}</td>


                                                  <td>
                                                      @if ($applyleaveDatas->status == 0)
                                                          <span class="badge badge-pill badge-warning">Created</span>
                                                      @elseif($applyleaveDatas->status == 1)
                                                          <span class="badge badge-success">Approved</span>
                                                      @elseif($applyleaveDatas->status == 2)
                                                          <span class="badge badge-danger">Rejected</span>
                                                      @endif
                                                  </td>
                                                  <td>

                                                      @php
                                                          $currentDate = now()->format('Y-m-d');
                                                          $lastdate = $applyleaveDatas->to;
                                                      @endphp
                                                      @if ($lastdate >= $currentDate && $applyleaveDatas->status == 1)
                                                          <button class="btn btn-danger" data-toggle="modal"
                                                              style="height: 16px; width: auto; border-radius: 7px; display: flex; align-items: center; justify-content: center;font-size: 11px;"
                                                              data-target="#requestModal{{ $applyleaveDatas->id }}">Request</button>
                                                      @endif
                                                  </td>

                                              </tr>

                                              @if ($applyleaveDatas->leavetype == 11 || $applyleaveDatas->leavetype == 9)
                                                  <div class="modal fade" id="requestModal{{ $applyleaveDatas->id }}"
                                                      tabindex="-1" role="dialog" aria-labelledby="requestModalLabel"
                                                      aria-hidden="true">
                                                      <div class="modal-dialog" role="document">
                                                          <form method="post" action="{{ route('applyleaverequest') }}"
                                                              enctype="multipart/form-data">
                                                              @csrf
                                                              <div class="modal-content">
                                                                  <div class="modal-header">

                                                                      <h5 class="modal-title" id="requestModalLabel">Enter
                                                                          Request Details</h5>
                                                                      <button type="button" class="close"
                                                                          data-dismiss="modal" aria-label="Close">
                                                                          <span aria-hidden="true">&times;</span>
                                                                      </button>
                                                                  </div>
                                                                  <div class="modal-body">
                                                                      @if ($errors->any())
                                                                          <div class="">
                                                                              <ul>
                                                                                  @foreach ($errors->all() as $error)
                                                                                      <li class="text-danger">
                                                                                          {{ $error }}</li>
                                                                                  @endforeach
                                                                              </ul>
                                                                          </div>
                                                                      @endif

                                                                      <input type="hidden" name="applyleaveid"
                                                                          value="{{ $applyleaveDatas->id }}"
                                                                          class="form-control" placeholder="">
                                                                      <input type="hidden" name="createdby"
                                                                          value="{{ $applyleaveDatas->createdby }}"
                                                                          class="form-control" placeholder="">
                                                                      <input type="hidden" name="approver"
                                                                          value="{{ $applyleaveDatas->approver }}"
                                                                          class="form-control" placeholder="">
                                                                      <input type="hidden" name="status"
                                                                          value="{{ $applyleaveDatas->status }}"
                                                                          class="form-control" placeholder="">
                                                                      <input type="hidden" name="leavetype"
                                                                          value="{{ $applyleaveDatas->leavetype }}"
                                                                          class="form-control" placeholder="">
                                                                      <input type="hidden" name="from"
                                                                          value="{{ $applyleaveDatas->from }}"
                                                                          class="form-control" placeholder=""
                                                                          id="startdateleave">
                                                                      <input type="hidden" name="to"
                                                                          value="{{ $applyleaveDatas->to }}"
                                                                          class="form-control" placeholder=""
                                                                          id="enddateleave">

                                                                      <!-- Input fields for request details here -->
                                                                      <label for="">Reason:*</label>

                                                                      <input type="text" name="reason"
                                                                          class="form-control" placeholder="Enter Reason"
                                                                          required>
                                                                      <label for="">Select Date:*</label>
                                                                      <input type="date" name="date"
                                                                          class="form-control yearValidate" maxlength="10"
                                                                          required>
                                                                      {{-- validation for year --}}

                                                                      <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>

                                                                      <script>
                                                                          $(document).ready(function() {
                                                                              $('.yearValidate').on('change', function() {
                                                                                  var leaveDate = $('.yearValidate');
                                                                                  //   alert(leaveDate);
                                                                                  var leaveDateValue = $('.yearValidate').val();
                                                                                  //   console.log(leaveDateValue);
                                                                                  var leaveDateGet = new Date(leaveDateValue);
                                                                                  var leaveyear = leaveDateGet.getFullYear();
                                                                                  // console.log(startyear);
                                                                                  var leaveyearLength = leaveyear.toString().length;
                                                                                  if (leaveyearLength > 4) {
                                                                                      alert('Enter four digits for the year');
                                                                                      leaveDate.val('');
                                                                                  }
                                                                              });
                                                                          });
                                                                      </script>

                                                                  </div>
                                                                  <div class="modal-footer">
                                                                      <button type="button" class="btn btn-secondary"
                                                                          data-dismiss="modal">Close</button>
                                                                      <button type="submit"
                                                                          class="btn btn-primary">Submit</button>
                                                                  </div>
                                                              </div>
                                                          </form>
                                                      </div>
                                                  </div>
                                              @endif
                                          @endforeach
                                      </tbody>
                                  </table>




Blade 222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222
resources\views\backEnd\applyleave\index.blade.php


                                  <table id="examplee" class="table display table-bordered table-striped table-hover">
                                      <thead>
                                          <tr>
                                              <th class="textfixed">Date of Request</th>
                                              <th>Employee</th>
                                              <th class="textfixed">Staff Code</th>
                                              <th class="textfixed">Leave Type</th>
                                              <th>Approver</th>
                                              <th class="textfixed">Approver Code</th>
                                              <th>Reason for Leave</th>
                                              <th>Leave Period</th>
                                              <th>Days</th>
                                              <th>Status</th>
                                              <th>Action</th>
                                          </tr>
                                      </thead>
                                      <tbody>

                                          @foreach ($myapplyleaveDatas as $applyleaveDatas)
                                              <tr>
                                                  {{-- <td>{{ date('d-m-Y', strtotime($applyleaveDatas->created_at)) ?? '' }}
                                                  </td> --}}
                                                  <td>
                                                      <span style="display: none;">
                                                          {{ date('Y-m-d', strtotime($applyleaveDatas->created_at)) }}
                                                      </span>
                                                      {{ date('d-m-Y', strtotime($applyleaveDatas->created_at)) }}
                                                  </td>
                                                  <td class="textfixed"> <a
                                                          href="{{ route('applyleave.show', $applyleaveDatas->id) }}">
                                                          {{ $applyleaveDatas->team_member ?? '' }}</a></td>
                                                  <td>{{ $applyleaveDatas->newstaff_code ?? $applyleaveDatas->staffcode }}
                                                  </td>
                                                  <td class="textfixed">
                                                      {{ $applyleaveDatas->name ?? '' }}
                                                      @if ($applyleaveDatas->type == '0')
                                                          <b>Type :</b> <span>Birthday</span>
                                                          <span><b>Birthday Date :
                                                              </b>{{ date(
                                                                  'F d,Y',
                                                                  strtotime(
                                                                      App\Models\Teammember::select('dateofbirth')->where('id', $applyleaveDatas->createdby)->first()->dateofbirth,
                                                                  ),
                                                              ) ?? '' }}</span>
                                                      @elseif($applyleaveDatas->type == '1')
                                                          <span>Religious Festival</span>
                                                      @endif
                                                      @if ($applyleaveDatas->examtype == '0')
                                                          <b>Exam Type :</b> <span>PCC</span>
                                                      @elseif($applyleaveDatas->examtype == '1')
                                                          <b>Exam Type :</b> <span>CA Final</span>
                                                      @elseif($applyleaveDatas->examtype == '2')
                                                          <b>Exam Type :</b> <span>B.Com</span>
                                                      @endif
                                                      @if ($applyleaveDatas->examtype == '3')
                                                          <b>Other :</b>
                                                          <span>{{ $applyleaveDatas->otherexam ?? '' }}</span>
                                                      @endif
                                                  </td>
                                                  <td class="textfixed">
                                                      {{ App\Models\Teammember::select('team_member')->where('id', $applyleaveDatas->approver)->first()->team_member ?? '' }}

                                                  </td>
                                                  <td>
                                                      {{ App\Models\Teammember::select('team_member', 'staffcode')->where('id', $applyleaveDatas->approver)->first()->staffcode ?? '' }}
                                                  </td>

                                                  <td class="textfixed">{{ $applyleaveDatas->reasonleave ?? '' }} </td>

                                                  <td class="textfixed">
                                                      {{ date('d-m-Y', strtotime($applyleaveDatas->from)) ?? '' }} -
                                                      {{ date('d-m-Y', strtotime($applyleaveDatas->to)) ?? '' }}</td>
                                                  @php
                                                      $to = Carbon\Carbon::createFromFormat(
                                                          'Y-m-d',
                                                          $applyleaveDatas->to ?? '',
                                                      );
                                                      $from = Carbon\Carbon::createFromFormat(
                                                          'Y-m-d',
                                                          $applyleaveDatas->from,
                                                      );
                                                      $diff_in_days = $to->diffInDays($from) + 1;
                                                      $holidaycount = DB::table('holidays')
                                                          ->where('startdate', '>=', $applyleaveDatas->from)
                                                          ->where('enddate', '<=', $applyleaveDatas->to)
                                                          ->count();
                                                  @endphp
                                                  <td>{{ $diff_in_days - $holidaycount ?? '' }}</td>


                                                  <td>
                                                      @if ($applyleaveDatas->status == 0)
                                                          <span class="badge badge-pill badge-warning">Created</span>
                                                      @elseif($applyleaveDatas->status == 1)
                                                          <span class="badge badge-success">Approved</span>
                                                      @elseif($applyleaveDatas->status == 2)
                                                          <span class="badge badge-danger">Rejected</span>
                                                      @endif
                                                  </td>
                                                  <td>

                                                      @php
                                                          $currentDate = now()->format('Y-m-d');
                                                          $lastdate = $applyleaveDatas->to;
                                                      @endphp
                                                      @if ($lastdate >= $currentDate && $applyleaveDatas->status == 1)
                                                          <button class="btn btn-danger" data-toggle="modal"
                                                              style="height: 16px; width: auto; border-radius: 7px; display: flex; align-items: center; justify-content: center;font-size: 11px;"
                                                              data-target="#requestModal{{ $applyleaveDatas->id }}">Request</button>
                                                      @endif
                                                  </td>

                                              </tr>

                                              @if ($applyleaveDatas->leavetype == 11 || $applyleaveDatas->leavetype == 9)
                                                  <div class="modal fade" id="requestModal{{ $applyleaveDatas->id }}"
                                                      tabindex="-1" role="dialog" aria-labelledby="requestModalLabel"
                                                      aria-hidden="true">
                                                      <div class="modal-dialog" role="document">
                                                          <form method="post" action="{{ route('applyleaverequest') }}"
                                                              enctype="multipart/form-data">
                                                              @csrf
                                                              <div class="modal-content">
                                                                  <div class="modal-header">

                                                                      <h5 class="modal-title" id="requestModalLabel">Enter
                                                                          Request Details</h5>
                                                                      <button type="button" class="close"
                                                                          data-dismiss="modal" aria-label="Close">
                                                                          <span aria-hidden="true">&times;</span>
                                                                      </button>
                                                                  </div>
                                                                  <div class="modal-body">
                                                                      @if ($errors->any())
                                                                          <div class="">
                                                                              <ul>
                                                                                  @foreach ($errors->all() as $error)
                                                                                      <li class="text-danger">
                                                                                          {{ $error }}</li>
                                                                                  @endforeach
                                                                              </ul>
                                                                          </div>
                                                                      @endif

                                                                      <input type="hidden" name="applyleaveid"
                                                                          value="{{ $applyleaveDatas->id }}"
                                                                          class="form-control" placeholder="">
                                                                      <input type="hidden" name="createdby"
                                                                          value="{{ $applyleaveDatas->createdby }}"
                                                                          class="form-control" placeholder="">
                                                                      <input type="hidden" name="approver"
                                                                          value="{{ $applyleaveDatas->approver }}"
                                                                          class="form-control" placeholder="">
                                                                      <input type="hidden" name="status"
                                                                          value="{{ $applyleaveDatas->status }}"
                                                                          class="form-control" placeholder="">
                                                                      <input type="hidden" name="leavetype"
                                                                          value="{{ $applyleaveDatas->leavetype }}"
                                                                          class="form-control" placeholder="">
                                                                      <input type="hidden" name="from"
                                                                          value="{{ $applyleaveDatas->from }}"
                                                                          class="form-control" placeholder=""
                                                                          id="startdateleave">
                                                                      <input type="hidden" name="to"
                                                                          value="{{ $applyleaveDatas->to }}"
                                                                          class="form-control" placeholder=""
                                                                          id="enddateleave">

                                                                      <!-- Input fields for request details here -->
                                                                      <label for="">Reason:*</label>

                                                                      <input type="text" name="reason"
                                                                          class="form-control" placeholder="Enter Reason"
                                                                          required>
                                                                      <label for="">Select Date:*</label>
                                                                      <input type="date" name="date"
                                                                          class="form-control yearValidate" maxlength="10"
                                                                          required>
                                                                      {{-- validation for year --}}

                                                                      <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>

                                                                      <script>
                                                                          $(document).ready(function() {
                                                                              $('.yearValidate').on('change', function() {
                                                                                  var leaveDate = $('.yearValidate');
                                                                                  //   alert(leaveDate);
                                                                                  var leaveDateValue = $('.yearValidate').val();
                                                                                  //   console.log(leaveDateValue);
                                                                                  var leaveDateGet = new Date(leaveDateValue);
                                                                                  var leaveyear = leaveDateGet.getFullYear();
                                                                                  // console.log(startyear);
                                                                                  var leaveyearLength = leaveyear.toString().length;
                                                                                  if (leaveyearLength > 4) {
                                                                                      alert('Enter four digits for the year');
                                                                                      leaveDate.val('');
                                                                                  }
                                                                              });
                                                                          });
                                                                      </script>

                                                                  </div>
                                                                  <div class="modal-footer">
                                                                      <button type="button" class="btn btn-secondary"
                                                                          data-dismiss="modal">Close</button>
                                                                      <button type="submit"
                                                                          class="btn btn-primary">Submit</button>
                                                                  </div>
                                                              </div>
                                                          </form>
                                                      </div>
                                                  </div>
                                              @endif
                                          @endforeach
                                      </tbody>
                                  </table>
								  



Blade 222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222
resources\views\backEnd\applyleave\view.blade.php

                                    <tr>
                                        <td><b>From Date : </b></td>
                                        <td>{{ date('d-m-Y', strtotime($applyleave->from)) }}</td>
                                        <td><b>To Date :</b></td>
                                        <td>{{ date('d-m-Y', strtotime($applyleave->to)) }}</td>
                                    </tr>
									
									
									

Blade 222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222
find text and add tooltip 

{{ $applyleaveDatas->reasonleave


                                     <td class="textfixed">
                                         @if (strlen($applyleaveDatas->reasonleave) > 25)
                                             <span class="reasonleave-truncated" data-toggle="tooltip"
                                                 title="{{ $applyleaveDatas->reasonleave }}">
                                                 {{ substr($applyleaveDatas->reasonleave, 0, 25) }}...
                                             </span>
                                         @else
                                             {{ $applyleaveDatas->reasonleave ?? '' }}
                                         @endif
                                     </td>



Blade 222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222
find text and add tooltip 

->reason

<td class="textfixed">
    @if (strlen($timesheetrequestsData->reason) > 25)
        <span class="reasonleave-truncated" data-toggle="tooltip"
            title="{{ $timesheetrequestsData->reason }}">
            {{ substr($timesheetrequestsData->reason, 0, 25) }}...
        </span>
    @else
        {{ $timesheetrequestsData->reason ?? '' }}
    @endif
</td>






bugs after testing 
16-08-24   above all code updated on vsademo and vsalive 
Blade 222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222
resources\views\backEnd\applyleave\index.blade.php

Assignedpartner Code     Assigned Partner Code 

Otherpartner Code        Other Partner Code


Blade 222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222
resources\views\backEnd\layouts\includes\leftsidebar.blade.php


  {{-- @if (Auth::user()->role_id == 18 || Auth::user()->role_id == 11)
                                      <li><a href="{{ url('attendance') }}">Attendance</a></li>
                                      <!-- <li><a href="{{ url('check-In') }}">Check In/Out</a></li>-->
                                  @endif --}}


Blade 222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222
resources\views\backEnd\timesheet\timesheetdownload.blade.php

remove all code hare 



Blade 222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222
Route::get('/permotionrejoiningreport', [PromotionandrejoiningController::class, 'index']);



Blade 222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222
app\Http\Controllers\TimesheetController.php


  public function assignmentHourShow()
  {
    // Fetch all necessary data with a single query per table
    $teammemberDatass = DB::table('assignmentteammappings')
      ->leftjoin('assignmentmappings', 'assignmentmappings.id', 'assignmentteammappings.assignmentmapping_id')
      ->leftjoin('assignmentbudgetings', 'assignmentbudgetings.assignmentgenerate_id', 'assignmentmappings.assignmentgenerate_id')
      ->leftjoin('teammembers', 'teammembers.id', 'assignmentteammappings.teammember_id')
      ->leftjoin('titles', 'titles.id', 'teammembers.title_id')
      ->leftjoin('roles', 'roles.id', 'teammembers.role_id')
      ->whereNotIn('teammembers.team_member', ['NA', 'null', 'test staff'])
      ->select('assignmentmappings.id', 'teammembers.id as teamid', 'teammembers.team_member', 'teammembers.role_id', 'teammembers.staffcode', 'titles.title', 'assignmentmappings.assignmentgenerate_id', 'assignmentbudgetings.assignmentname', 'assignmentteammappings.teamhour')
      ->get();

    $patnerdata = DB::table('assignmentmappings')
      ->leftjoin('assignmentbudgetings', 'assignmentbudgetings.assignmentgenerate_id', 'assignmentmappings.assignmentgenerate_id')
      ->leftjoin('teammembers', function ($join) {
        $join->on('teammembers.id', 'assignmentmappings.otherpartner')
          ->orOn('teammembers.id', 'assignmentmappings.leadpartner');
      })
      ->leftjoin('titles', 'titles.id', 'teammembers.title_id')
      ->leftjoin('roles', 'roles.id', 'teammembers.role_id')
      ->whereNotIn('teammembers.team_member', ['NA', 'test staff'])
      ->select('assignmentmappings.id', 'teammembers.id as teamid', 'teammembers.team_member', 'teammembers.staffcode', 'teammembers.role_id', 'titles.title', 'assignmentmappings.assignmentgenerate_id', 'assignmentbudgetings.assignmentname', 'assignmentmappings.otherpartner', 'assignmentmappings.leadpartner', 'assignmentmappings.leadpartnerhour', 'assignmentmappings.otherpartnerhour')
      ->get();

    $teammemberDatas = $teammemberDatass->merge($patnerdata);

    // Collect ids to fetch role history and assignment budgetings in bulk
    $teamIds = $teammemberDatas->pluck('teamid')->unique();
    $assignmentIds = $teammemberDatas->pluck('assignmentgenerate_id')->unique();

    // Fetch role history and assignment budgetings in bulk
    $roleHistories = DB::table('teamrolehistory')
      ->whereIn('teammember_id', $teamIds)
      ->get()
      ->keyBy('teammember_id');

    $assignmentBudgetings = DB::table('assignmentbudgetings')
      ->whereIn('assignmentgenerate_id', $assignmentIds)
      ->get()
      ->keyBy('assignmentgenerate_id');

    // Pass data to the view
    return view('backEnd.timesheet.assignmentlistwithhour', compact('teammemberDatas', 'roleHistories', 'assignmentBudgetings'));
  }
  
  
  
  
  
  
  
  
  
  
  
  
    public function assignmentHourShowfilter(Request $request)
  {
    // Fetch all necessary data with a single query per table
    $teammemberDatass = DB::table('assignmentteammappings')
      ->leftjoin('assignmentmappings', 'assignmentmappings.id', 'assignmentteammappings.assignmentmapping_id')
      ->leftjoin('assignmentbudgetings', 'assignmentbudgetings.assignmentgenerate_id', 'assignmentmappings.assignmentgenerate_id')
      ->leftjoin('teammembers', 'teammembers.id', 'assignmentteammappings.teammember_id')
      ->leftjoin('titles', 'titles.id', 'teammembers.title_id')
      ->leftjoin('roles', 'roles.id', 'teammembers.role_id')
      ->whereNotIn('teammembers.team_member', ['NA', 'null', 'test staff'])
      ->select('assignmentmappings.id', 'teammembers.id as teamid', 'teammembers.team_member', 'teammembers.role_id', 'teammembers.staffcode', 'titles.title', 'assignmentmappings.assignmentgenerate_id', 'assignmentbudgetings.assignmentname', 'assignmentteammappings.teamhour')
      ->get();

    $patnerdata = DB::table('assignmentmappings')
      ->leftjoin('assignmentbudgetings', 'assignmentbudgetings.assignmentgenerate_id', 'assignmentmappings.assignmentgenerate_id')
      ->leftjoin('teammembers', function ($join) {
        $join->on('teammembers.id', 'assignmentmappings.otherpartner')
          ->orOn('teammembers.id', 'assignmentmappings.leadpartner');
      })
      ->leftjoin('titles', 'titles.id', 'teammembers.title_id')
      ->leftjoin('roles', 'roles.id', 'teammembers.role_id')
      ->whereNotIn('teammembers.team_member', ['NA', 'test staff'])
      ->select('assignmentmappings.id', 'teammembers.id as teamid', 'teammembers.team_member', 'teammembers.staffcode', 'teammembers.role_id', 'titles.title', 'assignmentmappings.assignmentgenerate_id', 'assignmentbudgetings.assignmentname', 'assignmentmappings.otherpartner', 'assignmentmappings.leadpartner', 'assignmentmappings.leadpartnerhour', 'assignmentmappings.otherpartnerhour')
      ->get();

    $allData = $teammemberDatass->merge($patnerdata);

    // Collect ids to fetch role history and assignment budgetings in bulk
    $teamIds = $allData->pluck('teamid')->unique();
    $assignmentIds = $allData->pluck('assignmentgenerate_id')->unique();

    // Fetch role history and assignment budgetings in bulk
    $roleHistories = DB::table('teamrolehistory')
      ->whereIn('teammember_id', $teamIds)
      ->get()
      ->keyBy('teammember_id');

    $assignmentBudgetings = DB::table('assignmentbudgetings')
      ->whereIn('assignmentgenerate_id', $assignmentIds)
      ->get()
      ->keyBy('assignmentgenerate_id');

    // Apply filters
    $teammemberDatas = $allData->filter(function ($item) use ($request, $roleHistories, $assignmentBudgetings) {
      $employee = $request->input('employee');
      $assignmentgenerateid = $request->input('assignmentgenerateid');

      $employeValues = $employee ? explode('/', $employee) : null;
      $teamname = $employeValues[0] ?? null;
      $role_id = $employeValues[1] ?? null;

      $matchesEmployee = $employee ? $item->teamid == $teamname && $item->role_id == $role_id : true;
      $matchesAssignment = $assignmentgenerateid ? $item->assignmentgenerate_id == $assignmentgenerateid : true;

      return $matchesEmployee && $matchesAssignment;
    });

    // Pass filtered data to the view
    $request->flash();
    return view('backEnd.timesheet.assignmentlistwithhour', compact('teammemberDatas', 'roleHistories', 'assignmentBudgetings'));
  }




Blade 222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222
resources\views\backEnd\timesheet\assignmentlistwithhour.blade.php

                        <form method="get" action="{{ url('totaltimeshow/filter') }}" enctype="multipart/form-data"
                            class="form-inline">
                            @csrf
                            @php
                                // Populate filter options
                                $teamselect = $teammemberDatas->unique('teamid')->sortBy('team_member');
                                $partnerselect = $teammemberDatas
                                    ->unique('assignmentgenerate_id')
                                    ->sortBy('assignmentgenerate_id');
                                // dd($teamselect);
                            @endphp
                            <div class="row">
                                <!-- Teammember Filter -->
                                <div class="col-md-6 mb-3">
                                    <div class="form-group">
                                        <strong><label for="employee">Teammember</label></strong>
                                        {{-- <select class="form-control" id="employee" name="employee"> --}}
                                        <select class="language form-control" id="employee" name="employee">
                                            <option value="">Please Select One</option>
                                            @foreach ($teamselect as $teammemberData)
                                                @php
                                                    $permotioncheck = $roleHistories->get($teammemberData->teamid);
                                                    $displayCode =
                                                        $permotioncheck->newstaff_code ?? $teammemberData->staffcode;
                                                @endphp
                                                <option value="{{ $teammemberData->teamid }}/{{ $teammemberData->role_id }}"
                                                    {{ old('employee') == $teammemberData->teamid . '/' . $teammemberData->role_id ? 'selected' : '' }}>
                                                    {{ $teammemberData->team_member }} ({{ $displayCode }})
                                                </option>
                                            @endforeach
                                        </select>
                                    </div>
                                </div>

                                <!-- Assignment Id Filter -->
                                <div class="col-md-4 mb-3">
                                    <div class="form-group">
                                        <strong><label for="assignmentgenerateid">Assignment Id</label></strong>
                                        {{-- <select class="form-control" id="assignmentgenerateid" name="assignmentgenerateid"> --}}
                                        <select class="language form-control" id="assignmentgenerateid"
                                            name="assignmentgenerateid">
                                            <option value="">Please Select One</option>
                                            @foreach ($partnerselect as $assignmentData)
                                                <option value="{{ $assignmentData->assignmentgenerate_id }}"
                                                    {{ old('assignmentgenerateid') == $assignmentData->assignmentgenerate_id ? 'selected' : '' }}>
                                                    {{ $assignmentData->assignmentgenerate_id }}
                                                </option>
                                            @endforeach
                                        </select>
                                    </div>
                                </div>

                                <!-- Search Button -->
                                <div class="col-md-2 mb-3">
                                    <div class="form-group">
                                        <strong><label for="search">&nbsp;</label></strong>
                                        <button type="submit" class="btn btn-success btn-block">Search</button>
                                    </div>
                                </div>
                            </div>
                        </form>
						
						
						
						
						
						
						
						
						
						
						
						
						
						
						
						
						
						
						
						
						
						
						
						
						
						
						                    <table id="examplee" class="display nowrap">
                        <thead>
                            <tr>
                                <th>Teammember</th>
                                <th>Teammember Code</th>
                                <th>Assignment Id</th>
                                <th>Assignment</th>
                                <th>Total Hour</th>
                            </tr>
                        </thead>
                        <tbody>
                            @foreach ($teammemberDatas as $teammemberData)
                                @php
                                    $permotioncheck = $roleHistories->get($teammemberData->teamid);
                                    $assignmentcheck = $assignmentBudgetings->get(
                                        $teammemberData->assignmentgenerate_id,
                                    );

                                    $datadate = $assignmentcheck
                                        ? Carbon\Carbon::createFromFormat('Y-m-d H:i:s', $assignmentcheck->created_at)
                                        : null;
                                    $permotiondate = $permotioncheck
                                        ? Carbon\Carbon::createFromFormat('Y-m-d H:i:s', $permotioncheck->created_at)
                                        : null;

                                    $displayCode =
                                        $permotioncheck && $datadate && $datadate->greaterThanOrEqualTo($permotiondate)
                                            ? $permotioncheck->newstaff_code
                                            : $teammemberData->staffcode;

                                    $totalHours =
                                        property_exists($teammemberData, 'leadpartner') &&
                                        $teammemberData->teamid == $teammemberData->leadpartner
                                            ? $teammemberData->leadpartnerhour ?? 0
                                            : (property_exists($teammemberData, 'otherpartner') &&
                                            $teammemberData->teamid == $teammemberData->otherpartner
                                                ? $teammemberData->otherpartnerhour ?? 0
                                                : $teammemberData->teamhour ?? 0);
                                @endphp
                                <tr>
                                    <td>{{ $teammemberData->title }} {{ $teammemberData->team_member }}</td>
                                    <td>{{ $displayCode }}</td>
                                    <td>{{ $teammemberData->assignmentgenerate_id }}</td>
                                    <td>{{ $teammemberData->assignmentname }}</td>
                                    <td>{{ $totalHours }}</td>
                                </tr>
                            @endforeach
                        </tbody>
                    </table>
					
					
					
					
				
				
					
					
					
					
					
					
					
					
					
					
					
					
					
					
					
<script src="https://code.jquery.com/jquery-3.5.1.js"></script>
<script src="https://cdn.datatables.net/1.10.25/js/jquery.dataTables.min.js"></script>
<script src="https://cdn.datatables.net/buttons/1.7.1/js/dataTables.buttons.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/jszip/3.1.3/jszip.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/pdfmake/0.1.53/pdfmake.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/pdfmake/0.1.53/vfs_fonts.js"></script>
<script src="https://cdn.datatables.net/buttons/1.7.1/js/buttons.html5.min.js"></script>
<script src="https://cdn.datatables.net/buttons/1.7.1/js/buttons.print.min.js"></script>


<script>
    $(document).ready(function() {
        $('#examplee').DataTable({
            dom: 'Bfrtip',
            "order": [
                [0, "asc"]
            ],
            columnDefs: [{
                targets: [1, 2, 3, 4],
                orderable: false
            }],
            searching: false,

            buttons: [

                {
                    extend: 'copyHtml5',
                    exportOptions: {
                        columns: [0, ':visible']
                    }
                },
                {
                    extend: 'excelHtml5',
                    filename: 'All Client List',
                    exportOptions: {
                        columns: ':visible'
                    }
                },
                {
                    extend: 'pdfHtml5',
                    exportOptions: {
                        columns: [0, 1, 2, 5]
                    }
                },
                'colvis'
            ]
        });
    });
</script>


Blade 222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222
resources\views\backEnd\applyleave\index.blade.php



greaterThan 

greaterThanOrEqualTo




Blade 222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222
app\Http\Controllers\PromotionandrejoiningController.php

    public function index()
    {
        $permotiondata = DB::table('teamrolehistory')
            ->leftJoin('teammembers', 'teammembers.id', '=', 'teamrolehistory.teammember_id')
            ->whereNotNull('teamrolehistory.promotion_date')
            ->select('teamrolehistory.*', 'teammembers.team_member', 'teammembers.id', 'teammembers.staffcode')
            ->get();

        $rejoiningdata = DB::table('teamrolehistory')
            ->leftJoin('teammembers', 'teammembers.id', '=', 'teamrolehistory.teammember_id')
            ->whereNotNull('teamrolehistory.rejoiningdate')
            ->select('teamrolehistory.*', 'teammembers.team_member', 'teammembers.id', 'teammembers.staffcode')
            ->get();

        $rejoiningdatasamepost = DB::table('rejoiningsamepost')
            ->leftJoin('teammembers', 'teammembers.id', '=', 'rejoiningsamepost.teammember_id')
            ->select('rejoiningsamepost.*', 'teammembers.team_member', 'teammembers.id', 'teammembers.staffcode')
            ->get();

        $rejoiningdatamerge = $rejoiningdata->merge($rejoiningdatasamepost);
        // dd($rejoiningdatamerge);
        return view('backEnd.promotion.index', compact('permotiondata', 'rejoiningdatamerge'));
    }


Blade 222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222
resources\views\backEnd\promotion\index.blade.php

create folder promotion name 

create index.blade.php file 


replace index blade file 





Blade 222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222
app\Http\Controllers\TimesheetController.php
find text   ->whereIn('teammembers.role_id',   it is 3 places 


      $teammembers = DB::table('teammembers')
        ->leftJoin('teamrolehistory', 'teamrolehistory.teammember_id', '=', 'teammembers.id')
        // ->where('teammembers.status', 1)
        ->whereIn('teammembers.role_id', [14, 15, 13, 11])
        ->select('teammembers.team_member', 'teamrolehistory.newstaff_code', 'teammembers.id', 'teammembers.staffcode')
        ->orderBy('team_member', 'ASC')
        ->get();


16-08-24  all above code updated on vsalive and 16-08-24 ke baad ka code baki hai update karna on vsademo 
Blade 222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222
resources\views\backEnd\applyleave\index.blade.php

greaterThan 

greaterThanOrEqualTo



after update vsalive per testing time 
Blade 222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222
resources\views\backEnd\applyleave\index.blade.php
admin





partner



Blade 222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222
resources\views\backEnd\applyleave\index.blade.php



Blade 222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222
resources\views\backEnd\applyleave\index.blade.php

Blade 222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222
resources\views\backEnd\applyleave\index.blade.php


Blade 222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222
resources\views\backEnd\applyleave\index.blade.php


Blade 222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222
resources\views\backEnd\applyleave\index.blade.php



Blade 222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222
resources\views\backEnd\applyleave\index.blade.php


Blade 222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222
resources\views\backEnd\applyleave\index.blade.php


Blade 222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222
resources\views\backEnd\applyleave\index.blade.php



Blade 222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222
resources\views\backEnd\applyleave\index.blade.php


Blade 222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222
resources\views\backEnd\applyleave\index.blade.php


Blade 222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222
resources\views\backEnd\applyleave\index.blade.php




Blade 222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222
resources\views\backEnd\applyleave\index.blade.php


Blade 222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222
resources\views\backEnd\applyleave\index.blade.php


Blade 222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222
resources\views\backEnd\applyleave\index.blade.php



Blade 222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222
resources\views\backEnd\applyleave\index.blade.php


Blade 222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222
resources\views\backEnd\applyleave\index.blade.php


Blade 222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222
resources\views\backEnd\applyleave\index.blade.php



Blade 222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222
resources\views\backEnd\applyleave\index.blade.php


Blade 222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222
resources\views\backEnd\applyleave\index.blade.php


Blade 222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222
resources\views\backEnd\applyleave\index.blade.php











